<!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><i><font color="#9A1900">#! /bin/sh</font></i>
<i><font color="#9A1900"># Common wrapper for a few potentially missing GNU programs.</font></i>

<font color="#009900">scriptversion</font><font color="#990000">=</font><font color="#993399">2012</font>-<font color="#993399">06</font>-<font color="#993399">26.16</font><font color="#990000">;</font> <i><font color="#9A1900"># UTC</font></i>

<i><font color="#9A1900"># Copyright (C) 1996-2013 Free Software Foundation, Inc.</font></i>
<i><font color="#9A1900"># Originally written by Fran,cois Pinard &lt;pinard@iro.umontreal.ca&gt;, 1996.</font></i>

<i><font color="#9A1900"># This program is free software; you can redistribute it and/or modify</font></i>
<i><font color="#9A1900"># it under the terms of the GNU General Public License as published by</font></i>
<i><font color="#9A1900"># the Free Software Foundation; either version 2, or (at your option)</font></i>
<i><font color="#9A1900"># any later version.</font></i>

<i><font color="#9A1900"># This program is distributed in the hope that it will be useful,</font></i>
<i><font color="#9A1900"># but WITHOUT ANY WARRANTY; without even the implied warranty of</font></i>
<i><font color="#9A1900"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</font></i>
<i><font color="#9A1900"># GNU General Public License for more details.</font></i>

<i><font color="#9A1900"># You should have received a copy of the GNU General Public License</font></i>
<i><font color="#9A1900"># along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</font></i>

<i><font color="#9A1900"># As a special exception to the GNU General Public License, if you</font></i>
<i><font color="#9A1900"># distribute this file as part of a program that contains a</font></i>
<i><font color="#9A1900"># configuration script generated by Autoconf, you may include it under</font></i>
<i><font color="#9A1900"># the same distribution terms that you use for the rest of that program.</font></i>

<b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#009900">$#</font> -eq <font color="#993399">0</font><font color="#990000">;</font> <b><font color="#0000FF">then</font></b>
  echo <font color="#993399">1</font><font color="#990000">&gt;&amp;</font><font color="#993399">2</font> <font color="#FF0000">"Try '$0 --help' for more information"</font>
  <b><font color="#0000FF">exit</font></b> <font color="#993399">1</font>
<b><font color="#0000FF">fi</font></b>

<b><font color="#0000FF">case</font></b> <font color="#009900">$1</font> <b><font color="#0000FF">in</font></b>

  --is-lightweight<font color="#990000">)</font>
    <i><font color="#9A1900"># Used by our autoconf macros to check whether the available missing</font></i>
    <i><font color="#9A1900"># script is modern enough.</font></i>
    <b><font color="#0000FF">exit</font></b> <font color="#993399">0</font>
    <font color="#990000">;;</font>

  --run<font color="#990000">)</font>
    <i><font color="#9A1900"># Back-compat with the calling convention used by older automake.</font></i>
    <b><font color="#0000FF">shift</font></b>
    <font color="#990000">;;</font>

  -h<font color="#990000">|</font>--h<font color="#990000">|</font>--he<font color="#990000">|</font>--hel<font color="#990000">|</font>--help<font color="#990000">)</font>
    echo <font color="#FF0000">"\</font>
<font color="#FF0000">$0 [OPTION]... PROGRAM [ARGUMENT]...</font>

<font color="#FF0000">Run 'PROGRAM [ARGUMENT]...', returning a proper advice when this fails due</font>
<font color="#FF0000">to PROGRAM being missing or too old.</font>

<font color="#FF0000">Options:</font>
<font color="#FF0000">  -h, --help      display this help and exit</font>
<font color="#FF0000">  -v, --version   output version information and exit</font>

<font color="#FF0000">Supported PROGRAM values:</font>
<font color="#FF0000">  aclocal   autoconf  autoheader   autom4te  automake  makeinfo</font>
<font color="#FF0000">  bison     yacc      flex         lex       help2man</font>

<font color="#FF0000">Version suffixes to PROGRAM as well as the prefixes 'gnu-', 'gnu', and</font>
<font color="#FF0000">'g' are ignored when checking the name.</font>

<font color="#FF0000">Send bug reports to &lt;bug-automake@gnu.org&gt;."</font>
    <b><font color="#0000FF">exit</font></b> <font color="#009900">$?</font>
    <font color="#990000">;;</font>

  -v<font color="#990000">|</font>--v<font color="#990000">|</font>--ve<font color="#990000">|</font>--ver<font color="#990000">|</font>--vers<font color="#990000">|</font>--versi<font color="#990000">|</font>--versio<font color="#990000">|</font>--version<font color="#990000">)</font>
    echo <font color="#FF0000">"missing $scriptversion (GNU Automake)"</font>
    <b><font color="#0000FF">exit</font></b> <font color="#009900">$?</font>
    <font color="#990000">;;</font>

  -<font color="#990000">*)</font>
    echo <font color="#993399">1</font><font color="#990000">&gt;&amp;</font><font color="#993399">2</font> <font color="#FF0000">"$0: unknown '$1' option"</font>
    echo <font color="#993399">1</font><font color="#990000">&gt;&amp;</font><font color="#993399">2</font> <font color="#FF0000">"Try '$0 --help' for more information"</font>
    <b><font color="#0000FF">exit</font></b> <font color="#993399">1</font>
    <font color="#990000">;;</font>

<b><font color="#0000FF">esac</font></b>

<i><font color="#9A1900"># Run the given program, remember its exit status.</font></i>
<font color="#FF0000">"$@"</font><font color="#990000">;</font> <font color="#009900">st</font><font color="#990000">=</font><font color="#009900">$?</font>

<i><font color="#9A1900"># If it succeeded, we are done.</font></i>
<b><font color="#0000FF">test</font></b> <font color="#009900">$st</font> -eq <font color="#993399">0</font> <font color="#990000">&amp;&amp;</font> <b><font color="#0000FF">exit</font></b> <font color="#993399">0</font>

<i><font color="#9A1900"># Also exit now if we it failed (or wasn't found), and '--version' was</font></i>
<i><font color="#9A1900"># passed; such an option is passed most likely to detect whether the</font></i>
<i><font color="#9A1900"># program is present and works.</font></i>
<b><font color="#0000FF">case</font></b> <font color="#009900">$2</font> <b><font color="#0000FF">in</font></b> --version<font color="#990000">|</font>--help<font color="#990000">)</font> <b><font color="#0000FF">exit</font></b> <font color="#009900">$st</font><font color="#990000">;;</font> <b><font color="#0000FF">esac</font></b>

<i><font color="#9A1900"># Exit code 63 means version mismatch.  This often happens when the user</font></i>
<i><font color="#9A1900"># tries to use an ancient version of a tool on a file that requires a</font></i>
<i><font color="#9A1900"># minimum version.</font></i>
<b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#009900">$st</font> -eq <font color="#993399">63</font><font color="#990000">;</font> <b><font color="#0000FF">then</font></b>
  <font color="#009900">msg</font><font color="#990000">=</font><font color="#FF0000">"probably too old"</font>
<b><font color="#0000FF">elif</font></b> <b><font color="#0000FF">test</font></b> <font color="#009900">$st</font> -eq <font color="#993399">127</font><font color="#990000">;</font> <b><font color="#0000FF">then</font></b>
  <i><font color="#9A1900"># Program was missing.</font></i>
  <font color="#009900">msg</font><font color="#990000">=</font><font color="#FF0000">"missing on your system"</font>
<b><font color="#0000FF">else</font></b>
  <i><font color="#9A1900"># Program was found and executed, but failed.  Give up.</font></i>
  <b><font color="#0000FF">exit</font></b> <font color="#009900">$st</font>
<b><font color="#0000FF">fi</font></b>

<font color="#009900">perl_URL</font><font color="#990000">=</font>http<font color="#990000">:</font>//www<font color="#990000">.</font>perl<font color="#990000">.</font>org<font color="#990000">/</font>
<font color="#009900">flex_URL</font><font color="#990000">=</font>http<font color="#990000">:</font>//flex<font color="#990000">.</font>sourceforge<font color="#990000">.</font>net<font color="#990000">/</font>
<font color="#009900">gnu_software_URL</font><font color="#990000">=</font>http<font color="#990000">:</font>//www<font color="#990000">.</font>gnu<font color="#990000">.</font>org/software

<b><font color="#000000">program_details ()</font></b>
{
  <b><font color="#0000FF">case</font></b> <font color="#009900">$1</font> <b><font color="#0000FF">in</font></b>
    aclocal<font color="#990000">|</font>automake<font color="#990000">)</font>
      echo <font color="#FF0000">"The '$1' program is part of the GNU Automake package:"</font>
      echo <font color="#FF0000">"&lt;$gnu_software_URL/automake&gt;"</font>
      echo <font color="#FF0000">"It also requires GNU Autoconf, GNU m4 and Perl in order to run:"</font>
      echo <font color="#FF0000">"&lt;$gnu_software_URL/autoconf&gt;"</font>
      echo <font color="#FF0000">"&lt;$gnu_software_URL/m4/&gt;"</font>
      echo <font color="#FF0000">"&lt;$perl_URL&gt;"</font>
      <font color="#990000">;;</font>
    autoconf<font color="#990000">|</font>autom4te<font color="#990000">|</font>autoheader<font color="#990000">)</font>
      echo <font color="#FF0000">"The '$1' program is part of the GNU Autoconf package:"</font>
      echo <font color="#FF0000">"&lt;$gnu_software_URL/autoconf/&gt;"</font>
      echo <font color="#FF0000">"It also requires GNU m4 and Perl in order to run:"</font>
      echo <font color="#FF0000">"&lt;$gnu_software_URL/m4/&gt;"</font>
      echo <font color="#FF0000">"&lt;$perl_URL&gt;"</font>
      <font color="#990000">;;</font>
  <b><font color="#0000FF">esac</font></b>
}

<b><font color="#000000">give_advice ()</font></b>
{
  <i><font color="#9A1900"># Normalize program name to check for.</font></i>
  <font color="#009900">normalized_program</font><font color="#990000">=</font>`echo <font color="#FF0000">"$1"</font> <font color="#990000">|</font> sed <font color="#FF0000">'</font>
<font color="#FF0000">    s/^gnu-//; t</font>
<font color="#FF0000">    s/^gnu//; t</font>
<font color="#FF0000">    s/^g//; t'</font>`

  <b><font color="#0000FF">printf</font></b> <font color="#FF0000">'%s</font><font color="#CC33CC">\n</font><font color="#FF0000">'</font> <font color="#FF0000">"'$1' is $msg."</font>

  <font color="#009900">configure_deps</font><font color="#990000">=</font><font color="#FF0000">"'configure.ac' or m4 files included by 'configure.ac'"</font>
  <b><font color="#0000FF">case</font></b> <font color="#009900">$normalized_program</font> <b><font color="#0000FF">in</font></b>
    autoconf<font color="#990000">*)</font>
      echo <font color="#FF0000">"You should only need it if you modified 'configure.ac',"</font>
      echo <font color="#FF0000">"or m4 files included by it."</font>
      program_details <font color="#FF0000">'autoconf'</font>
      <font color="#990000">;;</font>
    autoheader<font color="#990000">*)</font>
      echo <font color="#FF0000">"You should only need it if you modified 'acconfig.h' or"</font>
      echo <font color="#FF0000">"$configure_deps."</font>
      program_details <font color="#FF0000">'autoheader'</font>
      <font color="#990000">;;</font>
    automake<font color="#990000">*)</font>
      echo <font color="#FF0000">"You should only need it if you modified 'Makefile.am' or"</font>
      echo <font color="#FF0000">"$configure_deps."</font>
      program_details <font color="#FF0000">'automake'</font>
      <font color="#990000">;;</font>
    aclocal<font color="#990000">*)</font>
      echo <font color="#FF0000">"You should only need it if you modified 'acinclude.m4' or"</font>
      echo <font color="#FF0000">"$configure_deps."</font>
      program_details <font color="#FF0000">'aclocal'</font>
      <font color="#990000">;;</font>
   autom4te<font color="#990000">*)</font>
      echo <font color="#FF0000">"You might have modified some maintainer files that require"</font>
      echo <font color="#FF0000">"the 'automa4te' program to be rebuilt."</font>
      program_details <font color="#FF0000">'autom4te'</font>
      <font color="#990000">;;</font>
    bison<font color="#990000">*|</font>yacc<font color="#990000">*)</font>
      echo <font color="#FF0000">"You should only need it if you modified a '.y' file."</font>
      echo <font color="#FF0000">"You may want to install the GNU Bison package:"</font>
      echo <font color="#FF0000">"&lt;$gnu_software_URL/bison/&gt;"</font>
      <font color="#990000">;;</font>
    lex<font color="#990000">*|</font>flex<font color="#990000">*)</font>
      echo <font color="#FF0000">"You should only need it if you modified a '.l' file."</font>
      echo <font color="#FF0000">"You may want to install the Fast Lexical Analyzer package:"</font>
      echo <font color="#FF0000">"&lt;$flex_URL&gt;"</font>
      <font color="#990000">;;</font>
    help2man<font color="#990000">*)</font>
      echo <font color="#FF0000">"You should only need it if you modified a dependency"</font> <font color="#990000">\</font>
           <font color="#FF0000">"of a man page."</font>
      echo <font color="#FF0000">"You may want to install the GNU Help2man package:"</font>
      echo <font color="#FF0000">"&lt;$gnu_software_URL/help2man/&gt;"</font>
    <font color="#990000">;;</font>
    makeinfo<font color="#990000">*)</font>
      echo <font color="#FF0000">"You should only need it if you modified a '.texi' file, or"</font>
      echo <font color="#FF0000">"any other file indirectly affecting the aspect of the manual."</font>
      echo <font color="#FF0000">"You might want to install the Texinfo package:"</font>
      echo <font color="#FF0000">"&lt;$gnu_software_URL/texinfo/&gt;"</font>
      echo <font color="#FF0000">"The spurious makeinfo call might also be the consequence of"</font>
      echo <font color="#FF0000">"using a buggy 'make' (AIX, DU, IRIX), in which case you might"</font>
      echo <font color="#FF0000">"want to install GNU make:"</font>
      echo <font color="#FF0000">"&lt;$gnu_software_URL/make/&gt;"</font>
      <font color="#990000">;;</font>
    <font color="#990000">*)</font>
      echo <font color="#FF0000">"You might have modified some files without having the proper"</font>
      echo <font color="#FF0000">"tools for further handling them.  Check the 'README' file, it"</font>
      echo <font color="#FF0000">"often tells you about the needed prerequisites for installing"</font>
      echo <font color="#FF0000">"this package.  You may also peek at any GNU archive site, in"</font>
      echo <font color="#FF0000">"case some other package contains this missing '$1' program."</font>
      <font color="#990000">;;</font>
  <b><font color="#0000FF">esac</font></b>
}

give_advice <font color="#FF0000">"$1"</font> <font color="#990000">|</font> sed -e <font color="#FF0000">'1s/^/WARNING: /'</font> <font color="#990000">\</font>
                       -e <font color="#FF0000">'2,$s/^/         /'</font> <font color="#990000">&gt;&amp;</font><font color="#993399">2</font>

<i><font color="#9A1900"># Propagate the correct exit status (expected to be 127 for a program</font></i>
<i><font color="#9A1900"># not found, 63 for a program that failed due to version mismatch).</font></i>
<b><font color="#0000FF">exit</font></b> <font color="#009900">$st</font>

<i><font color="#9A1900"># Local variables:</font></i>
<i><font color="#9A1900"># eval: (add-hook 'write-file-hooks 'time-stamp)</font></i>
<i><font color="#9A1900"># time-stamp-start: "scriptversion="</font></i>
<i><font color="#9A1900"># time-stamp-format: "%:y-%02m-%02d.%02H"</font></i>
<i><font color="#9A1900"># time-stamp-time-zone: "UTC"</font></i>
<i><font color="#9A1900"># time-stamp-end: "; # UTC"</font></i>
<i><font color="#9A1900"># End:</font></i>
</tt></pre>
