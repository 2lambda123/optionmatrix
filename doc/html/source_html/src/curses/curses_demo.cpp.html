<!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><i><font color="#9A1900">/* optionmatrix:                                                            */</font></i>
<i><font color="#9A1900">/*                                                                          */</font></i>
<i><font color="#9A1900">/* Options &amp; Futures Matrix Modeler                                         */</font></i>
<i><font color="#9A1900">/* View and Control Theoretical Option Chains                               */</font></i>
<i><font color="#9A1900">/*                                                                          */</font></i>
<i><font color="#9A1900">/* File: curses_demo.cpp of optionmatrix                                    */</font></i>
<i><font color="#9A1900">/*                                                                          */</font></i>
<i><font color="#9A1900">/* Copyright (c) Anthony Bradford. 2012.                                    */</font></i>
<i><font color="#9A1900">/* </font></i><u><font color="#0000FF">http://anthonybradford.com</font></u><i><font color="#9A1900">                                               */</font></i>
<i><font color="#9A1900">/* </font></i><u><font color="#0000FF">info@anthonybradford.com</font></u><i><font color="#9A1900">                                                 */</font></i>
<i><font color="#9A1900">/*                                                                          */</font></i>
<i><font color="#9A1900">/* optionmatrix may be freely redistributed.                                */</font></i>
<i><font color="#9A1900">/* See file COPYING included with this distribution for license information */</font></i>

<i><font color="#9A1900">/* </font></i>
<i><font color="#9A1900">   optionmatrix is free software; you can redistribute it and/or modify</font></i>
<i><font color="#9A1900">   it under the terms of the GNU General Public License as published by</font></i>
<i><font color="#9A1900">   the Free Software Foundation; either version 3 of the License, or</font></i>
<i><font color="#9A1900">   (at your option) any later version.</font></i>

<i><font color="#9A1900">   optionmatrix program is distributed in the hope that it will be useful,</font></i>
<i><font color="#9A1900">   but WITHOUT ANY WARRANTY; without even the implied warranty of</font></i>
<i><font color="#9A1900">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</font></i>
<i><font color="#9A1900">   GNU General Public License for more details.</font></i>

<i><font color="#9A1900">   You should have received a copy of the GNU General Public License</font></i>
<i><font color="#9A1900">   along with this program.  If not, see </font></i><u><font color="#0000FF">&lt;http://www.gnu.org/licenses/&gt;</font></u><i><font color="#9A1900">.</font></i>
<i><font color="#9A1900">*/</font></i>

<b><font color="#000080">#include</font></b> <font color="#FF0000">"../common/defs.h"</font>
<b><font color="#000080">#include</font></b> <font color="#FF0000">"../common/extern.h"</font>
<b><font color="#000080">#include</font></b> <font color="#FF0000">"curses_include.h"</font>

<font color="#009900">int</font> <b><font color="#000000">init_demo</font></b><font color="#990000">(</font><b><font color="#0000FF">struct</font></b> <font color="#008080">_properties</font> <font color="#990000">*</font>properties<font color="#990000">)</font>
<font color="#FF0000">{</font>
  <font color="#009900">int</font> x<font color="#990000">;</font>
  <font color="#009900">int</font> height<font color="#990000">,</font> width<font color="#990000">;</font>

  <i><font color="#9A1900">/* get screen size */</font></i>
  <b><font color="#000000">getmaxyx</font></b><font color="#990000">(</font>stdscr<font color="#990000">,</font> height<font color="#990000">,</font> width<font color="#990000">);</font>

  properties<font color="#990000">-&gt;</font>demotype <font color="#990000">=</font> DECIMAL_GREEKS<font color="#990000">;</font>

  properties<font color="#990000">-&gt;</font>customstrike <font color="#990000">=</font> <font color="#993399">100</font><font color="#990000">;</font>
  properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> <font color="#990000">.</font><font color="#993399">25</font><font color="#990000">;</font>

  <b><font color="#000000">clear</font></b><font color="#990000">();</font>
  <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">!</font><b><font color="#000000">DoWeHaveOptions</font></b><font color="#990000">(</font>properties<font color="#990000">)</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"No Options Models implemented</font><font color="#CC33CC">\n</font><font color="#FF0000">Press any key</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>
    <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

    <b><font color="#000000">noecho</font></b><font color="#990000">();</font>
    <b><font color="#000000">getch</font></b><font color="#990000">();</font>
    <b><font color="#000000">echo</font></b><font color="#990000">();</font>

    <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
  <font color="#FF0000">}</font>

  properties<font color="#990000">-&gt;</font>modeltype <font color="#990000">=</font> <b><font color="#000000">SetToOption</font></b><font color="#990000">(</font>properties<font color="#990000">);</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportDividend <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>dividend <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>defaultDividend<font color="#990000">;</font>
  <font color="#FF0000">}</font>

  <i><font color="#9A1900">/* set the seed as the time */</font></i>
  <b><font color="#000000">srand</font></b><font color="#990000">(</font> <b><font color="#000000">time</font></b><font color="#990000">(</font><font color="#993399">0</font><font color="#990000">)</font> <font color="#990000">);</font>

  <i><font color="#9A1900">/* give a random fireworks display */</font></i>
  <b><font color="#0000FF">for</font></b><font color="#990000">(</font>x <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font> x <font color="#990000">&lt;</font> <font color="#993399">50</font><font color="#990000">;</font> <font color="#990000">++</font>x<font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <i><font color="#9A1900">/* 0 to row-1, 0 to col-1 */</font></i>
    <b><font color="#000000">move</font></b><font color="#990000">((</font><font color="#009900">int</font><font color="#990000">)(</font>height <font color="#990000">*</font> <font color="#990000">(</font><b><font color="#000000">rand</font></b><font color="#990000">()</font> <font color="#990000">/</font> <font color="#990000">(</font>RAND_MAX <font color="#990000">+</font> <font color="#993399">1.0</font><font color="#990000">))),(</font><font color="#009900">int</font><font color="#990000">)(</font>width <font color="#990000">*</font> <font color="#990000">(</font><b><font color="#000000">rand</font></b><font color="#990000">()</font> <font color="#990000">/</font> <font color="#990000">(</font>RAND_MAX <font color="#990000">+</font> <font color="#993399">1.0</font><font color="#990000">))));</font>

    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"OPTIONS"</font><font color="#990000">);</font>
      
    <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
    
    <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">8500</font><font color="#990000">);</font>
  <font color="#FF0000">}</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <b><font color="#000000">myusleep</font></b><font color="#990000">(</font><font color="#993399">1000000</font><font color="#990000">)</font> <font color="#990000">==</font> <font color="#990000">-</font><font color="#993399">1</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
  <font color="#FF0000">}</font>

  <b><font color="#000000">clear</font></b><font color="#990000">();</font>

  <i><font color="#9A1900">///////////////////////////////////////////////////////////////////</font></i>

  properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Zdefault<font color="#990000">;</font>
  properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Bdefault<font color="#990000">;</font>
  properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Jdefault<font color="#990000">;</font>
  properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Pdefault<font color="#990000">;</font>
  properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UsePound <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Pounddefault<font color="#990000">;</font>
  properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>steps <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">;</font>

  <i><font color="#9A1900">//////////////////////////////////////////////////////////////////</font></i>

  <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">0</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Enter stock price                    : "</font><font color="#990000">);</font>

  <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">500000</font><font color="#990000">);</font>
  <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

  <i><font color="#9A1900">/* make it look like someone is typing */</font></i>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"1"</font><font color="#990000">);</font> <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">200000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"0"</font><font color="#990000">);</font> <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">300000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"0"</font><font color="#990000">);</font> <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">200000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">=</font> <font color="#993399">100</font><font color="#990000">;</font>
            
  <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Enter strike price                   : "</font><font color="#990000">);</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"9"</font><font color="#990000">);</font> <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">200000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"0"</font><font color="#990000">);</font> <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">300000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  properties<font color="#990000">-&gt;</font>customstrike <font color="#990000">=</font> <font color="#993399">90</font><font color="#990000">;</font>

  <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">2</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Enter interest rate     (%s06 = 6%%)   : "</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>lc<font color="#990000">-&gt;</font>mon_decimal_point<font color="#990000">);</font>

  <i><font color="#9A1900">/* make it look like someone is typing */</font></i>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>lc<font color="#990000">-&gt;</font>mon_decimal_point<font color="#990000">);</font> 
  <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">200000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"0"</font><font color="#990000">);</font> <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">300000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"6"</font><font color="#990000">);</font> <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">200000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate <font color="#990000">=</font> <font color="#990000">.</font><font color="#993399">06</font><font color="#990000">;</font>

  <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">3</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Time to expiration    (%s25=1/4 year) : "</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>lc<font color="#990000">-&gt;</font>mon_decimal_point<font color="#990000">);</font>

  <i><font color="#9A1900">/* make it look like someone is typing */</font></i>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>lc<font color="#990000">-&gt;</font>mon_decimal_point<font color="#990000">);</font> 
  <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">200000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"2"</font><font color="#990000">);</font> <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">300000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"5"</font><font color="#990000">);</font> <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">200000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">3</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Time to expiration    (%s25=1/4 year) : %.6f, %.3f days, %s"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>lc<font color="#990000">-&gt;</font>mon_decimal_point<font color="#990000">,</font><font color="#993399">0.25</font><font color="#990000">,(</font><font color="#993399">365</font><font color="#990000">*(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">])),</font><b><font color="#000000">decimal_date_to_real_date</font></b><font color="#990000">(</font><font color="#993399">0.25</font><font color="#990000">));</font>
  properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> <font color="#990000">.</font><font color="#993399">25</font><font color="#990000">;</font>

  <b><font color="#000000">time</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>starttime<font color="#990000">);</font>
  <b><font color="#000000">time</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>starttime2<font color="#990000">);</font>
            
  <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Enter standard deviation             : "</font><font color="#990000">);</font>
  <i><font color="#9A1900">/* make it look like someone is typing */</font></i>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>lc<font color="#990000">-&gt;</font>mon_decimal_point<font color="#990000">);</font> 
  <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">200000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"3"</font><font color="#990000">);</font> <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">300000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"5"</font><font color="#990000">);</font> <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">200000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility <font color="#990000">=</font> <font color="#990000">.</font><font color="#993399">35</font><font color="#990000">;</font>

  <b><font color="#000000">expires</font></b><font color="#990000">(</font>LEG1<font color="#990000">,</font><font color="#993399">30</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">,</font>properties<font color="#990000">);</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <b><font color="#000000">myusleep</font></b><font color="#990000">(</font><font color="#993399">500000</font><font color="#990000">)</font> <font color="#990000">==</font> <font color="#990000">-</font><font color="#993399">1</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
  <font color="#FF0000">}</font>

  <b><font color="#000000">clear</font></b><font color="#990000">();</font>
  <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

  properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> DECIMAL_GREEKS<font color="#990000">;</font>
  properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> DECIMALS<font color="#990000">;</font>

  <b><font color="#000000">matrix</font></b><font color="#990000">(</font>properties<font color="#990000">,</font>properties<font color="#990000">);</font>
  <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s supports date entry and decimal dates"</font><font color="#990000">,</font> PACKAGE_NAME<font color="#990000">);</font>
  <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
  <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <b><font color="#000000">myusleep</font></b><font color="#990000">(</font><font color="#993399">2000000</font><font color="#990000">)</font> <font color="#990000">==</font> <font color="#990000">-</font><font color="#993399">1</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
  <font color="#FF0000">}</font>

  properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> DECIMAL_OPTIONS<font color="#990000">;</font>
  properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> DECIMALS<font color="#990000">;</font>

  <b><font color="#000000">matrix</font></b><font color="#990000">(</font>properties<font color="#990000">,</font>properties<font color="#990000">);</font>
  <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  
  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <b><font color="#000000">myusleep</font></b><font color="#990000">(</font><font color="#993399">2000000</font><font color="#990000">)</font> <font color="#990000">==</font> <font color="#990000">-</font><font color="#993399">1</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
  <font color="#FF0000">}</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportTime2 <font color="#990000">!=</font> <font color="#993399">1</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> CALENDAR_OPTIONS3<font color="#990000">;</font>
    properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> CALENDAR<font color="#990000">;</font>

    <b><font color="#000000">matrix</font></b><font color="#990000">(</font>properties<font color="#990000">,</font>properties<font color="#990000">);</font>
    <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s supports calendar dates"</font><font color="#990000">,</font> PACKAGE_NAME<font color="#990000">);</font>
    <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
    <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
    
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <b><font color="#000000">myusleep</font></b><font color="#990000">(</font><font color="#993399">2000000</font><font color="#990000">)</font> <font color="#990000">==</font> <font color="#990000">-</font><font color="#993399">1</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
    <font color="#FF0000">}</font>
    
    properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> CALENDAR_OPTIONS5<font color="#990000">;</font>
    properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> CALENDAR<font color="#990000">;</font>

    <b><font color="#000000">matrix</font></b><font color="#990000">(</font>properties<font color="#990000">,</font>properties<font color="#990000">);</font>
    <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
    
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <b><font color="#000000">myusleep</font></b><font color="#990000">(</font><font color="#993399">2000000</font><font color="#990000">)</font> <font color="#990000">==</font> <font color="#990000">-</font><font color="#993399">1</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
    <font color="#FF0000">}</font>

    properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> CALENDAR_OPTIONS6<font color="#990000">;</font>
    properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> CALENDAR<font color="#990000">;</font>

    <b><font color="#000000">matrix</font></b><font color="#990000">(</font>properties<font color="#990000">,</font>properties<font color="#990000">);</font>
    <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s supports many formats"</font><font color="#990000">,</font> PACKAGE_NAME<font color="#990000">);</font>
    <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
    <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
    
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <b><font color="#000000">myusleep</font></b><font color="#990000">(</font><font color="#993399">2000000</font><font color="#990000">)</font> <font color="#990000">==</font> <font color="#990000">-</font><font color="#993399">1</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
    <font color="#FF0000">}</font>
  <font color="#FF0000">}</font>
  
  properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> DEMO_OPTIONS<font color="#990000">;</font>
  properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> DECIMALS<font color="#990000">;</font>

  <b><font color="#000000">clear</font></b><font color="#990000">();</font>
  <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

  <b><font color="#0000FF">return</font></b> <font color="#993399">0</font><font color="#990000">;</font>
<font color="#FF0000">}</font>

<font color="#009900">int</font> <b><font color="#000000">init_futures_demo</font></b><font color="#990000">(</font><b><font color="#0000FF">struct</font></b> <font color="#008080">_properties</font> <font color="#990000">*</font>properties<font color="#990000">,</font> <b><font color="#0000FF">struct</font></b> <font color="#008080">_properties</font> <font color="#990000">*</font>future_properties<font color="#990000">)</font>
<font color="#FF0000">{</font>
  <font color="#009900">int</font> height<font color="#990000">,</font> width<font color="#990000">;</font>

  <i><font color="#9A1900">/* get screen size */</font></i>
  <b><font color="#000000">getmaxyx</font></b><font color="#990000">(</font>stdscr<font color="#990000">,</font> height<font color="#990000">,</font> width<font color="#990000">);</font>

  <font color="#009900">int</font> x<font color="#990000">;</font>

  <b><font color="#000000">clear</font></b><font color="#990000">();</font>
  <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">!</font><b><font color="#000000">DoWeHaveFutures</font></b><font color="#990000">(</font>properties<font color="#990000">)</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"No Futures Models implemented</font><font color="#CC33CC">\n</font><font color="#FF0000">Press any key</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>
    <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

    <b><font color="#000000">noecho</font></b><font color="#990000">();</font>
    <b><font color="#000000">getch</font></b><font color="#990000">();</font>
    <b><font color="#000000">echo</font></b><font color="#990000">();</font>

    <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
  <font color="#FF0000">}</font>

  <i><font color="#9A1900">/* set the seed as the time */</font></i>
  <b><font color="#000000">srand</font></b><font color="#990000">(</font> <b><font color="#000000">time</font></b><font color="#990000">(</font><font color="#993399">0</font><font color="#990000">)</font> <font color="#990000">);</font>

  <i><font color="#9A1900">/* give a random fireworks display */</font></i>
  <b><font color="#0000FF">for</font></b><font color="#990000">(</font>x <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font> x <font color="#990000">&lt;</font> <font color="#993399">50</font><font color="#990000">;</font> <font color="#990000">++</font>x<font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <i><font color="#9A1900">/* 0 to row-1, 0 to col-1 */</font></i>
    <b><font color="#000000">move</font></b><font color="#990000">((</font><font color="#009900">int</font><font color="#990000">)(</font>height <font color="#990000">*</font> <font color="#990000">(</font><b><font color="#000000">rand</font></b><font color="#990000">()</font> <font color="#990000">/</font> <font color="#990000">(</font>RAND_MAX <font color="#990000">+</font> <font color="#993399">1.0</font><font color="#990000">))),(</font><font color="#009900">int</font><font color="#990000">)(</font>width <font color="#990000">*</font> <font color="#990000">(</font><b><font color="#000000">rand</font></b><font color="#990000">()</font> <font color="#990000">/</font> <font color="#990000">(</font>RAND_MAX <font color="#990000">+</font> <font color="#993399">1.0</font><font color="#990000">))));</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"FUTURES"</font><font color="#990000">);</font>
    
    <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

    <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">8500</font><font color="#990000">);</font>
  <font color="#FF0000">}</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <b><font color="#000000">myusleep</font></b><font color="#990000">(</font><font color="#993399">1000000</font><font color="#990000">)</font> <font color="#990000">==</font> <font color="#990000">-</font><font color="#993399">1</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
  <font color="#FF0000">}</font>

  <b><font color="#000000">clear</font></b><font color="#990000">();</font>

  <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">0</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Enter spot price                     : "</font><font color="#990000">);</font>
  <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">500000</font><font color="#990000">);</font>
  <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

  <i><font color="#9A1900">/* make it look like someone is typing */</font></i>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"1"</font><font color="#990000">);</font> <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">200000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"0"</font><font color="#990000">);</font> <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">300000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"0"</font><font color="#990000">);</font> <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">200000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">=</font> <font color="#993399">100</font><font color="#990000">;</font>

  <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">200000</font><font color="#990000">);</font>
            
  <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Enter interest rate     (%s05 = 6%%)   : "</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>lc<font color="#990000">-&gt;</font>mon_decimal_point<font color="#990000">);</font>

  <i><font color="#9A1900">/* make it look like someone is typing */</font></i>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>lc<font color="#990000">-&gt;</font>mon_decimal_point<font color="#990000">);</font>
  <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">200000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"0"</font><font color="#990000">);</font> <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">300000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"6"</font><font color="#990000">);</font> <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">200000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate <font color="#990000">=</font> <font color="#990000">.</font><font color="#993399">06</font><font color="#990000">;</font>

  <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">2</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Time to expiration    (%s25=1/4 year) : "</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>lc<font color="#990000">-&gt;</font>mon_decimal_point<font color="#990000">);</font>

  <i><font color="#9A1900">/* make it look like someone is typing */</font></i>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>lc<font color="#990000">-&gt;</font>mon_decimal_point<font color="#990000">);</font>
  <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">200000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"2"</font><font color="#990000">);</font> <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">300000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"5"</font><font color="#990000">);</font> <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">200000</font><font color="#990000">);</font> <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

  <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">500000</font><font color="#990000">);</font>

  <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">2</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Time to expiration    (%s25=1/4 year) : %.6f, %.3f days, %s</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>lc<font color="#990000">-&gt;</font>mon_decimal_point<font color="#990000">,</font><font color="#993399">0.25</font><font color="#990000">,(</font><font color="#993399">365</font><font color="#990000">*(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">])),</font><b><font color="#000000">decimal_date_to_real_date</font></b><font color="#990000">(</font><font color="#993399">0.25</font><font color="#990000">));</font>
  properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> <font color="#990000">.</font><font color="#993399">25</font><font color="#990000">;</font>

  <b><font color="#000000">expires</font></b><font color="#990000">(</font>LEG1<font color="#990000">,</font><font color="#993399">30</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">,</font>future_properties<font color="#990000">);</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <b><font color="#000000">myusleep</font></b><font color="#990000">(</font><font color="#993399">2000000</font><font color="#990000">)</font> <font color="#990000">==</font> <font color="#990000">-</font><font color="#993399">1</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
  <font color="#FF0000">}</font>

  <b><font color="#000000">clear</font></b><font color="#990000">();</font>
  <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

  properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> DECIMAL_FUTURE<font color="#990000">;</font>
  properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> DECIMALS<font color="#990000">;</font>

  properties<font color="#990000">-&gt;</font>modeltype <font color="#990000">=</font> <b><font color="#000000">SetToFuture</font></b><font color="#990000">(</font>properties<font color="#990000">);</font>

  <b><font color="#000000">matrix</font></b><font color="#990000">(</font>properties<font color="#990000">,</font>future_properties<font color="#990000">);</font>
  <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s supports date entry and decimal dates"</font><font color="#990000">,</font> PACKAGE_NAME<font color="#990000">);</font>
  <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
  <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <b><font color="#000000">myusleep</font></b><font color="#990000">(</font><font color="#993399">6000000</font><font color="#990000">)</font> <font color="#990000">==</font> <font color="#990000">-</font><font color="#993399">1</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
  <font color="#FF0000">}</font>

  properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> CALENDAR_FUTURE<font color="#990000">;</font>
  properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> CALENDAR<font color="#990000">;</font>

  <b><font color="#000000">matrix</font></b><font color="#990000">(</font>properties<font color="#990000">,</font>future_properties<font color="#990000">);</font>
  <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s supports calendar dates"</font><font color="#990000">,</font> PACKAGE_NAME<font color="#990000">);</font>
  <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
  <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <b><font color="#000000">myusleep</font></b><font color="#990000">(</font><font color="#993399">4000000</font><font color="#990000">)</font> <font color="#990000">==</font> <font color="#990000">-</font><font color="#993399">1</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
  <font color="#FF0000">}</font>

  properties<font color="#990000">-&gt;</font>demotype <font color="#990000">=</font> CALENDAR_FUTURE<font color="#990000">;</font>
  properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> DEMO_FUTURES<font color="#990000">;</font>

  <b><font color="#000000">clear</font></b><font color="#990000">();</font>
  <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

  <b><font color="#0000FF">return</font></b> <font color="#993399">0</font><font color="#990000">;</font>

<font color="#FF0000">}</font>

<font color="#009900">int</font> <b><font color="#000000">futures_demo</font></b><font color="#990000">(</font><b><font color="#0000FF">struct</font></b> <font color="#008080">_properties</font> <font color="#990000">*</font>properties<font color="#990000">,</font><b><font color="#0000FF">struct</font></b> <font color="#008080">_properties</font> <font color="#990000">*</font>future_properties<font color="#990000">,</font> <b><font color="#0000FF">const</font></b> <font color="#009900">int</font> bPerpetual<font color="#990000">)</font>
<font color="#FF0000">{</font>
  <b><font color="#0000FF">static</font></b> <font color="#009900">int</font> numberofdemos <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> numberofdemos<font color="#990000">++</font> <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <b><font color="#000000">init_futures_demo</font></b><font color="#990000">(</font>properties<font color="#990000">,</font>future_properties<font color="#990000">)</font> <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#0000FF">return</font></b> <font color="#993399">0</font><font color="#990000">;</font>

    <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
    <font color="#FF0000">{</font>
      numberofdemos <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>day_offset <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>day_offset_counter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>demotype <font color="#990000">=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>skipmonth <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>

      <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
    <font color="#FF0000">}</font>
  <font color="#FF0000">}</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> numberofdemos <font color="#990000">&lt;</font> <font color="#993399">10</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">50</font><font color="#990000">;</font>
    <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing spot price %.2f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">);</font>
                    
  <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> numberofdemos <font color="#990000">&gt;=</font> <font color="#993399">10</font> <font color="#990000">&amp;&amp;</font> numberofdemos <font color="#990000">&lt;</font> <font color="#993399">20</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">0010</font><font color="#990000">;</font>
    <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing interest rate %.4f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate<font color="#990000">);</font>                        

  <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> numberofdemos <font color="#990000">&gt;=</font> <font color="#993399">20</font> <font color="#990000">&amp;&amp;</font> numberofdemos <font color="#990000">&lt;</font> <font color="#993399">32</font><font color="#990000">)</font>
  <font color="#FF0000">{</font>
    properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">++;</font>

    <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Skip month forward %d"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

    <b><font color="#000000">expires</font></b><font color="#990000">(</font>LEG1<font color="#990000">,</font><font color="#993399">30</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">,</font>future_properties<font color="#990000">);</font>
    
  <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> numberofdemos <font color="#990000">&gt;=</font> <font color="#993399">32</font> <font color="#990000">&amp;&amp;</font> numberofdemos <font color="#990000">&lt;</font> <font color="#993399">38</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

    <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                    
    properties<font color="#990000">-&gt;</font>day_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>day_offset<font color="#990000">-((</font><font color="#009900">double</font><font color="#990000">)</font><font color="#993399">1</font><font color="#990000">/(</font><font color="#009900">double</font><font color="#990000">)</font><font color="#993399">365</font><font color="#990000">);</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Day offset is %d days"</font><font color="#990000">,</font> <font color="#990000">++</font>properties<font color="#990000">-&gt;</font>day_offset_counter<font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
  <font color="#FF0000">}</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> numberofdemos <font color="#990000">&gt;=</font> <font color="#993399">38</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> bPerpetual <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      numberofdemos <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>day_offset <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>day_offset_counter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>skipmonth <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>demotype <font color="#990000">=</font> DEMO_FUTURES<font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> DEMO_FUTURES<font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> DECIMALS<font color="#990000">;</font>

      <b><font color="#0000FF">return</font></b> <font color="#993399">0</font><font color="#990000">;</font>

    <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
    <font color="#FF0000">{</font>
      numberofdemos <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>day_offset <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>day_offset_counter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>demotype <font color="#990000">=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>skipmonth <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>

      <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">3000000</font><font color="#990000">);</font>
    <font color="#FF0000">}</font>
    
    <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
  <font color="#FF0000">}</font>

  <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <b><font color="#000000">myusleep</font></b><font color="#990000">(</font><font color="#993399">500000</font><font color="#990000">)</font> <font color="#990000">==</font> <font color="#990000">-</font><font color="#993399">1</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    numberofdemos <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
    properties<font color="#990000">-&gt;</font>day_offset <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
    properties<font color="#990000">-&gt;</font>day_offset_counter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
    properties<font color="#990000">-&gt;</font>demotype <font color="#990000">=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
    properties<font color="#990000">-&gt;</font>skipmonth <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
    properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>

    <b><font color="#000000">props_defaults_futures</font></b><font color="#990000">(</font>future_properties<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

    <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>

  <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
  <font color="#FF0000">{</font>
    <b><font color="#0000FF">return</font></b> <font color="#993399">0</font><font color="#990000">;</font>
  <font color="#FF0000">}</font>
<font color="#FF0000">}</font>

<font color="#009900">int</font> <b><font color="#000000">options_demo</font></b><font color="#990000">(</font><b><font color="#0000FF">struct</font></b> <font color="#008080">_properties</font> <font color="#990000">*</font>properties<font color="#990000">,</font> <b><font color="#0000FF">const</font></b> <font color="#009900">int</font> bPerpetual<font color="#990000">)</font>
<font color="#FF0000">{</font>
  <b><font color="#0000FF">static</font></b> <font color="#009900">int</font> numberofdemos <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> numberofdemos<font color="#990000">++</font> <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <b><font color="#000000">init_demo</font></b><font color="#990000">(</font>properties<font color="#990000">)</font> <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#0000FF">return</font></b> <font color="#993399">0</font><font color="#990000">;</font>

    <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
    <font color="#FF0000">{</font>
      properties<font color="#990000">-&gt;</font>demotype <font color="#990000">=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>skipmonth <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      numberofdemos <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

      <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
    <font color="#FF0000">}</font>
  <font color="#FF0000">}</font>

  <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportTime2 <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> DECIMALS<font color="#990000">;</font>
  <font color="#FF0000">}</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> numberofdemos <font color="#990000">&lt;</font> <font color="#993399">4</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>demotype <font color="#990000">==</font> DECIMAL_GREEKS <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      properties<font color="#990000">-&gt;</font>customstrike <font color="#990000">+=</font> <font color="#993399">10</font><font color="#990000">;</font>

      <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing strike %.2f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>customstrike<font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

    <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
    <font color="#FF0000">{</font>
      properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> <font color="#993399">5</font><font color="#990000">;</font>
      
      <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing strikes"</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
    <font color="#FF0000">}</font>
                    
  <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> numberofdemos <font color="#990000">&gt;=</font> <font color="#993399">4</font> <font color="#990000">&amp;&amp;</font> numberofdemos <font color="#990000">&lt;</font> <font color="#993399">8</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">50</font><font color="#990000">;</font>
    <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing stock price %.2f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">);</font>
    
  <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> numberofdemos <font color="#990000">&gt;=</font> <font color="#993399">8</font> <font color="#990000">&amp;&amp;</font> numberofdemos <font color="#990000">&lt;</font> <font color="#993399">12</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">0010</font><font color="#990000">;</font>
    
    <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing interest rate %.4f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate<font color="#990000">);</font>

  <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> numberofdemos <font color="#990000">&gt;=</font> <font color="#993399">12</font> <font color="#990000">&amp;&amp;</font> numberofdemos <font color="#990000">&lt;</font> <font color="#993399">16</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

    properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">01</font><font color="#990000">;</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing standard deviation %.4f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility<font color="#990000">);</font>
    <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                        
  <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> numberofdemos <font color="#990000">&gt;=</font> <font color="#993399">16</font> <font color="#990000">&amp;&amp;</font> numberofdemos <font color="#990000">&lt;</font> <font color="#993399">20</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
    <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                    
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>demotype <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">||</font> properties<font color="#990000">-&gt;</font>demotype <font color="#990000">==</font> DECIMAL_GREEKS <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]-.</font><font color="#993399">01</font><font color="#990000">)</font> <font color="#990000">&gt;</font> <font color="#993399">0</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">01</font><font color="#990000">;</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing expiration time"</font><font color="#990000">);</font>

      <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
      <font color="#FF0000">{</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Can't decrease expiration time"</font><font color="#990000">);</font>
        <b><font color="#0000FF">return</font></b> <font color="#993399">0</font><font color="#990000">;</font>
      <font color="#FF0000">}</font>
    <font color="#FF0000">}</font>
                        
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>demotype <font color="#990000">&gt;</font> <font color="#993399">1</font> <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>demotype <font color="#990000">&lt;</font> <font color="#993399">8</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      properties<font color="#990000">-&gt;</font>day_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>day_offset<font color="#990000">+((</font><font color="#009900">double</font><font color="#990000">)</font><font color="#993399">1</font><font color="#990000">/(</font><font color="#009900">double</font><font color="#990000">)</font><font color="#993399">365</font><font color="#990000">);</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Day offset is %d days"</font><font color="#990000">,</font> <font color="#990000">--</font>properties<font color="#990000">-&gt;</font>day_offset_counter<font color="#990000">);</font>
    <font color="#FF0000">}</font>
  <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> numberofdemos <font color="#990000">&gt;=</font> <font color="#993399">20</font> <font color="#990000">&amp;&amp;</font> numberofdemos <font color="#990000">&lt;</font> <font color="#993399">30</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <i><font color="#9A1900">/*</font></i>
<i><font color="#9A1900">     * month walking looks best in formas 3,5,6 so lets</font></i>
<i><font color="#9A1900">     * skip the other formats</font></i>
<i><font color="#9A1900">     */</font></i>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>demotype <font color="#990000">!=</font> <font color="#993399">3</font> <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>demotype <font color="#990000">!=</font> <font color="#993399">5</font> <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>demotype <font color="#990000">!=</font> <font color="#993399">6</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      numberofdemos <font color="#990000">=</font> <font color="#993399">30</font><font color="#990000">;</font>
      <b><font color="#0000FF">return</font></b> <font color="#993399">0</font><font color="#990000">;</font>
    <font color="#FF0000">}</font>

    properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">++;</font>
    
    <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Skip month forward %d"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
    
    <b><font color="#000000">expires</font></b><font color="#990000">(</font>LEG1<font color="#990000">,</font><font color="#993399">30</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">,</font>properties<font color="#990000">);</font>
    
  <font color="#FF0000">}</font>                  

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> numberofdemos <font color="#990000">&gt;=</font> <font color="#993399">30</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    numberofdemos <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>
    properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> <font color="#993399">0.0</font><font color="#990000">;</font>
    properties<font color="#990000">-&gt;</font>day_offset <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
    properties<font color="#990000">-&gt;</font>day_offset_counter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
    properties<font color="#990000">-&gt;</font>skipmonth <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

    <b><font color="#000000">expires</font></b><font color="#990000">(</font>LEG1<font color="#990000">,</font><font color="#993399">30</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">,</font>properties<font color="#990000">);</font>
    
    <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Day offset is 0 days"</font><font color="#990000">);</font>
      
    <font color="#990000">++</font>properties<font color="#990000">-&gt;</font>demotype<font color="#990000">;</font>

    <b><font color="#0000FF">if</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>demotype <font color="#990000">==</font> <font color="#993399">8</font> <font color="#990000">||</font>
       <font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportTime2 <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">&amp;&amp;</font>
         properties<font color="#990000">-&gt;</font>demotype <font color="#990000">==</font> <font color="#993399">2</font><font color="#990000">))</font>
    <font color="#FF0000">{</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> bPerpetual <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        properties<font color="#990000">-&gt;</font>demotype <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>skipmonth <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
        numberofdemos <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

        <i><font color="#9A1900">///////////////////////////////////////////////////////////////////</font></i>

        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Zdefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Bdefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Jdefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Pdefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UsePound <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Pounddefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>steps <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">;</font>

        <i><font color="#9A1900">//////////////////////////////////////////////////////////////////</font></i>

        <b><font color="#0000FF">return</font></b> <font color="#993399">0</font><font color="#990000">;</font>
      <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
      <font color="#FF0000">{</font>
        properties<font color="#990000">-&gt;</font>demotype <font color="#990000">=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>skipmonth <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
        numberofdemos <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

        <b><font color="#000000">props_defaults_options</font></b><font color="#990000">(</font>properties<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

        <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
      <font color="#FF0000">}</font>

    <font color="#FF0000">}</font>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>demotype <font color="#990000">!=</font> <font color="#993399">0</font> <font color="#990000">&amp;&amp;</font>
       option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportTime2 <font color="#990000">!=</font> <font color="#993399">1</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> CALENDAR<font color="#990000">;</font>
    <font color="#FF0000">}</font>

    <i><font color="#9A1900">/* skip the next following formats */</font></i>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>demotype <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">&amp;&amp;</font> 
       option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportTime2 <font color="#990000">!=</font> <font color="#993399">1</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      properties<font color="#990000">-&gt;</font>demotype <font color="#990000">=</font> <font color="#993399">2</font><font color="#990000">;</font>
    <font color="#FF0000">}</font>
    
  <font color="#FF0000">}</font>

  <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <b><font color="#000000">myusleep</font></b><font color="#990000">(</font><font color="#993399">600000</font><font color="#990000">)</font> <font color="#990000">==</font> <font color="#990000">-</font><font color="#993399">1</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    properties<font color="#990000">-&gt;</font>demotype <font color="#990000">=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
    properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
    properties<font color="#990000">-&gt;</font>skipmonth <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
    numberofdemos <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
    
    <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>

  <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
  <font color="#FF0000">{</font>
    <b><font color="#0000FF">return</font></b> <font color="#993399">0</font><font color="#990000">;</font>
  <font color="#FF0000">}</font>
<font color="#FF0000">}</font>

<font color="#009900">int</font> <b><font color="#000000">myusleep</font></b><font color="#990000">(</font><b><font color="#0000FF">const</font></b> <font color="#009900">int</font> useconds<font color="#990000">)</font>
<font color="#FF0000">{</font>
  <font color="#009900">char</font> c<font color="#990000">;</font>
  <font color="#009900">int</font> i<font color="#990000">;</font>

  <b><font color="#000000">nodelay</font></b><font color="#990000">(</font>stdscr<font color="#990000">,</font>TRUE<font color="#990000">);</font>

  <b><font color="#0000FF">for</font></b><font color="#990000">(</font> i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font> i <font color="#990000">&lt;</font> <font color="#993399">40</font><font color="#990000">;</font> i<font color="#990000">++</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#000000">noecho</font></b><font color="#990000">();</font>
    c <font color="#990000">=</font> <b><font color="#000000">getch</font></b><font color="#990000">();</font>
    <b><font color="#000000">echo</font></b><font color="#990000">();</font>

    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'q'</font> <font color="#990000">||</font> c <font color="#990000">==</font> <font color="#FF0000">'Q'</font> <font color="#990000">||</font> c <font color="#990000">==</font> <font color="#993399">27</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#000000">nodelay</font></b><font color="#990000">(</font>stdscr<font color="#990000">,</font>FALSE<font color="#990000">);</font>

      <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
    <font color="#FF0000">}</font>

    <b><font color="#000000">usleep</font></b><font color="#990000">(</font>useconds<font color="#990000">/</font><font color="#993399">40</font><font color="#990000">);</font>
  <font color="#FF0000">}</font>

  <b><font color="#000000">nodelay</font></b><font color="#990000">(</font>stdscr<font color="#990000">,</font>FALSE<font color="#990000">);</font>

  <b><font color="#0000FF">return</font></b> <font color="#993399">0</font><font color="#990000">;</font>
<font color="#FF0000">}</font>
</tt></pre>
