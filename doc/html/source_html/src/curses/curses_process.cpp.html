<!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><i><font color="#9A1900">/* optionmatrix:                                                            */</font></i>
<i><font color="#9A1900">/*                                                                          */</font></i>
<i><font color="#9A1900">/* Options &amp; Futures Matrix Modeler                                         */</font></i>
<i><font color="#9A1900">/* View and Control Theoretical Option Chains                               */</font></i>
<i><font color="#9A1900">/*                                                                          */</font></i>
<i><font color="#9A1900">/* File: curses_process.cpp of optionmatrix                                 */</font></i>
<i><font color="#9A1900">/*                                                                          */</font></i>
<i><font color="#9A1900">/* Copyright (c) Anthony Bradford. 2012.                                    */</font></i>
<i><font color="#9A1900">/* </font></i><u><font color="#0000FF">http://anthonybradford.com</font></u><i><font color="#9A1900">                                               */</font></i>
<i><font color="#9A1900">/* </font></i><u><font color="#0000FF">info@anthonybradford.com</font></u><i><font color="#9A1900">                                                 */</font></i>
<i><font color="#9A1900">/*                                                                          */</font></i>
<i><font color="#9A1900">/* optionmatrix may be freely redistributed.                                */</font></i>
<i><font color="#9A1900">/* See file COPYING included with this distribution for license information */</font></i>

<i><font color="#9A1900">/* </font></i>
<i><font color="#9A1900">   optionmatrix is free software; you can redistribute it and/or modify</font></i>
<i><font color="#9A1900">   it under the terms of the GNU General Public License as published by</font></i>
<i><font color="#9A1900">   the Free Software Foundation; either version 3 of the License, or</font></i>
<i><font color="#9A1900">   (at your option) any later version.</font></i>

<i><font color="#9A1900">   optionmatrix program is distributed in the hope that it will be useful,</font></i>
<i><font color="#9A1900">   but WITHOUT ANY WARRANTY; without even the implied warranty of</font></i>
<i><font color="#9A1900">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</font></i>
<i><font color="#9A1900">   GNU General Public License for more details.</font></i>

<i><font color="#9A1900">   You should have received a copy of the GNU General Public License</font></i>
<i><font color="#9A1900">   along with this program.  If not, see </font></i><u><font color="#0000FF">&lt;http://www.gnu.org/licenses/&gt;</font></u><i><font color="#9A1900">.</font></i>
<i><font color="#9A1900">*/</font></i>

<b><font color="#000080">#include</font></b> <font color="#FF0000">"../common/defs.h"</font>
<b><font color="#000080">#include</font></b> <font color="#FF0000">"../common/extern.h"</font>
<b><font color="#000080">#include</font></b> <font color="#FF0000">"curses_include.h"</font>

<font color="#009900">void</font> <b><font color="#000000">curses_process</font></b><font color="#990000">(</font><b><font color="#0000FF">struct</font></b> <font color="#008080">_properties</font> <font color="#990000">*</font>properties<font color="#990000">,</font><b><font color="#0000FF">struct</font></b> <font color="#008080">_properties</font> <font color="#990000">*</font>future_properties<font color="#990000">)</font>
<font color="#FF0000">{</font>
  <font color="#009900">int</font> c <font color="#990000">=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>

  <b><font color="#0000FF">for</font></b><font color="#990000">(;;)</font>
  <font color="#FF0000">{</font>
    <i><font color="#9A1900">// Q for quit or ESC key</font></i>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'q'</font> <font color="#990000">||</font> c <font color="#990000">==</font> <font color="#FF0000">'Q'</font> <font color="#990000">||</font> c <font color="#990000">==</font> <font color="#993399">27</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#0000FF">return</font></b><font color="#990000">;</font>
    <font color="#FF0000">}</font>

    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <b><font color="#000000">day_changed</font></b><font color="#990000">()</font> <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">==</font> CALENDAR <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#000000">expires</font></b><font color="#990000">(</font>LEG1<font color="#990000">,</font><font color="#993399">30</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">,</font>future_properties<font color="#990000">);</font>
    <font color="#FF0000">}</font>

    <b><font color="#000000">matrix</font></b><font color="#990000">(</font>properties<font color="#990000">,</font>future_properties<font color="#990000">);</font>

    <i><font color="#9A1900">/*********************************************************/</font></i>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> DEMO_FUTURES <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <b><font color="#000000">futures_demo</font></b><font color="#990000">(</font>properties<font color="#990000">,</font>future_properties<font color="#990000">,</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>

      <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
    <font color="#FF0000">}</font>
    <i><font color="#9A1900">/*********************************************************/</font></i>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> DEMO_OPTIONS <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <b><font color="#000000">options_demo</font></b><font color="#990000">(</font>properties<font color="#990000">,</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>

      <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
    <font color="#FF0000">}</font>

    <font color="#009900">int</font> timercounter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
                
    <b><font color="#0000FF">for</font></b><font color="#990000">(;;)</font>
    <font color="#FF0000">{</font>
      <b><font color="#000000">noecho</font></b><font color="#990000">();</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>realTimeBleeding <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">nodelay</font></b><font color="#990000">(</font>stdscr<font color="#990000">,</font>TRUE<font color="#990000">);</font>
      <font color="#FF0000">}</font>

      <font color="#009900">char</font> lastc <font color="#990000">=</font> c<font color="#990000">;</font>

      <b><font color="#000000">noecho</font></b><font color="#990000">();</font>
      c <font color="#990000">=</font> <b><font color="#000000">getch</font></b><font color="#990000">();</font>
      <b><font color="#000000">echo</font></b><font color="#990000">();</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>realTimeBleeding <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">nodelay</font></b><font color="#990000">(</font>stdscr<font color="#990000">,</font>FALSE<font color="#990000">);</font>
      <font color="#FF0000">}</font>

      <b><font color="#000000">echo</font></b><font color="#990000">();</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> ERR <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">usleep</font></b><font color="#990000">(</font><font color="#993399">50000</font><font color="#990000">);</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(++</font>timercounter <font color="#990000">==</font> <font color="#990000">(</font><font color="#993399">20</font> <font color="#990000">*</font> properties<font color="#990000">-&gt;</font>updatedelayseconds<font color="#990000">))</font>
        <font color="#FF0000">{</font>
          timercounter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

      <font color="#FF0000">}</font>
      
      <i><font color="#9A1900">// Q for quit or ESC key</font></i>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'q'</font> <font color="#990000">||</font> c <font color="#990000">==</font> <font color="#FF0000">'Q'</font> <font color="#990000">||</font> c <font color="#990000">==</font> <font color="#993399">27</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>

      <font color="#009900">int</font> newformat <font color="#990000">=</font> c <font color="#990000">-</font> <font color="#FF0000">'0'</font><font color="#990000">;</font>
      <font color="#009900">int</font> bChange <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">!=</font> FUTURES_CLASS <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">switch</font></b><font color="#990000">(</font>newformat<font color="#990000">)</font>
        <font color="#FF0000">{</font>
        <b><font color="#0000FF">case</font></b> <font color="#993399">1</font><font color="#990000">:</font>
          properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> DECIMAL_GREEKS<font color="#990000">;</font>
          properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> DECIMALS<font color="#990000">;</font>
          
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>perpetual <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <b><font color="#000000">decimal_date_message</font></b><font color="#990000">();</font>
          <font color="#FF0000">}</font>

          bChange <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

        <b><font color="#0000FF">case</font></b> <font color="#993399">2</font><font color="#990000">:</font>
          properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> DECIMAL_OPTIONS<font color="#990000">;</font>
          properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> DECIMALS<font color="#990000">;</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>perpetual <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <b><font color="#000000">decimal_date_message</font></b><font color="#990000">();</font>
          <font color="#FF0000">}</font>

          bChange <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

        <b><font color="#0000FF">case</font></b> <font color="#993399">3</font><font color="#990000">:</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportTime2 <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Not supported in this model"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> CALENDAR_OPTIONS1<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> CALENDAR<font color="#990000">;</font>
            
            <b><font color="#000000">calendar_date_message</font></b><font color="#990000">();</font>

            bChange <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>
          <font color="#FF0000">}</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

        <b><font color="#0000FF">case</font></b> <font color="#993399">4</font><font color="#990000">:</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportTime2 <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Not supported in this model"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> CALENDAR_OPTIONS2<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> CALENDAR<font color="#990000">;</font>

            <b><font color="#000000">calendar_date_message</font></b><font color="#990000">();</font>

            bChange <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>
          <font color="#FF0000">}</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

        <b><font color="#0000FF">case</font></b> <font color="#993399">5</font><font color="#990000">:</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportTime2 <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Not supported in this model"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> CALENDAR_OPTIONS3<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> CALENDAR<font color="#990000">;</font>

            <b><font color="#000000">calendar_date_message</font></b><font color="#990000">();</font>

            bChange <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>
          <font color="#FF0000">}</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

        <b><font color="#0000FF">case</font></b> <font color="#993399">6</font><font color="#990000">:</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportTime2 <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Not supported in this model"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> CALENDAR_OPTIONS4<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> CALENDAR<font color="#990000">;</font>

            <b><font color="#000000">calendar_date_message</font></b><font color="#990000">();</font>
                      
            bChange <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>
          <font color="#FF0000">}</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

        <b><font color="#0000FF">case</font></b> <font color="#993399">7</font><font color="#990000">:</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportTime2 <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Not supported in this model"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                        
          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> CALENDAR_OPTIONS5<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> CALENDAR<font color="#990000">;</font>

            <b><font color="#000000">calendar_date_message</font></b><font color="#990000">();</font>
                        
            bChange <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>
          <font color="#FF0000">}</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

        <b><font color="#0000FF">case</font></b> <font color="#993399">8</font><font color="#990000">:</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportTime2 <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Not supported in this model"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                        
          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> CALENDAR_CUSTOM<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> CALENDAR<font color="#990000">;</font>

            properties<font color="#990000">-&gt;</font>customstrike <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">;</font>
            bChange <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>

            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Use 'x', 'X' to adjust strikes"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
          <font color="#FF0000">}</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

        <b><font color="#0000FF">case</font></b> <font color="#993399">9</font><font color="#990000">:</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportTime2 <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Not supported in this model"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> CALENDAR_OPTIONS6<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> CALENDAR<font color="#990000">;</font>

            <b><font color="#000000">calendar_date_message</font></b><font color="#990000">();</font>

            bChange <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>
          <font color="#FF0000">}</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>
      <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> FUTURES_CLASS <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">switch</font></b><font color="#990000">(</font>newformat<font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">case</font></b> <font color="#993399">1</font><font color="#990000">:</font>
            properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> DECIMAL_FUTURE<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> DECIMALS<font color="#990000">;</font>

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">!=</font> FUTURES_CLASS <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              properties<font color="#990000">-&gt;</font>modeltype <font color="#990000">=</font> <b><font color="#000000">SetToFuture</font></b><font color="#990000">(</font>properties<font color="#990000">);</font>
            <font color="#FF0000">}</font>

            <b><font color="#000000">decimal_date_message</font></b><font color="#990000">();</font>

            bChange <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>
            <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

        <b><font color="#0000FF">case</font></b> <font color="#993399">2</font><font color="#990000">:</font>
          properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> CALENDAR_FUTURE<font color="#990000">;</font>
          properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> CALENDAR<font color="#990000">;</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">!=</font> FUTURES_CLASS <font color="#990000">)</font>
            properties<font color="#990000">-&gt;</font>modeltype <font color="#990000">=</font> <b><font color="#000000">SetToFuture</font></b><font color="#990000">(</font>properties<font color="#990000">);</font>

          <b><font color="#000000">calendar_date_message</font></b><font color="#990000">();</font>

          bChange <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

        <b><font color="#0000FF">case</font></b> <font color="#993399">3</font><font color="#990000">:</font>
        <b><font color="#0000FF">case</font></b> <font color="#993399">4</font><font color="#990000">:</font>
        <b><font color="#0000FF">case</font></b> <font color="#993399">5</font><font color="#990000">:</font>
        <b><font color="#0000FF">case</font></b> <font color="#993399">6</font><font color="#990000">:</font>
        <b><font color="#0000FF">case</font></b> <font color="#993399">7</font><font color="#990000">:</font>
        <b><font color="#0000FF">case</font></b> <font color="#993399">8</font><font color="#990000">:</font>
        <b><font color="#0000FF">case</font></b> <font color="#993399">9</font><font color="#990000">:</font>
        <b><font color="#0000FF">case</font></b> <font color="#993399">0</font><font color="#990000">:</font>

          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Key not supported for Futures models"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
          <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
          
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

        <font color="#FF0000">}</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>realTimeBleeding <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">&amp;&amp;</font> bChange <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>

      <i><font color="#9A1900">/* toogle through the options cycle */</font></i>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'o'</font> <font color="#990000">||</font> c <font color="#990000">==</font> <font color="#FF0000">'O'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> FUTURES_CLASS <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"No options cycle with futures"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">==</font> DECIMALS <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Options cycle only allowed in calendar expirations mode"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <i><font color="#9A1900">/* All Months 0, Jan cycle 1, Feb cycle 2, Mar cycle 3 */</font></i>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">++</font>properties<font color="#990000">-&gt;</font>optionscycle <font color="#990000">&gt;</font> <font color="#993399">4</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>optionscycle <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Options Cycle=%s"</font><font color="#990000">,</font> optionscycle<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>optionscycle<font color="#990000">]);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

        <b><font color="#000000">expires</font></b><font color="#990000">(</font>LEG1<font color="#990000">,</font><font color="#993399">30</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">,</font>properties<font color="#990000">);</font>

        <b><font color="#000000">time</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>starttime<font color="#990000">);</font>
        
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'-'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">!=</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <font color="#990000">--</font>properties<font color="#990000">-&gt;</font>mode<font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increment size smallest"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                        
        <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increment size medium"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
        <font color="#FF0000">}</font>
        <i><font color="#9A1900">/* don't end this with a break */</font></i>
      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'+'</font> <font color="#990000">||</font> c <font color="#990000">==</font> <font color="#FF0000">'='</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">!=</font> <font color="#993399">3</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
            <font color="#990000">++</font>properties<font color="#990000">-&gt;</font>mode<font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increment size medium"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                        
        <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increment size large"</font><font color="#990000">);</font> 
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
        <font color="#FF0000">}</font>
        <i><font color="#9A1900">/* don't end this with a break */</font></i>
      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'x'</font> <font color="#990000">||</font> c <font color="#990000">==</font> KEY_DOWN <font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportStrikes <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <i><font color="#9A1900">/* futures don't use strikes */</font></i>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> FUTURES_CLASS <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"No strikes for futures"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> DECIMAL_GREEKS <font color="#990000">||</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> CALENDAR_CUSTOM <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(</font>properties<font color="#990000">-&gt;</font>customstrike <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">01</font><font color="#990000">)</font> <font color="#990000">&gt;</font> <font color="#993399">0</font> <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              properties<font color="#990000">-&gt;</font>customstrike <font color="#990000">-=</font> <font color="#990000">.</font><font color="#993399">01</font><font color="#990000">;</font>
            <font color="#FF0000">}</font>
          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(</font>properties<font color="#990000">-&gt;</font>customstrike<font color="#990000">-.</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&gt;</font> <font color="#993399">0</font> <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              properties<font color="#990000">-&gt;</font>customstrike <font color="#990000">-=</font> <font color="#990000">.</font><font color="#993399">1</font><font color="#990000">;</font>
            <font color="#FF0000">}</font>
          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>   
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(</font>properties<font color="#990000">-&gt;</font>customstrike <font color="#990000">-</font> <font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&gt;</font> <font color="#993399">0</font> <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              properties<font color="#990000">-&gt;</font>customstrike <font color="#990000">-=</font> <font color="#993399">1</font><font color="#990000">;</font>
            <font color="#FF0000">}</font>
          <font color="#FF0000">}</font>

          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing strike"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>
                    
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1 <font color="#990000">==</font> <font color="#993399">5</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">!=(</font><font color="#993399">15</font><font color="#990000">-</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">))</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">((</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">+</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">-</font><font color="#993399">15</font><font color="#990000">)&gt;=</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">))</font>

          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">-</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>xcontrol<font color="#990000">;</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing strikes"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Can't decrease strikes"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

            <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
          <font color="#FF0000">}</font>
        <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1 <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">((</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">+</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">-</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>xcontrol<font color="#990000">)&gt;=</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>xcontrol<font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">-</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>xcontrol<font color="#990000">;</font>

            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing strikes"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Can't decrease strikes"</font><font color="#990000">);</font> 
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

            <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
          <font color="#FF0000">}</font>
        <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Can't decrease strikes"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>
                       
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'X'</font> <font color="#990000">||</font> c <font color="#990000">==</font> KEY_UP <font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportStrikes <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <i><font color="#9A1900">/* futures don't use strikes */</font></i>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> FUTURES_CLASS <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"No strikes for futures"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> DECIMAL_GREEKS <font color="#990000">||</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> CALENDAR_CUSTOM <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font>  properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
            properties<font color="#990000">-&gt;</font>customstrike <font color="#990000">+=</font> <font color="#990000">.</font><font color="#993399">01</font><font color="#990000">;</font>
          <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
            properties<font color="#990000">-&gt;</font>customstrike <font color="#990000">+=</font> <font color="#990000">.</font><font color="#993399">1</font><font color="#990000">;</font>
          <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
            properties<font color="#990000">-&gt;</font>customstrike <font color="#990000">+=</font> <font color="#993399">1</font><font color="#990000">;</font>

          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing strike"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                        
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>
                    
        properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>xcontrol<font color="#990000">;</font>
                    
        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing strikes"</font><font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
      <i><font color="#9A1900">/***********************************************************/</font></i>
                
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'d'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">!</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportDividend <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Dividends not supported in this model"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportDividend <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">||</font>
            option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportDividend <font color="#990000">==</font> <font color="#993399">4</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Mutliple dividend values at multiple times not supported in curses"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>
               
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>dividend <font color="#990000">+=</font> <font color="#990000">-.</font><font color="#993399">01</font><font color="#990000">;</font>
        <font color="#FF0000">}</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>dividend <font color="#990000">+=</font> <font color="#990000">-.</font><font color="#993399">001</font><font color="#990000">;</font>
        <font color="#FF0000">}</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>dividend <font color="#990000">+=</font> <font color="#990000">-.</font><font color="#993399">0001</font><font color="#990000">;</font>
        <font color="#FF0000">}</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing dividend %.*f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>dividend<font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'D'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">!</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportDividend <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Dividends not supported in this model"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportDividend <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">||</font>
            option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportDividend <font color="#990000">==</font> <font color="#993399">4</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Mutliple dividend values at multiple times not supported in curses"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>
                   
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>dividend <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>dividend <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">0001</font><font color="#990000">;</font>

        <font color="#FF0000">}</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>dividend <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>dividend <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">001</font><font color="#990000">;</font>
        <font color="#FF0000">}</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>dividend <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>dividend <font color="#990000">+.</font><font color="#993399">01</font><font color="#990000">;</font>
        <font color="#FF0000">}</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing dividend %.*f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>dividend<font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>                
                
      <i><font color="#9A1900">/***********************************************************/</font></i>
                
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'s'</font> <font color="#990000">&amp;&amp;</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportPrice <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">-</font> <font color="#993399">10</font><font color="#990000">)</font> <font color="#990000">&lt;=</font> <font color="#993399">0</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>mode <font color="#990000">=</font> <font color="#993399">2</font><font color="#990000">;</font>
                            
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increment size medium"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> <font color="#993399">10</font><font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">-</font> <font color="#993399">10</font><font color="#990000">;</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

            <i><font color="#9A1900">/* if its a future */</font></i>
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> FUTURES_CLASS <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing spot price %.3f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">);</font>
              <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
         
            <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing stock price %.3f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">);</font>
              <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
            <font color="#FF0000">}</font>

            <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
          <font color="#FF0000">}</font>

        <font color="#FF0000">}</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">-</font> <font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&lt;=</font> <font color="#993399">0</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>mode <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>

            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increment size smallest"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                            
          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">-</font> <font color="#993399">1</font><font color="#990000">;</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

            <i><font color="#9A1900">/* if its a future */</font></i>
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> FUTURES_CLASS <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing spot price %.3f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">);</font>
              <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

            <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing stock price %.3f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">);</font>
              <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
            <font color="#FF0000">}</font>

            <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
          <font color="#FF0000">}</font>
        <font color="#FF0000">}</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">125</font><font color="#990000">)</font> <font color="#990000">&lt;=</font> <font color="#993399">0</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

            <i><font color="#9A1900">/* if its a future */</font></i>
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> FUTURES_CLASS <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Can't decrease spot price"</font><font color="#990000">);</font>
              <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

            <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Can't decrease stock price"</font><font color="#990000">);</font>
              <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
            <font color="#FF0000">}</font>
            
          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">125</font><font color="#990000">;</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

            <i><font color="#9A1900">/* if its a future */</font></i>
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> FUTURES_CLASS <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing spot price %.3f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">);</font>
              <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

            <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing stock price %.3f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">);</font>
              <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
            <font color="#FF0000">}</font>

            <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
          <font color="#FF0000">}</font>
        <font color="#FF0000">}</font>
      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'S'</font> <font color="#990000">&amp;&amp;</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportPrice <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">125</font><font color="#990000">;</font>
        <font color="#FF0000">}</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">;</font>
          properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">-</font> <font color="#993399">1</font><font color="#990000">;</font>
        <font color="#FF0000">}</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">+</font> <font color="#993399">10</font><font color="#990000">;</font>
          properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">-</font> <font color="#993399">10</font><font color="#990000">;</font>
        <font color="#FF0000">}</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

        <i><font color="#9A1900">/* if its a future */</font></i>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> FUTURES_CLASS <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing spot price %.3f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

        <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
        <font color="#FF0000">{</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing stock price %.3f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>                
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'r'</font> <font color="#990000">&amp;&amp;</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportRate <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">0001</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">0010</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">0100</font><font color="#990000">;</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing interest rate %.4f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate<font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                    
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'R'</font> <font color="#990000">&amp;&amp;</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportRate <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">0001</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">0010</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">0100</font><font color="#990000">;</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing interest rate %.4f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate<font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'t'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>perpetual <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Time not supported for this model"</font><font color="#990000">);</font>
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">==</font> DECIMALS <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <i><font color="#9A1900">/* minus 1 day */</font></i>
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">-</font> <font color="#993399">0.002739726027397260273972602739726</font> <font color="#990000">&gt;</font> <font color="#993399">0</font> <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">-</font> <font color="#993399">0.002739726027397260273972602739726</font><font color="#990000">;</font>
            <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
            properties<font color="#990000">-&gt;</font>mode <font color="#990000">=</font> <font color="#993399">2</font><font color="#990000">;</font>
          <font color="#FF0000">}</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>   
            <i><font color="#9A1900">/* minus 1 hour */</font></i>
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">-</font> <font color="#993399">0.00011415525114155251141552511415525</font> <font color="#990000">&gt;</font> <font color="#993399">0</font> <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">-</font> <font color="#993399">0.00011415525114155251141552511415525</font><font color="#990000">;</font>
            <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
              properties<font color="#990000">-&gt;</font>mode <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>
          <font color="#FF0000">}</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <i><font color="#9A1900">/* one minute */</font></i>
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">-</font> <font color="#993399">0.0000019025875190258751902587519025875</font> <font color="#990000">&gt;</font> <font color="#993399">0</font> <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">-</font> <font color="#993399">0.0000019025875190258751902587519025875</font><font color="#990000">;</font>
            <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Can't decrease expiration time"</font><font color="#990000">);</font>
              <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                                
              <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
            <font color="#FF0000">}</font>
          <font color="#FF0000">}</font>

          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing expiration time"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
        <font color="#FF0000">}</font>
                        
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">==</font> CALENDAR <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>day_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>day_offset<font color="#990000">+((</font><font color="#009900">double</font><font color="#990000">)</font><font color="#993399">1</font><font color="#990000">/(</font><font color="#009900">double</font><font color="#990000">)</font><font color="#993399">365</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Day offset is %d days"</font><font color="#990000">,</font> <font color="#990000">--</font>properties<font color="#990000">-&gt;</font>day_offset_counter<font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
        <font color="#FF0000">}</font>
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'T'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>perpetual <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Time not supported for this model"</font><font color="#990000">);</font>
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">==</font> DECIMALS <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <i><font color="#9A1900">/* add 1 day */</font></i>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">+</font> <font color="#993399">0.002739726027397260273972602739726</font><font color="#990000">;</font>
          <font color="#FF0000">}</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <i><font color="#9A1900">/* add 1 hour */</font></i>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">+</font> <font color="#993399">0.00011415525114155251141552511415525</font><font color="#990000">;</font>
          <font color="#FF0000">}</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <i><font color="#9A1900">/* add 1 minute */</font></i>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">+</font> <font color="#993399">0.0000019025875190258751902587519025875</font><font color="#990000">;</font>
          <font color="#FF0000">}</font>
                        
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing expiration time"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
        <font color="#FF0000">}</font>
                    
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">==</font> CALENDAR <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>day_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>day_offset<font color="#990000">-((</font><font color="#009900">double</font><font color="#990000">)</font> <font color="#993399">1</font><font color="#990000">/</font> <font color="#990000">(</font><font color="#009900">double</font><font color="#990000">)</font> <font color="#993399">365</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Day offset is %d days"</font><font color="#990000">,</font> <font color="#990000">++</font>properties<font color="#990000">-&gt;</font>day_offset_counter<font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
        <font color="#FF0000">}</font>
        
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
      <i><font color="#9A1900">/********************************************************************************/</font></i>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'e'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>perpetual <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportTime2 <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Change to model that supports two dates"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <i><font color="#9A1900">/* minus 1 day */</font></i>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">-</font> <font color="#993399">0.002739726027397260273972602739726</font> <font color="#990000">&gt;</font> <font color="#993399">0</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">-</font> <font color="#993399">0.002739726027397260273972602739726</font><font color="#990000">;</font>
          <font color="#FF0000">}</font> <i><font color="#9A1900">/*else</font></i>
<i><font color="#9A1900">              properties-&gt;mode = 2;*/</font></i>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>   
          <i><font color="#9A1900">/* minus 1 hour */</font></i>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">-</font><font color="#993399">0.00011415525114155251141552511415525</font> <font color="#990000">&gt;</font> <font color="#993399">0</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">-</font> <font color="#993399">0.00011415525114155251141552511415525</font><font color="#990000">;</font>
          <font color="#FF0000">}</font> <i><font color="#9A1900">/*else</font></i>
<i><font color="#9A1900">              properties-&gt;mode = 1;*/</font></i>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <i><font color="#9A1900">/* one minute */</font></i>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">-</font> <font color="#993399">0.0000019025875190258751902587519025875</font> <font color="#990000">&gt;</font> <font color="#993399">0</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">-</font> <font color="#993399">0.0000019025875190258751902587519025875</font><font color="#990000">;</font>
            
          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Can't decrease %s date"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportTime2des<font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                                
            <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
          <font color="#FF0000">}</font>
        <font color="#FF0000">}</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing %s date"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportTime2des<font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'E'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>perpetual <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportTime2 <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Change to model that supports two dates"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <i><font color="#9A1900">/* add 1 day */</font></i>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">+</font> <font color="#993399">0.002739726027397260273972602739726</font><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <i><font color="#9A1900">/* add 1 hour */</font></i>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">+</font> <font color="#993399">0.00011415525114155251141552511415525</font><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <i><font color="#9A1900">/* add 1 minute */</font></i>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">+</font> <font color="#993399">0.0000019025875190258751902587519025875</font><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing %s date"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportTime2des<font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                    
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'v'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportVolatility <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility<font color="#990000">-.</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&gt;</font> <font color="#993399">0</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility <font color="#990000">-.</font><font color="#993399">1</font><font color="#990000">;</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing standard deviation %.3f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility<font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

            <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
            
          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>mode <font color="#990000">=</font> <font color="#993399">2</font><font color="#990000">;</font>
                            
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increment size medium"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
          <font color="#FF0000">}</font>
        <font color="#FF0000">}</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">01</font> <font color="#990000">)</font> <font color="#990000">&gt;</font> <font color="#993399">0</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">01</font><font color="#990000">;</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing %s %.3f"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>volatility<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility<font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

            <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>mode <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>
            
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increment size small"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
          <font color="#FF0000">}</font>
                            
        <font color="#FF0000">}</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <i><font color="#9A1900">/*if( (d-.001)&gt;0) does't seem to avoid zero */</font></i>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility <font color="#990000">&gt;</font> <font color="#993399">0.002</font> <font color="#990000">)</font>                            
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">001</font><font color="#990000">;</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing %s %.3f"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>volatility<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility<font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

            <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b> <font color="#FF0000">{</font>

            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Can't decrease %s %.3f"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>volatility<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility<font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

            <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
          <font color="#FF0000">}</font>
        <font color="#FF0000">}</font>
      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'V'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportVolatility <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
          <font color="#FF0000">}</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility <font color="#990000">+.</font><font color="#993399">001</font><font color="#990000">;</font>
          <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility <font color="#990000">+.</font><font color="#993399">01</font><font color="#990000">;</font>
          <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility <font color="#990000">+.</font><font color="#993399">1</font><font color="#990000">;</font>

          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing %s %.3f"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>volatility<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility<font color="#990000">);</font>

          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'y'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <i><font color="#9A1900">/* futures don't use variance */</font></i>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> FUTURES_CLASS <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCND <font color="#990000">!=</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>
                    
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(</font>properties<font color="#990000">-&gt;</font>distribution_variance <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">1</font> <font color="#990000">)</font> <font color="#990000">&gt;</font> <font color="#993399">0</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>distribution_variance <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>distribution_variance <font color="#990000">-.</font><font color="#993399">1</font><font color="#990000">;</font>

            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing distribution variance %.3f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>distribution_variance<font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

            <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>mode <font color="#990000">=</font> <font color="#993399">2</font><font color="#990000">;</font>
                            
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">5</font><font color="#990000">,</font><font color="#993399">50</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increment size medium"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
          <font color="#FF0000">}</font>
        <font color="#FF0000">}</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(</font>properties<font color="#990000">-&gt;</font>distribution_variance <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">01</font> <font color="#990000">)</font> <font color="#990000">&gt;</font> <font color="#993399">0</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>distribution_variance <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>distribution_variance <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">01</font><font color="#990000">;</font>
            
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing distribution variance %.3f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>distribution_variance<font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
            
            <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>mode <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>

            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">5</font><font color="#990000">,</font><font color="#993399">50</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increment size small"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
          <font color="#FF0000">}</font>
          
        <font color="#FF0000">}</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(</font> properties<font color="#990000">-&gt;</font>distribution_variance <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">001</font> <font color="#990000">)</font> <font color="#990000">&gt;</font> <font color="#993399">0</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>distribution_variance <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>distribution_variance <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">001</font><font color="#990000">;</font>

            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing distribution variance %.3f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>distribution_variance<font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

            <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b> <font color="#FF0000">{</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">5</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Can't decrease distribution variance"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>                      

            <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
          <font color="#FF0000">}</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'Y'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <i><font color="#9A1900">/* futures don't use variance */</font></i>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> FUTURES_CLASS <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCND <font color="#990000">!=</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>
                    
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>distribution_variance <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>distribution_variance <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">001</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>distribution_variance <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>distribution_variance <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">01</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>distribution_variance <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>distribution_variance <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">1</font><font color="#990000">;</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing distribution variance %.3f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>distribution_variance<font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'G'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <i><font color="#9A1900">/* futures don't use numerical integration */</font></i>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> FUTURES_CLASS <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <i><font color="#9A1900">/* if not integratable it must use steps */</font></i>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportSteps <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">++;</font>

          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing steps %.d"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>method <font color="#990000">!=</font> <font color="#993399">0</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font>integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>UpperLimit<font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>resolution <font color="#990000">&lt;</font> integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>UpperLimit <font color="#990000">)</font>
              <font color="#FF0000">{</font>

                integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>resolution <font color="#990000">+=</font> <font color="#993399">1</font><font color="#990000">;</font>
                integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>resolution <font color="#990000">+=</font> integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>allowOnlyEven<font color="#990000">;</font>
                
                <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing %s method resolution %.d"</font><font color="#990000">,</font>integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>des<font color="#990000">,</font>integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>resolution<font color="#990000">);</font>
                <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

              <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
              <font color="#FF0000">{</font>
                <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s method resolution maxed out: %.d"</font><font color="#990000">,</font>integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>des<font color="#990000">,</font>integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>resolution<font color="#990000">);</font>
                <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
              <font color="#FF0000">}</font>
          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>resolution <font color="#990000">+=</font> <font color="#993399">1</font><font color="#990000">;</font>
            integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>resolution <font color="#990000">+=</font> integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>allowOnlyEven<font color="#990000">;</font>

            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing %s method resolution %.d"</font><font color="#990000">,</font> integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>des<font color="#990000">,</font>integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>resolution<font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
          <font color="#FF0000">}</font>
        <font color="#FF0000">}</font>
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'g'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <i><font color="#9A1900">/* futures don't use numerical integration */</font></i>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> FUTURES_CLASS <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <i><font color="#9A1900">/* if not integratable it must use steps */</font></i>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportSteps <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps <font color="#990000">&gt;</font> <font color="#993399">1</font> <font color="#990000">)</font>
            option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">--;</font>

          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing steps %.d"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>
        <i><font color="#9A1900">///////////////////////////////////////////////////////////////////</font></i>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>method <font color="#990000">!=</font> <font color="#993399">0</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(</font>integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>resolution <font color="#990000">-</font> <font color="#993399">1</font> <font color="#990000">-</font> integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>allowOnlyEven<font color="#990000">)</font> <font color="#990000">&gt;</font> <font color="#993399">0</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>resolution <font color="#990000">-=</font> <font color="#993399">1</font><font color="#990000">;</font>
            integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>resolution <font color="#990000">-=</font> integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>allowOnlyEven<font color="#990000">;</font>

            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing %s method resolution %.d"</font><font color="#990000">,</font>integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>des<font color="#990000">,</font>integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>resolution<font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Can't decrease %s method resolution %.d"</font><font color="#990000">,</font>integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>des<font color="#990000">,</font>integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>resolution<font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

            <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>

          <font color="#FF0000">}</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'u'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <i><font color="#9A1900">/* futures don't use mean */</font></i>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> FUTURES_CLASS <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCND <font color="#990000">!=</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>
                    
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>distribution_mean <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>distribution_mean <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">001</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font><font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>distribution_mean <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>distribution_mean <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">01</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font><font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>distribution_mean <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>distribution_mean <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">1</font><font color="#990000">;</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing distribution mean %.3f"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>distribution_mean<font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'U'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <i><font color="#9A1900">/* futures don't use mean */</font></i>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> FUTURES_CLASS <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCND <font color="#990000">!=</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>
                    
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>distribution_mean <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>distribution_mean <font color="#990000">+.</font><font color="#993399">001</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>distribution_mean <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>distribution_mean <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">01</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>distribution_mean <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>distribution_mean <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">1</font><font color="#990000">;</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing distribution mean %.3f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>distribution_mean<font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                    
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'h'</font> <font color="#990000">||</font> c <font color="#990000">==</font> <font color="#FF0000">'H'</font> <font color="#990000">||</font> c <font color="#990000">==</font> <font color="#FF0000">'?'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">-</font><font color="#993399">2</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
                    
        <b><font color="#000000">simple_help</font></b><font color="#990000">(</font>properties<font color="#990000">);</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
        <b><font color="#000000">clear</font></b><font color="#990000">();</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'a'</font> <font color="#990000">||</font> c <font color="#990000">==</font> <font color="#FF0000">'A'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <font color="#009900">int</font> ret <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
                    
        ret <font color="#990000">=</font> <b><font color="#000000">props</font></b><font color="#990000">(</font>properties<font color="#990000">,</font>future_properties<font color="#990000">);</font>

        <i><font color="#9A1900">/* if the user changed a date properties, re-run expires() */</font></i>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> ret <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">expires</font></b><font color="#990000">(</font>LEG1<font color="#990000">,</font><font color="#993399">30</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">,</font>properties<font color="#990000">);</font>

          <b><font color="#000000">expires</font></b><font color="#990000">(</font>LEG1<font color="#990000">,</font><font color="#993399">30</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">,</font>future_properties<font color="#990000">);</font>
          
        <font color="#FF0000">}</font>
        <b><font color="#000000">clear</font></b><font color="#990000">();</font>
                    
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'C'</font> <font color="#990000">)</font> <i><font color="#9A1900">// capital 'C'</font></i>
      <font color="#FF0000">{</font>
        <i><font color="#9A1900">/* futures calendar properties-&gt;mode */</font></i>
        <b><font color="#000000">calendar</font></b><font color="#990000">(</font>future_properties<font color="#990000">);</font>
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'c'</font> <font color="#990000">)</font> <i><font color="#9A1900">// little 'c'</font></i>
      <font color="#FF0000">{</font>
        <i><font color="#9A1900">/* options calendar properties-&gt;mode */</font></i>
        <b><font color="#000000">calendar</font></b><font color="#990000">(</font>properties<font color="#990000">);</font>
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'W'</font> <font color="#990000">||</font> c <font color="#990000">==</font> KEY_RIGHT <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>perpetual <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Time not supported for this model"</font><font color="#990000">);</font>
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <i><font color="#9A1900">/* these formats don't use months, they are decimal dates */</font></i>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">==</font> DECIMALS <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Change to Calendar Mode to walk months forward"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">++;</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>optionscycle <font color="#990000">==</font> <font color="#993399">4</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Skip year forward %d"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
        <font color="#FF0000">}</font>
        <b><font color="#0000FF">else</font></b>
        <font color="#FF0000">{</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Skip month forward %d"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
        <font color="#FF0000">}</font>

        <i><font color="#9A1900">/* if calendar futures */</font></i>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> CALENDAR_FUTURE <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">expires</font></b><font color="#990000">(</font>LEG1<font color="#990000">,</font><font color="#993399">30</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">,</font>future_properties<font color="#990000">);</font>

        <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
        <font color="#FF0000">{</font>
          <b><font color="#000000">expires</font></b><font color="#990000">(</font>LEG1<font color="#990000">,</font><font color="#993399">30</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">,</font>properties<font color="#990000">);</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
                
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'w'</font> <font color="#990000">||</font> c <font color="#990000">==</font> KEY_LEFT <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>perpetual <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Time not supported for this model"</font><font color="#990000">);</font>
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <i><font color="#9A1900">/* these formats don't use months, they are decimal dates */</font></i>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">==</font> DECIMALS <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Change to Calendar Mode to walk months backward"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>skipmonth <font color="#990000">&gt;</font> <font color="#993399">0</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">--;</font>

          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>optionscycle <font color="#990000">==</font> <font color="#993399">4</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Skip year backward %d"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
          <font color="#FF0000">}</font>
          <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Skip month backward %d"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
          <font color="#FF0000">}</font>

          <i><font color="#9A1900">/* if calendar futures */</font></i>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> CALENDAR_FUTURE <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <b><font color="#000000">expires</font></b><font color="#990000">(</font>LEG1<font color="#990000">,</font><font color="#993399">30</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">,</font>future_properties<font color="#990000">);</font>

          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            <b><font color="#000000">expires</font></b><font color="#990000">(</font>LEG1<font color="#990000">,</font><font color="#993399">30</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">,</font>properties<font color="#990000">);</font>
          <font color="#FF0000">}</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

        <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Press capital 'W' for forward"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
        <font color="#FF0000">}</font>

      <font color="#FF0000">}</font>
      <i><font color="#9A1900">/* control-l to clear screen then redraw the screen */</font></i>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">''</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">clear</font></b><font color="#990000">();</font>
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
      <i><font color="#9A1900">/* control-r to call refresh() to force paint */</font></i>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">''</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
      <i><font color="#9A1900">/* space to refresh the time and redraw the screen */</font></i>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">' '</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
                
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'f'</font><font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&gt;=</font> <font color="#993399">0</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>precision<font color="#990000">--;</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing floating point precision %d"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>precision<font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                        
        <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Can't decrease floating point properties"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'F'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

        <i><font color="#9A1900">/* DBL_DIG is defined in float.h */</font></i>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>precision <font color="#990000">&gt;=</font> DBL_DIG <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Floating point precision maxed out: %d"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>precision<font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

        <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>precision<font color="#990000">++;</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing floating point precision %d"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>precision<font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'M'</font><font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">--</font>properties<font color="#990000">-&gt;</font>modeltype <font color="#990000">&lt;</font> <font color="#993399">0</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>modeltype <font color="#990000">=</font> <font color="#990000">(</font>sizeofoption_algorithms<font color="#990000">/(</font><font color="#009900">signed</font><font color="#990000">)</font><b><font color="#0000FF">sizeof</font></b><font color="#990000">(</font><b><font color="#0000FF">struct</font></b> <font color="#008080">option_algorithm</font><font color="#990000">)-</font><font color="#993399">1</font><font color="#990000">);</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportDividend <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>dividend <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>defaultDividend<font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <i><font color="#9A1900">// just some defaults so the model doesnt NaN out</font></i>
        <i><font color="#9A1900">// on its pricing...</font></i>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Zdefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Bdefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Jdefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Pdefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseQ <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Qdefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseR <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Rdefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseS <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Sdefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseT <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Tdefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UsePound <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Pounddefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>steps <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">;</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'m'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(++</font>properties<font color="#990000">-&gt;</font>modeltype <font color="#990000">&gt;=</font> <font color="#990000">(</font>sizeofoption_algorithms<font color="#990000">/(</font><font color="#009900">signed</font><font color="#990000">)</font><b><font color="#0000FF">sizeof</font></b><font color="#990000">(</font><b><font color="#0000FF">struct</font></b> <font color="#008080">option_algorithm</font><font color="#990000">)))</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>modeltype <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportDividend <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>dividend <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>defaultDividend<font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <i><font color="#9A1900">// just some defaults so the model doesnt NaN out</font></i>
        <i><font color="#9A1900">// on its pricing...</font></i>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Zdefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Bdefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Jdefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Pdefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseQ <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Qdefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseR <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Rdefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseS <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Sdefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseT <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Tdefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UsePound <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Pounddefault<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>steps <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">;</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>

      <i><font color="#9A1900">/* change numerical integration type */</font></i>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'i'</font> <font color="#990000">||</font> c <font color="#990000">==</font> <font color="#FF0000">'I'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <i><font color="#9A1900">/* some options algo don't use my integration */</font></i>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCND <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Not supported for this model"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">const</font></b> <font color="#009900">int</font> num_integration <font color="#990000">=</font> sizeofintegration_method<font color="#990000">/</font><b><font color="#0000FF">sizeof</font></b><font color="#990000">(</font><b><font color="#0000FF">struct</font></b> <font color="#008080">numerical_integration_method</font><font color="#990000">);</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">++</font>properties<font color="#990000">-&gt;</font>integration_type <font color="#990000">==</font> num_integration <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>integration_type <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <i><font color="#9A1900">/***************************************************************/</font></i>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>method <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s"</font><font color="#990000">,</font> integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>des<font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
          
          <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

        <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s resolution: %d"</font><font color="#990000">,</font> integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>des<font color="#990000">,</font>integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>resolution<font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
          <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
          
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>method <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <i><font color="#9A1900">/* polynomial approximation doesn't allow for</font></i>
<i><font color="#9A1900">             changes in mean or variance, you must use</font></i>
<i><font color="#9A1900">             romberg's or simpson's rule */</font></i>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>distribution_mean <font color="#990000">!=</font> <font color="#993399">0</font> <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>distribution_variance <font color="#990000">!=</font> <font color="#993399">1</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>distribution_mean <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>distribution_variance <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>

            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"distribution mean forced to: 0 &amp; "</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"distribution variance forced to 1"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

            <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

          <font color="#FF0000">}</font> 
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>distribution_mean <font color="#990000">!=</font> <font color="#993399">0</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>distribution_mean <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"distribution mean forced to: 0"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
            <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
          <font color="#FF0000">}</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>distribution_variance <font color="#990000">!=</font> <font color="#993399">1</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>distribution_variance <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>

            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"distribution variance forced to: 1"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
            <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
          <font color="#FF0000">}</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>distribution_type <font color="#990000">!=</font> NORMAL_DISTRIBUTION <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>distribution_type <font color="#990000">=</font> NORMAL_DISTRIBUTION<font color="#990000">;</font>

            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Normal Distribution"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
          <font color="#FF0000">}</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
                
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'k'</font> <font color="#990000">||</font> c <font color="#990000">==</font> <font color="#FF0000">'K'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <i><font color="#9A1900">/* futures have no strikes */</font></i>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> FUTURES_CLASS <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Futures have no strike increment adjustments"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(++</font>properties<font color="#990000">-&gt;</font>strikestoogle <font color="#990000">&gt;=</font> <font color="#990000">(</font>sizeofstrike_control<font color="#990000">/(</font><font color="#009900">signed</font><font color="#990000">)(</font><b><font color="#0000FF">sizeof</font></b><font color="#990000">(</font><b><font color="#0000FF">struct</font></b> <font color="#008080">_strike_control</font><font color="#990000">)))-</font><font color="#993399">1</font><font color="#990000">)</font>
         <font color="#FF0000">{</font>
           properties<font color="#990000">-&gt;</font>strikestoogle <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
         <font color="#FF0000">}</font>

        properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> <font color="#990000">(</font><font color="#009900">int</font><font color="#990000">)</font> properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">;</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'n'</font> <font color="#990000">||</font> c <font color="#990000">==</font> <font color="#FF0000">'N'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <i><font color="#9A1900">/* futures have no distribution */</font></i>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> FUTURES_CLASS <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">const</font></b> <font color="#009900">int</font> numberofdistributions <font color="#990000">=</font> sizeofdistribution_list<font color="#990000">/</font><b><font color="#0000FF">sizeof</font></b><font color="#990000">(</font>distribution_list<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]);</font>
        properties<font color="#990000">-&gt;</font>distribution_type<font color="#990000">++;</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>distribution_type <font color="#990000">!=</font> NORMAL_DISTRIBUTION <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>method <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <i><font color="#9A1900">//properties-&gt;integration_type=ROMBERGS_METHOD;</font></i>
            properties<font color="#990000">-&gt;</font>integration_type <font color="#990000">=</font> SIMPSONS_RULE<font color="#990000">;</font>
          <font color="#FF0000">}</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>distribution_type <font color="#990000">&gt;=</font> numberofdistributions <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>distribution_type <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
        <font color="#FF0000">}</font>
        
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'@'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>realTimeBleeding <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>realTimeBleeding <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Realtime updating disabled"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <i><font color="#9A1900">//properties-&gt;data.te  = 0;</font></i>
          <i><font color="#9A1900">//properties-&gt;data.te2 = 0;</font></i>

          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">-</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>te<font color="#990000">;</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">-</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>te2<font color="#990000">;</font>

        <font color="#FF0000">}</font>
        <b><font color="#0000FF">else</font></b> 
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>realTimeBleeding <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>

          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Realtime updating enabled"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#000000">time</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>starttime<font color="#990000">);</font>
          <b><font color="#000000">time</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>starttime2<font color="#990000">);</font>

        <font color="#FF0000">}</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'$'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>highlightInTheMoney <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
                    
        <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>highlightInTheMoney <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>
        <font color="#FF0000">}</font>

      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'</font><font color="#CC33CC">\t</font><font color="#FF0000">'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> TERMSTRUCTURE_CLASS <font color="#990000">)</font>
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

        properties<font color="#990000">-&gt;</font>customstrike <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">;</font>
        <font color="#990000">++</font>properties<font color="#990000">-&gt;</font>format<font color="#990000">;</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> FUTURES_FORMAT_END <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> DECIMAL_FUTURE<font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> OPTIONS_FORMAT_END <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> DECIMAL_GREEKS<font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">switch</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">)</font>
        <font color="#FF0000">{</font>
        <b><font color="#0000FF">case</font></b> DECIMAL_GREEKS<font color="#990000">:</font>

          properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> DECIMALS<font color="#990000">;</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>perpetual <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <b><font color="#000000">decimal_date_message</font></b><font color="#990000">();</font>
          <font color="#FF0000">}</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

        <b><font color="#0000FF">case</font></b> DECIMAL_OPTIONS<font color="#990000">:</font>

          properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> DECIMALS<font color="#990000">;</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>perpetual <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <b><font color="#000000">decimal_date_message</font></b><font color="#990000">();</font>
          <font color="#FF0000">}</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

        <b><font color="#0000FF">case</font></b> CALENDAR_OPTIONS1<font color="#990000">:</font>
        <b><font color="#0000FF">case</font></b> CALENDAR_OPTIONS2<font color="#990000">:</font>
        <b><font color="#0000FF">case</font></b> CALENDAR_OPTIONS3<font color="#990000">:</font>
        <b><font color="#0000FF">case</font></b> CALENDAR_OPTIONS4<font color="#990000">:</font>
        <b><font color="#0000FF">case</font></b> CALENDAR_OPTIONS5<font color="#990000">:</font>
        <b><font color="#0000FF">case</font></b> CALENDAR_OPTIONS6<font color="#990000">:</font>
        <b><font color="#0000FF">case</font></b> CALENDAR_CUSTOM<font color="#990000">:</font> 

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportTime2 <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>format <font color="#990000">=</font> DECIMAL_GREEKS<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> DECIMALS<font color="#990000">;</font>

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>perpetual <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#000000">decimal_date_message</font></b><font color="#990000">();</font>
            <font color="#FF0000">}</font>

          <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>decimalorcalendar<font color="#990000">=</font>CALENDAR<font color="#990000">;</font>
            <b><font color="#000000">calendar_date_message</font></b><font color="#990000">();</font>
          <font color="#FF0000">}</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

        <b><font color="#0000FF">case</font></b> DECIMAL_FUTURE<font color="#990000">:</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">!=</font> FUTURES_CLASS <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>modeltype <font color="#990000">=</font> <b><font color="#000000">SetToFuture</font></b><font color="#990000">(</font>properties<font color="#990000">);</font>
          <font color="#FF0000">}</font>

          properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> DECIMALS<font color="#990000">;</font>

          <b><font color="#000000">decimal_date_message</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

        <b><font color="#0000FF">case</font></b> CALENDAR_FUTURE<font color="#990000">:</font>

          properties<font color="#990000">-&gt;</font>optionscycle <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">!=</font> FUTURES_CLASS <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>modeltype <font color="#990000">=</font> <b><font color="#000000">SetToFuture</font></b><font color="#990000">(</font>properties<font color="#990000">);</font>
          <font color="#FF0000">}</font>

          properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">=</font> CALENDAR<font color="#990000">;</font>

          <b><font color="#000000">calendar_date_message</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

<b><font color="#008080">        default:</font></b>
                                    
          <b><font color="#000000">fprintf</font></b><font color="#990000">(</font>stderr<font color="#990000">,</font><font color="#FF0000">"Error3: No format implementation for case %d</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>format<font color="#990000">);</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

        <font color="#FF0000">}</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'z'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">!</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>iUseZ <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Not supported in this model"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>iUseZ <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">-</font> <font color="#993399">1</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">01</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">1</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">-</font> <font color="#993399">1</font><font color="#990000">;</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>bZallow0Negative <font color="#990000">!=</font> <font color="#993399">1</font> <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">&lt;=</font> <font color="#993399">0</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Can't decrease %s"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>UseZdes<font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing %s %.2f"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>UseZdes<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ<font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'Z'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">!</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>iUseZ <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Not supported in this model"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>iUseZ <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">01</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">1</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">;</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing %s %.2f"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>UseZdes<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ<font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'b'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">!</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>iUseB <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Not supported in this model"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>iUseB <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">-</font> <font color="#993399">1</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">-.</font><font color="#993399">01</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">-.</font><font color="#993399">1</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
        
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>bBallow0Negative <font color="#990000">!=</font> <font color="#993399">1</font> <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">&lt;=</font> <font color="#993399">0</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Can't decrease %s"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>UseBdes<font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing %s %.2f"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>UseBdes<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB<font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                  
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'B'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">!</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>iUseB <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Not supported in this model"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>iUseB <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font><font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">01</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font><font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">1</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font><font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">;</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing %s %.2f"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>UseBdes<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB<font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'j'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">!</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>iUseJ <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Not supported in this model"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>iUseJ <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">-</font> <font color="#993399">1</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">01</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">1</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">-</font> <font color="#993399">1</font><font color="#990000">;</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>bJallow0Negative <font color="#990000">!=</font> <font color="#993399">1</font> <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">&lt;=</font> <font color="#993399">0</font><font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Can't decrease %s"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>UseJdes<font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing %s %.2f"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>UseJdes<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ<font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'J'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">!</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>iUseJ <font color="#990000">)</font>
        <font color="#FF0000">{</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Not supported in this model"</font><font color="#990000">);</font>
            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

            <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>iUseJ <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">01</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">1</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">;</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing %s %.2f"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>UseJdes<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ<font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'p'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">!</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>iUseP <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Not supported in this model"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>iUseP <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">-</font> <font color="#993399">1</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">01</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">-</font> <font color="#990000">.</font><font color="#993399">1</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">-</font> <font color="#993399">1</font><font color="#990000">;</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>bPallow0Negative <font color="#990000">!=</font> <font color="#993399">1</font> <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">&lt;=</font> <font color="#993399">0</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Can't decrease %s"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>UsePdes<font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Decreasing %s %.2f"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>UsePdes<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP<font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'P'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">!</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>iUseP <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Not supported in this model"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>iUseP <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">01</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">+</font> <font color="#990000">.</font><font color="#993399">1</font><font color="#990000">;</font>
        <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>mode <font color="#990000">==</font> <font color="#993399">3</font> <font color="#990000">)</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">;</font>
         
        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Increasing %s %.2f"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>UsePdes<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP<font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

      <font color="#FF0000">}</font>
      <i><font color="#9A1900">/******************************************************/</font></i>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'#'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">!</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>bUsePound <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Not supported in this model"</font><font color="#990000">);</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
          <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UsePound <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UsePound <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">;</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>bUseStateNames <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s = %d"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>UsePounddes<font color="#990000">,(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UsePound <font color="#990000">&gt;</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Poundmax <font color="#990000">?</font> <font color="#993399">1</font> <font color="#990000">:</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UsePound<font color="#990000">));</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

        <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
        <font color="#FF0000">{</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s = %s"</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>UsePounddes<font color="#990000">,&amp;(</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>StateNames<font color="#990000">[(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UsePound<font color="#990000">-</font><font color="#993399">1</font> <font color="#990000">&gt;=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Poundmax <font color="#990000">?</font> <font color="#993399">0</font> <font color="#990000">:</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UsePound<font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)]));</font>
          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
        <font color="#FF0000">}</font>

        <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
        <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

      <font color="#FF0000">}</font>
      <i><font color="#9A1900">/******************************************************/</font></i>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'!'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <b><font color="#000000">select_model</font></b><font color="#990000">(</font>properties<font color="#990000">)</font> <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <i><font color="#9A1900">// user changed model in select_model() lets setup the defaults...</font></i>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Zdefault<font color="#990000">;</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Bdefault<font color="#990000">;</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Jdefault<font color="#990000">;</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Pdefault<font color="#990000">;</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UsePound <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>Pounddefault<font color="#990000">;</font>
          properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>steps <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">;</font>
                    
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportDividend <font color="#990000">==</font> <font color="#993399">2</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>dividend <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>defaultDividend<font color="#990000">;</font>
          <font color="#FF0000">}</font>

        <font color="#FF0000">}</font>
        <b><font color="#000000">clear</font></b><font color="#990000">();</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> c <font color="#990000">==</font> <font color="#FF0000">'l'</font> <font color="#990000">||</font> c <font color="#990000">==</font> <font color="#FF0000">'L'</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> lastc <font color="#990000">==</font> <font color="#FF0000">'l'</font> <font color="#990000">||</font> lastc <font color="#990000">==</font> <font color="#FF0000">'L'</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          lastc <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
          c <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        <b><font color="#000000">clear</font></b><font color="#990000">();</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">0</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
                    
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"</font><font color="#CC33CC">\n\n\n\n\n</font><font color="#FF0000">%s</font><font color="#CC33CC">\n\n\n\n\n\n\n\n\n</font><font color="#FF0000">"</font><font color="#990000">,</font>license<font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"</font><font color="#CC33CC">\t\t\t</font><font color="#FF0000">"</font><font color="#990000">);</font>
        <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"&lt;&lt;&lt; Press any key to return &gt;&gt;&gt;"</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
        <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>

        <b><font color="#000000">noecho</font></b><font color="#990000">();</font>
        <b><font color="#000000">getch</font></b><font color="#990000">();</font>
        <b><font color="#000000">echo</font></b><font color="#990000">();</font>

        <b><font color="#000000">clear</font></b><font color="#990000">();</font>
        <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
      <font color="#FF0000">}</font>
    <font color="#FF0000">}</font> <i><font color="#9A1900">/* for(;;) */</font></i>
  <font color="#FF0000">}</font> <i><font color="#9A1900">/* for(;;)*/</font></i>
<font color="#FF0000">}</font>
</tt></pre>
