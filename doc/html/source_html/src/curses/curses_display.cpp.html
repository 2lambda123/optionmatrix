<!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><i><font color="#9A1900">/* optionmatrix:                                                            */</font></i>
<i><font color="#9A1900">/*                                                                          */</font></i>
<i><font color="#9A1900">/* Options &amp; Futures Matrix Modeler                                         */</font></i>
<i><font color="#9A1900">/* View and Control Theoretical Option Chains                               */</font></i>
<i><font color="#9A1900">/*                                                                          */</font></i>
<i><font color="#9A1900">/* File: curses_display.cpp of optionmatrix                                 */</font></i>
<i><font color="#9A1900">/*                                                                          */</font></i>
<i><font color="#9A1900">/* Copyright (c) Anthony Bradford. 2012.                                    */</font></i>
<i><font color="#9A1900">/* </font></i><u><font color="#0000FF">http://anthonybradford.com</font></u><i><font color="#9A1900">                                               */</font></i>
<i><font color="#9A1900">/* </font></i><u><font color="#0000FF">info@anthonybradford.com</font></u><i><font color="#9A1900">                                                 */</font></i>
<i><font color="#9A1900">/*                                                                          */</font></i>
<i><font color="#9A1900">/* optionmatrix may be freely redistributed.                                */</font></i>
<i><font color="#9A1900">/* See file COPYING included with this distribution for license information */</font></i>

<i><font color="#9A1900">/* </font></i>
<i><font color="#9A1900">   optionmatrix is free software; you can redistribute it and/or modify</font></i>
<i><font color="#9A1900">   it under the terms of the GNU General Public License as published by</font></i>
<i><font color="#9A1900">   the Free Software Foundation; either version 3 of the License, or</font></i>
<i><font color="#9A1900">   (at your option) any later version.</font></i>

<i><font color="#9A1900">   optionmatrix program is distributed in the hope that it will be useful,</font></i>
<i><font color="#9A1900">   but WITHOUT ANY WARRANTY; without even the implied warranty of</font></i>
<i><font color="#9A1900">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</font></i>
<i><font color="#9A1900">   GNU General Public License for more details.</font></i>

<i><font color="#9A1900">   You should have received a copy of the GNU General Public License</font></i>
<i><font color="#9A1900">   along with this program.  If not, see </font></i><u><font color="#0000FF">&lt;http://www.gnu.org/licenses/&gt;</font></u><i><font color="#9A1900">.</font></i>
<i><font color="#9A1900">*/</font></i>

<b><font color="#000080">#include</font></b> <font color="#FF0000">"../common/defs.h"</font>
<b><font color="#000080">#include</font></b> <font color="#FF0000">"../common/extern.h"</font>
<b><font color="#000080">#include</font></b> <font color="#FF0000">"../common/prototypes.h"</font>
<b><font color="#000080">#include</font></b> <font color="#FF0000">"curses_include.h"</font>

<font color="#009900">void</font> <b><font color="#000000">matrix</font></b><font color="#990000">(</font><b><font color="#0000FF">struct</font></b> <font color="#008080">_properties</font> <font color="#990000">*</font>properties<font color="#990000">,</font> <b><font color="#0000FF">struct</font></b> <font color="#008080">_properties</font> <font color="#990000">*</font>future_properties<font color="#990000">)</font>
<font color="#FF0000">{</font>
    <b><font color="#0000FF">static</font></b> <font color="#009900">int</font> messageClear<font color="#990000">;</font>

    <font color="#009900">int</font> row<font color="#990000">;</font>
    <b><font color="#0000FF">for</font></b><font color="#990000">(</font> row <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font> row <font color="#990000">&lt;=</font> <font color="#993399">3</font><font color="#990000">;</font> row<font color="#990000">++</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>row<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
    <font color="#FF0000">}</font>

    <b><font color="#000000">one_time_banner_message</font></b><font color="#990000">();</font>

    <font color="#009900">char</font> statusMessage<font color="#990000">[</font><font color="#993399">80</font> <font color="#990000">*</font> <font color="#993399">3</font><font color="#990000">]</font> <font color="#990000">=</font> <font color="#FF0000">{</font> <font color="#993399">0</font> <font color="#FF0000">}</font><font color="#990000">;</font>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <b><font color="#000000">sanity_check</font></b><font color="#990000">(</font>properties<font color="#990000">,</font> <font color="#990000">&amp;</font>statusMessage<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">])</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s"</font><font color="#990000">,</font>statusMessage<font color="#990000">);</font>
      <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      messageClear <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>
    <font color="#FF0000">}</font>

    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(</font>messageClear<font color="#990000">++</font> <font color="#990000">%</font> <font color="#993399">20</font><font color="#990000">)</font> <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">4</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
      <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
    <font color="#FF0000">}</font>

    <b><font color="#000000">parameter_display</font></b><font color="#990000">(</font>properties<font color="#990000">,</font>future_properties<font color="#990000">);</font>

    <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

    <i><font color="#9A1900">/**********************************************************************/</font></i>
    
    <i><font color="#9A1900">/* curses specific stuff */</font></i>
    <font color="#009900">int</font> height<font color="#990000">,</font>width<font color="#990000">,</font>cellrows<font color="#990000">=</font><font color="#993399">14</font><font color="#990000">,</font>endingbarrier<font color="#990000">=</font><font color="#993399">22</font><font color="#990000">,</font>ibdacross<font color="#990000">=</font><font color="#993399">8</font><font color="#990000">;</font>

    <i><font color="#9A1900">/* get screen size */</font></i>
    <b><font color="#000000">getmaxyx</font></b><font color="#990000">(</font>stdscr<font color="#990000">,</font> height<font color="#990000">,</font> width<font color="#990000">);</font>
          
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> height <font color="#990000">&gt;</font> <font color="#993399">24</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      cellrows <font color="#990000">=</font> height<font color="#990000">-</font><font color="#993399">10</font><font color="#990000">;</font>
      endingbarrier <font color="#990000">=</font> height<font color="#990000">-</font><font color="#993399">3</font><font color="#990000">;</font>
    <font color="#FF0000">}</font>

    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> BOND_CLASS <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <i><font color="#9A1900">/* clear the screen where the matrix other properties-&gt;formats leave</font></i>
<i><font color="#9A1900">         stuff behind */</font></i>
      <font color="#009900">int</font> row<font color="#990000">;</font>
      <b><font color="#0000FF">for</font></b><font color="#990000">(</font> row <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">;</font> row <font color="#990000">&lt;=</font> endingbarrier<font color="#990000">;</font> <font color="#990000">++</font>row <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>row<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>  <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <font color="#FF0000">}</font>

      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Bonds not supported in curses version of this program.</font><font color="#CC33CC">\n</font><font color="#FF0000">Please use GUI version of this program.</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>

      <b><font color="#0000FF">return</font></b><font color="#990000">;</font>
    <font color="#FF0000">}</font>

<b><font color="#000080">#ifdef</font></b> FINRECIPES

    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> TERMSTRUCTURE_CLASS <font color="#990000">)</font>
    <font color="#FF0000">{</font>

      <i><font color="#9A1900">/* clear the screen where the matrix other properties-&gt;formats leave</font></i>
<i><font color="#9A1900">         stuff behind */</font></i>
      <font color="#009900">int</font> row<font color="#990000">;</font>
      <b><font color="#0000FF">for</font></b><font color="#990000">(</font> row <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">;</font> row <font color="#990000">&lt;=</font> endingbarrier<font color="#990000">;</font> <font color="#990000">++</font>row <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>row<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>  <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <font color="#FF0000">}</font>

      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

      <font color="#009900">double</font> decimalTime  <font color="#990000">=</font> <font color="#990000">(</font><font color="#009900">double</font><font color="#990000">)</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">-</font> <font color="#990000">(</font><font color="#009900">double</font><font color="#990000">)</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>te<font color="#990000">;</font>
      <font color="#009900">double</font> decimalTime2 <font color="#990000">=</font> <font color="#990000">(</font><font color="#009900">double</font><font color="#990000">)</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">-</font> <font color="#990000">(</font><font color="#009900">double</font><font color="#990000">)</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>te2<font color="#990000">;</font>

      properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>term <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>modeltype <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">;</font>

      <b><font color="#0000FF">struct</font></b> <font color="#008080">_data</font> termstructuredata<font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>term_model <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>modeltype<font color="#990000">;</font>
      termstructuredata <font color="#990000">=</font> <b><font color="#000000">termstructure</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>

      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"                    Time</font><font color="#CC33CC">\t</font><font color="#FF0000">Time</font><font color="#CC33CC">\t\t\t</font><font color="#FF0000">Value</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"                    ----</font><font color="#CC33CC">\t</font><font color="#FF0000">----</font><font color="#CC33CC">\t\t\t</font><font color="#FF0000">-----</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>

      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Discount Factor T1: %.*f</font><font color="#CC33CC">\t</font><font color="#FF0000">%s</font><font color="#CC33CC">\t</font><font color="#FF0000">%.*f</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>decimalTime2<font color="#990000">,</font> <b><font color="#000000">decimal_date_to_real_date</font></b><font color="#990000">(</font>decimalTime2<font color="#990000">),</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>discount_t2<font color="#990000">);</font>

      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Discount Factor T2: %.*f</font><font color="#CC33CC">\t</font><font color="#FF0000">%s</font><font color="#CC33CC">\t</font><font color="#FF0000">%.*f</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>decimalTime<font color="#990000">,</font><b><font color="#000000">decimal_date_to_real_date</font></b><font color="#990000">(</font>decimalTime<font color="#990000">),</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>discount_t1<font color="#990000">);</font>

      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Spot Rate T1      : %.*f</font><font color="#CC33CC">\t</font><font color="#FF0000">%s</font><font color="#CC33CC">\t</font><font color="#FF0000">%.*f</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>decimalTime2<font color="#990000">,</font><b><font color="#000000">decimal_date_to_real_date</font></b><font color="#990000">(</font>decimalTime2<font color="#990000">),</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>spot_t2<font color="#990000">);</font>

      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Spot Rate T2      : %.*f</font><font color="#CC33CC">\t</font><font color="#FF0000">%s</font><font color="#CC33CC">\t</font><font color="#FF0000">%.*f</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>decimalTime<font color="#990000">,</font> <b><font color="#000000">decimal_date_to_real_date</font></b><font color="#990000">(</font>decimalTime<font color="#990000">),</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>spot_t1<font color="#990000">);</font>

      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Forward T1 - T2   : %.*f</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font> properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>forward<font color="#990000">);</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>term <font color="#990000">)</font>
        <b><font color="#0000FF">delete</font></b> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>term<font color="#990000">;</font>

      <i><font color="#9A1900">/* ending barrier for term structures */</font></i>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>endingbarrier<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"h-help or +-AEFLMRT@ for effects q-quit"</font><font color="#990000">);</font>
      <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

      <b><font color="#0000FF">return</font></b><font color="#990000">;</font>
    <font color="#FF0000">}</font>

<b><font color="#000080">#endif</font></b>

    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> DECIMAL_GREEKS <font color="#990000">||</font> properties<font color="#990000">-&gt;</font>demotype <font color="#990000">==</font> DECIMAL_GREEKS <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>isnan <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

      <i><font color="#9A1900">/* clear the screen where the matrix other properties-&gt;formats leave</font></i>
<i><font color="#9A1900">         stuff behind */</font></i>
      <font color="#009900">int</font> row<font color="#990000">;</font>
      <b><font color="#0000FF">for</font></b><font color="#990000">(</font> row <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">;</font> row <font color="#990000">&lt;=</font> endingbarrier<font color="#990000">;</font> <font color="#990000">++</font>row <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>row<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>  <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <font color="#FF0000">}</font>

      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportPrice <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Stock  = %.*f</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">);</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportStrikes <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s = %.*f</font><font color="#CC33CC">\n\n</font><font color="#FF0000">"</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>strike<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>customstrike<font color="#990000">);</font>
      <font color="#FF0000">}</font>
                       
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportRate <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Int. rate  = %.2f%%</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate<font color="#990000">*</font><font color="#993399">100</font><font color="#990000">);</font>
      <font color="#FF0000">}</font>
                
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>perpetual <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Expiration =  %.*f, %.*f days, %s</font><font color="#CC33CC">\n\n</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]-</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>te<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,(</font><font color="#993399">365</font><font color="#990000">*(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]-</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>te<font color="#990000">)),</font><b><font color="#000000">decimal_date_to_real_date</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]-</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>te<font color="#990000">));</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportStrikes <font color="#990000">)</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Highlighted prices are in/at the money</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>
      <b><font color="#0000FF">else</font></b>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>

      properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>modeltype <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>strike <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>customstrike<font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>steps <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">;</font>

      <b><font color="#0000FF">struct</font></b> <font color="#008080">_data</font> optiondata<font color="#990000">;</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCalls <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        optiondata <font color="#990000">=</font> <b><font color="#000000">option_call</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>

        <i><font color="#9A1900">//printw("Call    = ");</font></i>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s    = "</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>call<font color="#990000">);</font>
      
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>customstrike<font color="#990000">&lt;=</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney<font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
        <font color="#FF0000">}</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCalls <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>call<font color="#990000">);</font>

        <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
        <font color="#FF0000">{</font>
          <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">" "</font><font color="#990000">);</font>
        <font color="#FF0000">}</font>
        <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>

        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"</font><font color="#CC33CC">\t</font><font color="#FF0000">"</font><font color="#990000">);</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportPuts <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        optiondata <font color="#990000">=</font> <b><font color="#000000">option_put</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>

        <i><font color="#9A1900">//printw("Put     = ");</font></i>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s    = "</font><font color="#990000">,</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>put<font color="#990000">);</font>
      
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>customstrike<font color="#990000">&gt;=</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
        <font color="#FF0000">}</font>

        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>put<font color="#990000">);</font>
        <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
      <font color="#FF0000">}</font>

      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>

      <i><font color="#9A1900">/* print the tickers */</font></i>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportStrikes <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCalls <font color="#990000">)</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"CTicker = %s%c</font><font color="#CC33CC">\t\t</font><font color="#FF0000">"</font><font color="#990000">,</font>option_calls<font color="#990000">[</font><b><font color="#000000">decimal_date_to_int_month</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]-</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>te<font color="#990000">)],(</font><font color="#009900">char</font><font color="#990000">)</font> <b><font color="#000000">strike_price_codes</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>customstrike<font color="#990000">));</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportPuts <font color="#990000">)</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"PTicker = %s%c"</font><font color="#990000">,</font>option_puts<font color="#990000">[</font><b><font color="#000000">decimal_date_to_int_month</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]-</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>te<font color="#990000">)],(</font><font color="#009900">char</font><font color="#990000">)</font> <b><font color="#000000">strike_price_codes</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>customstrike<font color="#990000">));</font>
      <font color="#FF0000">}</font>

      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"</font><font color="#CC33CC">\n\n</font><font color="#FF0000">"</font><font color="#990000">);</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>produceCallDelta <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        optiondata <font color="#990000">=</font> <b><font color="#000000">option_call_delta</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"C Delta = %.*f</font><font color="#CC33CC">\t</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>calldelta<font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
      <font color="#FF0000">{</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"C Delta not avail</font><font color="#CC33CC">\t</font><font color="#FF0000">"</font><font color="#990000">);</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>producePutDelta <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        optiondata <font color="#990000">=</font> <b><font color="#000000">option_put_delta</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"P Delta = %.*f</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>putdelta<font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
      <font color="#FF0000">{</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"P Delta not avail</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>produceGamma <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        optiondata <font color="#990000">=</font> <b><font color="#000000">option_gamma</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Gamma   = %.*f</font><font color="#CC33CC">\t</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>gamma<font color="#990000">);</font>

      <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
      <font color="#FF0000">{</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Gamma not avail  </font><font color="#CC33CC">\t</font><font color="#FF0000">"</font><font color="#990000">);</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>produceVega <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        optiondata <font color="#990000">=</font> <b><font color="#000000">option_vega</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Vega    = %.*f</font><font color="#CC33CC">\n\n</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>vega<font color="#990000">);</font>

      <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
      <font color="#FF0000">{</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Vega not avail</font><font color="#CC33CC">\n\n</font><font color="#FF0000">"</font><font color="#990000">);</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>produceCallTheta <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        optiondata <font color="#990000">=</font> <b><font color="#000000">option_call_theta</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"C Theta  = %.*f</font><font color="#CC33CC">\t</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>calltheta<font color="#990000">);</font>

      <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
      <font color="#FF0000">{</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"C Theta not avail</font><font color="#CC33CC">\t</font><font color="#FF0000">"</font><font color="#990000">);</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>producePutTheta <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        optiondata <font color="#990000">=</font> <b><font color="#000000">option_put_theta</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"P Theta  = %.*f</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>puttheta<font color="#990000">);</font>

      <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
      <font color="#FF0000">{</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"P Theta not avail</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>produceCallRho <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        optiondata <font color="#990000">=</font> <b><font color="#000000">option_call_rho</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"C Rho    = %.*f</font><font color="#CC33CC">\t</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>callrho<font color="#990000">);</font>

      <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
      <font color="#FF0000">{</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"C Rho not avail  </font><font color="#CC33CC">\t</font><font color="#FF0000">"</font><font color="#990000">);</font>
      <font color="#FF0000">}</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>producePutRho <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        optiondata <font color="#990000">=</font> <b><font color="#000000">option_put_rho</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"P Rho    = %.*f</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>putrho<font color="#990000">);</font>

      <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
      <font color="#FF0000">{</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"P Rho not avail"</font><font color="#990000">);</font>
      <font color="#FF0000">}</font>
    <font color="#FF0000">}</font>
    <i><font color="#9A1900">/*********************************************************/</font></i>

    <i><font color="#9A1900">/* Tester */</font></i>
    <i><font color="#9A1900">/*if( properties-&gt;format == DECIMAL_OPTIONS )</font></i>
<i><font color="#9A1900">    {</font></i>
<i><font color="#9A1900">      return;</font></i>
<i><font color="#9A1900">    }*/</font></i>

    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> DECIMAL_OPTIONS <font color="#990000">||</font> properties<font color="#990000">-&gt;</font>demotype <font color="#990000">==</font> DECIMAL_OPTIONS <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>isnan <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"stock  %-6s %-*s %s  %-*s  %s%-*s     %-*s   %-*s"</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>strike<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>call<font color="#990000">,(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">&lt;</font><font color="#993399">3</font><font color="#990000">)?</font><font color="#FF0000">""</font><font color="#990000">:</font><font color="#FF0000">"    "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>put<font color="#990000">,(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">==</font><font color="#993399">0</font><font color="#990000">)?</font><font color="#FF0000">""</font><font color="#990000">:</font><font color="#FF0000">"    "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"c delta"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"p delta"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"tickers"</font><font color="#990000">);</font>
      <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"-----  ------ %-*s %s  %-*s  %s%-*s     %-*s   %-*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"----"</font><font color="#990000">,(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">&lt;</font><font color="#993399">3</font><font color="#990000">)?</font><font color="#FF0000">""</font><font color="#990000">:</font><font color="#FF0000">"    "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"---"</font><font color="#990000">,(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">==</font><font color="#993399">0</font><font color="#990000">)?</font><font color="#FF0000">""</font><font color="#990000">:</font><font color="#FF0000">"    "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"-------"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"-------"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"-------"</font><font color="#990000">);</font>
      <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

      <i><font color="#9A1900">/* clear the screen where the matrix other properties-&gt;formats leave</font></i>
<i><font color="#9A1900">         stuff behind */</font></i>
      <font color="#009900">int</font> row<font color="#990000">;</font>
      <b><font color="#0000FF">for</font></b><font color="#990000">(</font> row <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">;</font> row <font color="#990000">&lt;=</font> endingbarrier<font color="#990000">;</font> <font color="#990000">++</font>row <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>row<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>  <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <font color="#FF0000">}</font>
                
      <font color="#009900">int</font> counter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

      <font color="#009900">double</font> epsilon <font color="#990000">=</font> <font color="#990000">(</font><font color="#009900">double</font><font color="#990000">)</font> <font color="#993399">1</font> <font color="#990000">/</font> <b><font color="#000000">pow</font></b><font color="#990000">(</font><font color="#993399">10.0</font><font color="#990000">,(</font><font color="#009900">double</font><font color="#990000">)</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>precision<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">);</font>

      <font color="#009900">double</font> i<font color="#990000">;</font>

      <b><font color="#0000FF">for</font></b><font color="#990000">(</font>i<font color="#990000">=(</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">+(</font><font color="#009900">int</font><font color="#990000">)</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">-</font><font color="#993399">15</font><font color="#990000">/(</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>precision<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">));</font>i<font color="#990000">&lt;(</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">+(</font><font color="#009900">int</font><font color="#990000">)</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">+</font><font color="#993399">140</font><font color="#990000">);</font>i<font color="#990000">+=</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>incrementor<font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(((</font><font color="#009900">int</font><font color="#990000">)</font>i<font color="#990000">%</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">0</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(</font><b><font color="#000000">modf</font></b><font color="#990000">(</font>i<font color="#990000">,&amp;</font>properties<font color="#990000">-&gt;</font>discard<font color="#990000">)!=</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>retdiscard<font color="#990000">))</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font> <font color="#993399">2.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font> <font color="#993399">7.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">12.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">17.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">22.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">27.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font>
            <font color="#990000">)</font>
        <font color="#FF0000">{</font>
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> i <font color="#990000">&lt;=</font> <font color="#993399">0</font> <font color="#990000">||</font> <b><font color="#000000">fabs</font></b><font color="#990000">(</font>i<font color="#990000">-</font><font color="#993399">0.0</font><font color="#990000">)</font> <font color="#990000">&lt;</font> epsilon <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

              <b><font color="#0000FF">if</font></b><font color="#990000">(</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">!=</font><font color="#993399">5</font><font color="#990000">)</font>
              <font color="#FF0000">{</font>
                properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>xcontrol<font color="#990000">;</font>
              <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
              <font color="#FF0000">{</font>
                properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> <font color="#993399">2.5</font><font color="#990000">;</font>
              <font color="#FF0000">}</font>

              <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
            <font color="#FF0000">}</font>
          
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%.3f "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">);</font>
            
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>modeltype <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>strike <font color="#990000">=</font> i<font color="#990000">;</font>

            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>steps <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">;</font>

            <b><font color="#0000FF">struct</font></b> <font color="#008080">_data</font> optiondata<font color="#990000">;</font>

            optiondata <font color="#990000">=</font> <b><font color="#000000">option_call</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font><b><font color="#000000">modf</font></b><font color="#990000">(</font>i<font color="#990000">,&amp;</font>properties<font color="#990000">-&gt;</font>discard<font color="#990000">)==.</font><font color="#993399">5</font><font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-5.*f "</font><font color="#990000">,</font><font color="#993399">1</font><font color="#990000">,</font>i<font color="#990000">);</font>

            <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-4.*f  "</font><font color="#990000">,</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>precision<font color="#990000">,</font>i<font color="#990000">);</font>
            <font color="#FF0000">}</font>

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font>i<font color="#990000">&lt;=</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney<font color="#990000">)</font>
            <font color="#FF0000">{</font>
                <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
            <font color="#FF0000">}</font>
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCalls<font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>call<font color="#990000">);</font>

            <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
            <font color="#FF0000">{</font>
              <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">" "</font><font color="#990000">);</font>
            <font color="#FF0000">}</font>
            <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
            
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"    "</font><font color="#990000">);</font>

            optiondata <font color="#990000">=</font> <b><font color="#000000">option_put</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font>i<font color="#990000">&gt;=</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney<font color="#990000">)</font>
            <font color="#FF0000">{</font>
                <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
            <font color="#FF0000">}</font>
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportPuts<font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>put<font color="#990000">);</font>

            <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
            <font color="#FF0000">{</font>
              <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font><font color="#FF0000">" "</font><font color="#990000">);</font>
            <font color="#FF0000">}</font>

            <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>

            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"   "</font><font color="#990000">);</font>

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>produceCallDelta <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              optiondata <font color="#990000">=</font> <b><font color="#000000">option_call_delta</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>

              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">" %.*f   "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>calldelta<font color="#990000">);</font>

            <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"          "</font><font color="#990000">);</font>
            <font color="#FF0000">}</font>

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>producePutDelta <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              optiondata <font color="#990000">=</font> <b><font color="#000000">option_put_delta</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>

              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>putdelta<font color="#990000">);</font>

            <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"          "</font><font color="#990000">);</font>
            <font color="#FF0000">}</font>

            <i><font color="#9A1900">/* print the tickers */</font></i>
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportStrikes <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCalls <font color="#990000">)</font>
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"   %s%c"</font><font color="#990000">,</font>option_calls<font color="#990000">[</font><b><font color="#000000">decimal_date_to_int_month</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">])],(</font><font color="#009900">char</font><font color="#990000">)</font> <b><font color="#000000">strike_price_codes</font></b><font color="#990000">(</font>i<font color="#990000">));</font>

              <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportPuts <font color="#990000">)</font>
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"  %s%c"</font><font color="#990000">,</font>option_puts<font color="#990000">[</font><b><font color="#000000">decimal_date_to_int_month</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">])],(</font><font color="#009900">char</font><font color="#990000">)</font> <b><font color="#000000">strike_price_codes</font></b><font color="#990000">(</font>i<font color="#990000">));</font>
            <font color="#FF0000">}</font>

            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font>counter<font color="#990000">++&gt;=</font>cellrows<font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
            <font color="#FF0000">}</font>                               
         <font color="#FF0000">}</font>
      <font color="#FF0000">}</font>

    <font color="#FF0000">}</font>
    <i><font color="#9A1900">/*********************************************************/</font></i>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> CALENDAR_OPTIONS1 <font color="#990000">||</font> properties<font color="#990000">-&gt;</font>demotype <font color="#990000">==</font> CALENDAR_OPTIONS1 <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>isnan <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"stock  %-6s   YY     "</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>strike<font color="#990000">);</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font><font color="#993399">17</font><font color="#990000">+(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">/</font><font color="#993399">2</font><font color="#990000">));</font>                
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-*s%s%-*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>call<font color="#990000">,(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">&lt;=</font><font color="#993399">1</font><font color="#990000">)?</font><font color="#FF0000">" "</font><font color="#990000">:</font><font color="#FF0000">"   "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>put<font color="#990000">);</font>                
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"-----  ------   --     "</font><font color="#990000">);</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">17</font><font color="#990000">+(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">/</font><font color="#993399">2</font><font color="#990000">));</font>                
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-*s%s%-*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"----"</font><font color="#990000">,(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">&lt;=</font><font color="#993399">1</font><font color="#990000">)?</font><font color="#FF0000">" "</font><font color="#990000">:</font><font color="#FF0000">"   "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"---"</font><font color="#990000">);</font>

      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font><font color="#993399">35</font><font color="#990000">+(</font><font color="#993399">2</font><font color="#990000">*(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">)));</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-6s   YY %-*s%s%-*s"</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>strike<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>call<font color="#990000">,(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">&lt;</font><font color="#993399">2</font><font color="#990000">)?</font><font color="#FF0000">" "</font><font color="#990000">:</font><font color="#FF0000">"     "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>put<font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">35</font><font color="#990000">+(</font><font color="#993399">2</font><font color="#990000">*(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">)));</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"------   -- %-*s%s%-*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"----"</font><font color="#990000">,(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">&lt;</font><font color="#993399">2</font><font color="#990000">)?</font><font color="#FF0000">" "</font><font color="#990000">:</font><font color="#FF0000">"     "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"---"</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                
      <i><font color="#9A1900">/* clear the screen where the matrix other properties-&gt;formats leave</font></i>
<i><font color="#9A1900">         stuff behind */</font></i>
      <font color="#009900">int</font> row<font color="#990000">;</font>
      <b><font color="#0000FF">for</font></b><font color="#990000">(</font> row <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">;</font> row <font color="#990000">&lt;=</font> endingbarrier<font color="#990000">;</font> <font color="#990000">++</font>row <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>row<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>  <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <font color="#FF0000">}</font>

      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
      <font color="#009900">int</font> counter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      <font color="#009900">int</font> counter2 <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">;</font>
      
      <font color="#009900">double</font> epsilon <font color="#990000">=</font> <font color="#990000">(</font><font color="#009900">double</font><font color="#990000">)</font> <font color="#993399">1</font> <font color="#990000">/</font> <b><font color="#000000">pow</font></b><font color="#990000">(</font><font color="#993399">10.0</font><font color="#990000">,(</font><font color="#009900">double</font><font color="#990000">)</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>precision<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">);</font>
      
      <font color="#009900">double</font> i<font color="#990000">;</font>
      <b><font color="#0000FF">for</font></b><font color="#990000">(</font>i<font color="#990000">=(</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">+(</font><font color="#009900">int</font><font color="#990000">)</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">-</font><font color="#993399">15</font><font color="#990000">);</font>i<font color="#990000">&lt;(</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">+(</font><font color="#009900">int</font><font color="#990000">)</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">+</font><font color="#993399">40</font><font color="#990000">);</font>i<font color="#990000">+=</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>incrementor<font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(((</font><font color="#009900">int</font><font color="#990000">)</font>i<font color="#990000">%</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">0</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(</font><b><font color="#000000">modf</font></b><font color="#990000">(</font>i<font color="#990000">,&amp;</font>properties<font color="#990000">-&gt;</font>discard<font color="#990000">)!=</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>retdiscard<font color="#990000">))</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font> <font color="#993399">2.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font> <font color="#993399">7.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">12.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">17.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">22.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">27.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font>
            <font color="#990000">)</font>
         <font color="#FF0000">{</font>
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> i <font color="#990000">&lt;=</font> <font color="#993399">0</font> <font color="#990000">||</font> <b><font color="#000000">fabs</font></b><font color="#990000">(</font>i<font color="#990000">-</font><font color="#993399">0.0</font><font color="#990000">)</font> <font color="#990000">&lt;</font> epsilon<font color="#990000">)</font>
            <font color="#FF0000">{</font>
              i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

              <b><font color="#0000FF">if</font></b><font color="#990000">(</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1 <font color="#990000">!=</font> <font color="#993399">5</font> <font color="#990000">)</font>
              <font color="#FF0000">{</font>
                properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>xcontrol<font color="#990000">;</font>
              <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
              <font color="#FF0000">{</font>
                properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> <font color="#993399">2.5</font><font color="#990000">;</font>
              <font color="#FF0000">}</font>

              <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
            <font color="#FF0000">}</font>
                       
           <font color="#009900">int</font> mcounter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
           <b><font color="#0000FF">while</font></b><font color="#990000">(</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">)</font>
           <font color="#FF0000">{</font>
             properties<font color="#990000">-&gt;</font>adjusttime <font color="#990000">=</font> <b><font color="#000000">adjust_to_current_time_and_expr</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>expiration_time<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>day_offset<font color="#990000">);</font>                                
            
             <b><font color="#0000FF">if</font></b><font color="#990000">(</font> counter <font color="#990000">&gt;</font> cellrows <font color="#990000">)</font>
             <font color="#FF0000">{</font>
               <b><font color="#0000FF">if</font></b><font color="#990000">(</font>counter<font color="#990000">&gt;((</font>cellrows<font color="#990000">*</font><font color="#993399">2</font><font color="#990000">)+</font><font color="#993399">1</font><font color="#990000">))</font>
                <font color="#FF0000">{</font>
                  <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
                <font color="#FF0000">}</font>

               <b><font color="#000000">move</font></b><font color="#990000">(</font>counter2<font color="#990000">++,</font><font color="#993399">36</font><font color="#990000">+(</font><font color="#993399">2</font><font color="#990000">*(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">)));</font>
             <font color="#FF0000">}</font>

             <b><font color="#0000FF">if</font></b><font color="#990000">(</font> counter <font color="#990000">&lt;=</font> cellrows <font color="#990000">)</font>
             <font color="#FF0000">{</font>
               <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%.3f "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">);</font>
             <font color="#FF0000">}</font>

             properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>modeltype <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">;</font>
             properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>strike <font color="#990000">=</font> i<font color="#990000">;</font>
             properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>adjusttime<font color="#990000">;</font>
             properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>steps <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">;</font>
             
             <b><font color="#0000FF">struct</font></b> <font color="#008080">_data</font> optiondata<font color="#990000">;</font>

             optiondata <font color="#990000">=</font> <b><font color="#000000">option_call</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>
             optiondata <font color="#990000">=</font> <b><font color="#000000">option_put</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>

             <b><font color="#0000FF">if</font></b><font color="#990000">(</font><b><font color="#000000">modf</font></b><font color="#990000">(</font>i<font color="#990000">,&amp;</font>properties<font color="#990000">-&gt;</font>discard<font color="#990000">)==.</font><font color="#993399">5</font><font color="#990000">)</font>
             <font color="#FF0000">{</font>
               <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-4.*f "</font><font color="#990000">,</font><font color="#993399">1</font><font color="#990000">,</font>i<font color="#990000">);</font>

             <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
             <font color="#FF0000">{</font>
               <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-3.*f  "</font><font color="#990000">,</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>precision<font color="#990000">,</font>i<font color="#990000">);</font>
             <font color="#FF0000">}</font>

             <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s%02.0f "</font><font color="#990000">,</font>mon<font color="#990000">[*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">],(</font><font color="#009900">double</font><font color="#990000">)</font> <font color="#990000">*</font>properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">);</font>

             <b><font color="#0000FF">if</font></b><font color="#990000">(</font> i <font color="#990000">&lt;=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney <font color="#990000">)</font>
             <font color="#FF0000">{</font>
               <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
             <font color="#FF0000">}</font>
             <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCalls <font color="#990000">)</font>
             <font color="#FF0000">{</font>
               <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>call<font color="#990000">);</font>

             <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
             <font color="#FF0000">{</font>
               <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
               <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">" "</font><font color="#990000">);</font>
             <font color="#FF0000">}</font>
             <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>

             <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">" "</font><font color="#990000">);</font>

             <b><font color="#0000FF">if</font></b><font color="#990000">(</font>i<font color="#990000">&gt;=</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney<font color="#990000">)</font>
             <font color="#FF0000">{</font>
               <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
             <font color="#FF0000">}</font>
             <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportPuts <font color="#990000">)</font>
             <font color="#FF0000">{</font>
               <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%.*f</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>put<font color="#990000">);</font>

             <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
             <font color="#FF0000">{</font>
               <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
               <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*s</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">" "</font><font color="#990000">);</font>
             <font color="#FF0000">}</font>

             <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>

             properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">++;</font>
             counter<font color="#990000">++;</font>

             <b><font color="#0000FF">if</font></b><font color="#990000">(</font> mcounter<font color="#990000">++</font> <font color="#990000">==</font> <font color="#993399">5</font> <font color="#990000">)</font>
               <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

           <font color="#FF0000">}</font>
         <font color="#FF0000">}</font>
      <font color="#FF0000">}</font>
    <font color="#FF0000">}</font>
    <i><font color="#9A1900">/*********************************************************/</font></i>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> CALENDAR_OPTIONS2 <font color="#990000">||</font> properties<font color="#990000">-&gt;</font>demotype <font color="#990000">==</font> CALENDAR_OPTIONS2 <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>isnan <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"stock  %-6s %-*s"</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>strike<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>call<font color="#990000">);</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font><font color="#993399">23</font><font color="#990000">+</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>put<font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"  days to exp. exp. date call delta  tickers"</font><font color="#990000">);</font>
                
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"-----  ------ %-*s "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"----"</font><font color="#990000">);</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">23</font><font color="#990000">+</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"---"</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"  -----------  --------- ----------  -------"</font><font color="#990000">);</font>                

      <i><font color="#9A1900">/* clear the screen where the matrix other properties-&gt;formats leave</font></i>
<i><font color="#9A1900">         stuff behind */</font></i>
      <font color="#009900">int</font> row<font color="#990000">;</font>
      <b><font color="#0000FF">for</font></b><font color="#990000">(</font> row <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">;</font> row <font color="#990000">&lt;=</font> endingbarrier<font color="#990000">;</font> <font color="#990000">++</font>row <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>row<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>  <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <font color="#FF0000">}</font>
                
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

      <font color="#009900">int</font> counter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

      <font color="#009900">double</font> epsilon <font color="#990000">=</font> <font color="#990000">(</font><font color="#009900">double</font><font color="#990000">)</font> <font color="#993399">1</font> <font color="#990000">/</font> <b><font color="#000000">pow</font></b><font color="#990000">(</font><font color="#993399">10.0</font><font color="#990000">,(</font><font color="#009900">double</font><font color="#990000">)</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>precision<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">);</font>
      <font color="#009900">int</font> mcounter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      <font color="#009900">double</font> i<font color="#990000">;</font>

      <b><font color="#0000FF">for</font></b><font color="#990000">(</font>i<font color="#990000">=(</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">+(</font><font color="#009900">int</font><font color="#990000">)</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">-</font><font color="#993399">15</font><font color="#990000">);</font>i<font color="#990000">&lt;(</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">+(</font><font color="#009900">int</font><font color="#990000">)</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">+</font><font color="#993399">40</font><font color="#990000">);</font>i<font color="#990000">+=</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>incrementor<font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(((</font><font color="#009900">int</font><font color="#990000">)</font>i<font color="#990000">%</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">0</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(</font><b><font color="#000000">modf</font></b><font color="#990000">(</font>i<font color="#990000">,&amp;</font>properties<font color="#990000">-&gt;</font>discard<font color="#990000">)!=</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>retdiscard<font color="#990000">))</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font> <font color="#993399">2.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font> <font color="#993399">7.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">12.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">17.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">22.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">27.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font>
            <font color="#990000">)</font>
         <font color="#FF0000">{</font>
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> i <font color="#990000">&lt;=</font> <font color="#993399">0</font> <font color="#990000">||</font> <b><font color="#000000">fabs</font></b><font color="#990000">(</font>i<font color="#990000">-</font><font color="#993399">0.0</font><font color="#990000">)</font> <font color="#990000">&lt;</font> epsilon<font color="#990000">)</font>
            <font color="#FF0000">{</font>
              i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

              <b><font color="#0000FF">if</font></b><font color="#990000">(</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">!=</font><font color="#993399">5</font><font color="#990000">)</font>
              <font color="#FF0000">{</font>
                properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>xcontrol<font color="#990000">;</font>
              <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
              <font color="#FF0000">{</font>
                properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> <font color="#993399">2.5</font><font color="#990000">;</font>
              <font color="#FF0000">}</font>

              <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
            <font color="#FF0000">}</font>
                       
           <b><font color="#0000FF">while</font></b><font color="#990000">(</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">)</font>
           <font color="#FF0000">{</font>

             properties<font color="#990000">-&gt;</font>adjusttime <font color="#990000">=</font> <b><font color="#000000">adjust_to_current_time_and_expr</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>expiration_time<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>day_offset<font color="#990000">);</font>                                
             
             <b><font color="#0000FF">if</font></b><font color="#990000">(</font> counter <font color="#990000">&gt;</font> cellrows <font color="#990000">)</font>
               <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

             <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%.3f "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">);</font>
             
             properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>modeltype <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">;</font>
             properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>strike <font color="#990000">=</font> i<font color="#990000">;</font>
             properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>adjusttime<font color="#990000">;</font>
             properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>steps <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">;</font>

             <b><font color="#0000FF">struct</font></b> <font color="#008080">_data</font> optiondata<font color="#990000">;</font>

             optiondata <font color="#990000">=</font> <b><font color="#000000">option_call</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>
             optiondata <font color="#990000">=</font> <b><font color="#000000">option_put</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>

             <b><font color="#0000FF">if</font></b><font color="#990000">(</font><b><font color="#000000">modf</font></b><font color="#990000">(</font>i<font color="#990000">,&amp;</font>properties<font color="#990000">-&gt;</font>discard<font color="#990000">)==.</font><font color="#993399">5</font><font color="#990000">)</font>
             <font color="#FF0000">{</font>
               <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-4.*f "</font><font color="#990000">,</font><font color="#993399">1</font><font color="#990000">,</font>i<font color="#990000">);</font>

             <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
             <font color="#FF0000">{</font>
               <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-3.*f  "</font><font color="#990000">,</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>precision<font color="#990000">,</font>i<font color="#990000">);</font>
             <font color="#FF0000">}</font>

             <b><font color="#0000FF">if</font></b><font color="#990000">(</font>i<font color="#990000">&lt;=</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney<font color="#990000">)</font>
             <font color="#FF0000">{</font>
               <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
             <font color="#FF0000">}</font>
             <b><font color="#0000FF">if</font></b><font color="#990000">(</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCalls<font color="#990000">)</font>
             <font color="#FF0000">{</font>
               <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>call<font color="#990000">);</font>

             <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
             <font color="#FF0000">{</font>
               <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
               <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">" "</font><font color="#990000">);</font>
             <font color="#FF0000">}</font>
             <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>

             <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"  "</font><font color="#990000">);</font>

             <b><font color="#0000FF">if</font></b><font color="#990000">(</font> i <font color="#990000">&gt;=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney <font color="#990000">)</font>
             <font color="#FF0000">{</font>
               <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
             <font color="#FF0000">}</font>

             <b><font color="#0000FF">if</font></b><font color="#990000">(</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportPuts<font color="#990000">)</font>
             <font color="#FF0000">{</font>
               <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>put<font color="#990000">);</font>
             <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
             <font color="#FF0000">{</font>
               <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
               <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font><font color="#FF0000">" "</font><font color="#990000">);</font>
             <font color="#FF0000">}</font>
                            
             <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
                           
             <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"  %4d       %s%2d %02.0f  "</font><font color="#990000">,(*</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">-</font>properties<font color="#990000">-&gt;</font>day_offset_counter<font color="#990000">),</font>mon<font color="#990000">[*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">],*</font>properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">,(</font><font color="#009900">double</font><font color="#990000">)</font> <font color="#990000">*</font>properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">);</font>                            

             <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>produceCallDelta <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
             <font color="#FF0000">{</font>
               optiondata <font color="#990000">=</font> <b><font color="#000000">option_call_delta</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>

               <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>calldelta<font color="#990000">);</font>
             <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
             <font color="#FF0000">{</font>
               <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"        "</font><font color="#990000">);</font>
             <font color="#FF0000">}</font>

             <i><font color="#9A1900">/* print the tickers */</font></i>
             <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportStrikes <font color="#990000">)</font>
             <font color="#FF0000">{</font>
               <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCalls <font color="#990000">)</font>
                 <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"   %s%c"</font><font color="#990000">,</font>option_calls<font color="#990000">[*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">],(</font><font color="#009900">char</font><font color="#990000">)</font> <b><font color="#000000">strike_price_codes</font></b><font color="#990000">(</font>i<font color="#990000">));</font>

               <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportPuts <font color="#990000">)</font>
                 <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"  %s%c"</font><font color="#990000">,</font>option_puts<font color="#990000">[*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">],(</font><font color="#009900">char</font><font color="#990000">)</font> <b><font color="#000000">strike_price_codes</font></b><font color="#990000">(</font>i<font color="#990000">));</font>
             <font color="#FF0000">}</font>

             <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>
                                
             properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">++;</font>
             counter<font color="#990000">++;</font>

             <b><font color="#0000FF">if</font></b><font color="#990000">(</font> mcounter<font color="#990000">++</font> <font color="#990000">==</font> <font color="#993399">4</font> <font color="#990000">)</font>
               <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
           <font color="#FF0000">}</font>
         <font color="#FF0000">}</font>
      <font color="#FF0000">}</font>
                
      <b><font color="#000000">move</font></b><font color="#990000">(</font>endingbarrier<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
    <font color="#FF0000">}</font>
    <i><font color="#9A1900">/*********************************************************/</font></i>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> CALENDAR_OPTIONS3 <font color="#990000">||</font> properties<font color="#990000">-&gt;</font>demotype <font color="#990000">==</font> CALENDAR_OPTIONS3 <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>isnan <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"stock  %-6s    YY    "</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>strike<font color="#990000">);</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font><font color="#993399">17</font><font color="#990000">+(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">/</font><font color="#993399">2</font><font color="#990000">));</font>                
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-*s%s%-*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>call<font color="#990000">,(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">&lt;=</font><font color="#993399">1</font><font color="#990000">)?</font><font color="#FF0000">" "</font><font color="#990000">:</font><font color="#FF0000">"   "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>put<font color="#990000">);</font>                
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"-----  ------    --    "</font><font color="#990000">);</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">17</font><font color="#990000">+(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">/</font><font color="#993399">2</font><font color="#990000">));</font>                
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-*s%s%-*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"----"</font><font color="#990000">,(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">&lt;=</font><font color="#993399">1</font><font color="#990000">)?</font><font color="#FF0000">" "</font><font color="#990000">:</font><font color="#FF0000">"   "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"---"</font><font color="#990000">);</font>
                
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font><font color="#993399">35</font><font color="#990000">+(</font><font color="#993399">2</font><font color="#990000">*(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">)));</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-6s    YY %-*s%s%-*s"</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>strike<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>call<font color="#990000">,(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">&lt;</font><font color="#993399">2</font><font color="#990000">)?</font><font color="#FF0000">" "</font><font color="#990000">:</font><font color="#FF0000">"     "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>put<font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">35</font><font color="#990000">+(</font><font color="#993399">2</font><font color="#990000">*(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">)));</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"------    -- %-*s%s%-*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"----"</font><font color="#990000">,(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">&lt;</font><font color="#993399">2</font><font color="#990000">)?</font><font color="#FF0000">" "</font><font color="#990000">:</font><font color="#FF0000">"     "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"---"</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

      <i><font color="#9A1900">/* clear the screen where the matrix other properties-&gt;formats leave</font></i>
<i><font color="#9A1900">         stuff behind */</font></i>
      <font color="#009900">int</font> row<font color="#990000">;</font>
      <b><font color="#0000FF">for</font></b><font color="#990000">(</font> row <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">;</font> row <font color="#990000">&lt;=</font> endingbarrier<font color="#990000">;</font> <font color="#990000">++</font>row <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>row<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>  <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <font color="#FF0000">}</font>
                
      <font color="#009900">int</font> counter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      <font color="#009900">int</font> counter2 <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">;</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

      <font color="#009900">int</font> offset <font color="#990000">=</font> <font color="#993399">3</font><font color="#990000">;</font>
      <font color="#009900">double</font> epsilon <font color="#990000">=</font> <font color="#990000">(</font><font color="#009900">double</font><font color="#990000">)</font> <font color="#993399">1</font> <font color="#990000">/</font> <b><font color="#000000">pow</font></b><font color="#990000">(</font><font color="#993399">10.0</font><font color="#990000">,(</font><font color="#009900">double</font><font color="#990000">)</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>precision<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">);</font>

      <font color="#009900">double</font> i<font color="#990000">;</font>
      <b><font color="#0000FF">while</font></b><font color="#990000">(</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">for</font></b><font color="#990000">(</font>i<font color="#990000">=(</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">+(</font><font color="#009900">int</font><font color="#990000">)</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">-</font><font color="#993399">15</font><font color="#990000">);</font>i<font color="#990000">&lt;(</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">+(</font><font color="#009900">int</font><font color="#990000">)</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">+</font><font color="#993399">5</font><font color="#990000">+(</font>offset<font color="#990000">*</font><font color="#993399">5</font><font color="#990000">));</font>i<font color="#990000">+=</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>incrementor<font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(((</font><font color="#009900">int</font><font color="#990000">)</font>i<font color="#990000">%</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">0</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(</font><b><font color="#000000">modf</font></b><font color="#990000">(</font>i<font color="#990000">,&amp;</font>properties<font color="#990000">-&gt;</font>discard<font color="#990000">)!=</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>retdiscard<font color="#990000">))</font> <font color="#990000">||</font>
              <font color="#990000">((</font>i<font color="#990000">==</font> <font color="#993399">2.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
              <font color="#990000">((</font>i<font color="#990000">==</font> <font color="#993399">7.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
              <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">12.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
              <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">17.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
              <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">22.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
              <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">27.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font>
              <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> i <font color="#990000">&lt;=</font> <font color="#993399">0</font> <font color="#990000">||</font> <b><font color="#000000">fabs</font></b><font color="#990000">(</font>i<font color="#990000">-</font><font color="#993399">0.0</font><font color="#990000">)</font> <font color="#990000">&lt;</font> epsilon <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

              <b><font color="#0000FF">if</font></b><font color="#990000">(</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">!=</font><font color="#993399">5</font><font color="#990000">)</font>
              <font color="#FF0000">{</font>
                properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>xcontrol<font color="#990000">;</font>
              <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
              <font color="#FF0000">{</font>
                properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> <font color="#993399">2.5</font><font color="#990000">;</font>
              <font color="#FF0000">}</font>

              <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
            <font color="#FF0000">}</font>

            properties<font color="#990000">-&gt;</font>adjusttime <font color="#990000">=</font> <b><font color="#000000">adjust_to_current_time_and_expr</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>expiration_time<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>day_offset<font color="#990000">);</font>                                

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> counter <font color="#990000">&gt;</font> cellrows <font color="#990000">)</font>
              <b><font color="#000000">move</font></b><font color="#990000">(</font>counter2<font color="#990000">++,</font><font color="#993399">36</font><font color="#990000">+(</font><font color="#993399">2</font><font color="#990000">*(</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">)));</font>

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font>counter<font color="#990000">&gt;((</font>cellrows<font color="#990000">*</font><font color="#993399">2</font><font color="#990000">)+</font><font color="#993399">1</font><font color="#990000">))</font>
              <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font>counter<font color="#990000">&lt;=</font>cellrows<font color="#990000">)</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%.3f "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">);</font>

            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>modeltype <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>strike <font color="#990000">=</font> i<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>adjusttime<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>steps <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">;</font>

            <b><font color="#0000FF">struct</font></b> <font color="#008080">_data</font> optiondata<font color="#990000">;</font>
            
            optiondata <font color="#990000">=</font> <b><font color="#000000">option_call</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>
            optiondata <font color="#990000">=</font> <b><font color="#000000">option_put</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font><b><font color="#000000">modf</font></b><font color="#990000">(</font>i<font color="#990000">,&amp;</font>properties<font color="#990000">-&gt;</font>discard<font color="#990000">)==.</font><font color="#993399">5</font><font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-4.*f "</font><font color="#990000">,</font><font color="#993399">1</font><font color="#990000">,</font>i<font color="#990000">);</font>

            <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-3.*f  "</font><font color="#990000">,</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>precision<font color="#990000">,</font>i<font color="#990000">);</font>
            <font color="#FF0000">}</font>

            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">" %-s%02.0f "</font><font color="#990000">,</font>mon<font color="#990000">[*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">],(</font><font color="#009900">double</font><font color="#990000">)</font> <font color="#990000">*</font>properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">);</font>
                            
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font>i<font color="#990000">&lt;=</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney<font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
            <font color="#FF0000">}</font>
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCalls<font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-*.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>call<font color="#990000">);</font>
            <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
            <font color="#FF0000">{</font>
              <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font><font color="#FF0000">" "</font><font color="#990000">);</font>
            <font color="#FF0000">}</font>
            <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>

            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">" "</font><font color="#990000">);</font>
                            
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font>i<font color="#990000">&gt;=</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney<font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
            <font color="#FF0000">}</font>
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportPuts <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-*.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>put<font color="#990000">);</font>
            <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
            <font color="#FF0000">{</font>
              <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font><font color="#FF0000">" "</font><font color="#990000">);</font>
            <font color="#FF0000">}</font>

            <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
                            
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>
                            
            counter<font color="#990000">++;</font>
          <font color="#FF0000">}</font>
        <font color="#FF0000">}</font>

        properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">++;</font>
      <font color="#FF0000">}</font>

    <font color="#FF0000">}</font>
    <i><font color="#9A1900">/*********************************************************/</font></i>

    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> CALENDAR_OPTIONS4 <font color="#990000">||</font> properties<font color="#990000">-&gt;</font>demotype <font color="#990000">==</font> CALENDAR_OPTIONS4 <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>isnan <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"stock  %-6s %-*s"</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>strike<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>call<font color="#990000">);</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font><font color="#993399">23</font><font color="#990000">+</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>put<font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"  days to exp. exp. date call delta  tickers"</font><font color="#990000">);</font>
                
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"-----  ------ %-*s "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"----"</font><font color="#990000">);</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">23</font><font color="#990000">+</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"---"</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"  -----------  --------- ----------  -------"</font><font color="#990000">);</font>                

      <i><font color="#9A1900">/* clear the screen where the matrix other properties-&gt;formats leave</font></i>
<i><font color="#9A1900">         stuff behind */</font></i>
      <font color="#009900">int</font> row<font color="#990000">;</font>
      <b><font color="#0000FF">for</font></b><font color="#990000">(</font> row <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">;</font> row <font color="#990000">&lt;=</font> endingbarrier<font color="#990000">;</font> <font color="#990000">++</font>row <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>row<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>  <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <font color="#FF0000">}</font>
                
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
      <font color="#009900">int</font> counter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

      <font color="#009900">double</font> epsilon <font color="#990000">=</font> <font color="#990000">(</font><font color="#009900">double</font><font color="#990000">)</font> <font color="#993399">1</font> <font color="#990000">/</font> <b><font color="#000000">pow</font></b><font color="#990000">(</font><font color="#993399">10.0</font><font color="#990000">,(</font><font color="#009900">double</font><font color="#990000">)</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>precision<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">);</font>

      <b><font color="#0000FF">while</font></b><font color="#990000">(</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <font color="#009900">double</font> i<font color="#990000">;</font>
        <b><font color="#0000FF">for</font></b><font color="#990000">(</font>i<font color="#990000">=(</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">+(</font><font color="#009900">int</font><font color="#990000">)</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">-</font><font color="#993399">15</font><font color="#990000">);</font>i<font color="#990000">&lt;(</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">+(</font><font color="#009900">int</font><font color="#990000">)</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">+</font><font color="#993399">5</font><font color="#990000">);</font>i<font color="#990000">+=</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>incrementor<font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(((</font><font color="#009900">int</font><font color="#990000">)</font>i<font color="#990000">%</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">0</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(</font><b><font color="#000000">modf</font></b><font color="#990000">(</font>i<font color="#990000">,&amp;</font>properties<font color="#990000">-&gt;</font>discard<font color="#990000">)!=</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>retdiscard<font color="#990000">))</font> <font color="#990000">||</font>
              <font color="#990000">((</font>i<font color="#990000">==</font> <font color="#993399">2.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
              <font color="#990000">((</font>i<font color="#990000">==</font> <font color="#993399">7.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
              <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">12.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
              <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">17.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
              <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">22.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
              <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">27.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font>
              <font color="#990000">)</font>
           <font color="#FF0000">{</font>
             <b><font color="#0000FF">if</font></b><font color="#990000">(</font> i <font color="#990000">&lt;=</font> <font color="#993399">0</font> <font color="#990000">||</font> <b><font color="#000000">fabs</font></b><font color="#990000">(</font>i<font color="#990000">-</font><font color="#993399">0.0</font><font color="#990000">)</font> <font color="#990000">&lt;</font> epsilon<font color="#990000">)</font>
             <font color="#FF0000">{</font>
               i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

               <b><font color="#0000FF">if</font></b><font color="#990000">(</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">!=</font><font color="#993399">5</font><font color="#990000">)</font>
                 <font color="#FF0000">{</font>
                   properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>xcontrol<font color="#990000">;</font>
                 <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
                 <font color="#FF0000">{</font>
                   properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> <font color="#993399">2.5</font><font color="#990000">;</font>
                 <font color="#FF0000">}</font>

               <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
             <font color="#FF0000">}</font>
                           
             properties<font color="#990000">-&gt;</font>adjusttime <font color="#990000">=</font> <b><font color="#000000">adjust_to_current_time_and_expr</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>expiration_time<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>day_offset<font color="#990000">);</font>                                

             <b><font color="#0000FF">if</font></b><font color="#990000">(</font> counter <font color="#990000">&gt;</font> cellrows <font color="#990000">)</font>
               <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

             <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%.3f "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">);</font>
             
             properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>modeltype <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">;</font>
             properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>strike <font color="#990000">=</font> i<font color="#990000">;</font>
             properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>adjusttime<font color="#990000">;</font>
             properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>steps <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">;</font>

             <b><font color="#0000FF">struct</font></b> <font color="#008080">_data</font> optiondata<font color="#990000">;</font>

             optiondata <font color="#990000">=</font> <b><font color="#000000">option_call</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>

             <b><font color="#0000FF">if</font></b><font color="#990000">(</font><b><font color="#000000">modf</font></b><font color="#990000">(</font>i<font color="#990000">,&amp;</font>properties<font color="#990000">-&gt;</font>discard<font color="#990000">)==.</font><font color="#993399">5</font><font color="#990000">)</font>
              <font color="#FF0000">{</font>
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-4.*f "</font><font color="#990000">,</font><font color="#993399">1</font><font color="#990000">,</font>i<font color="#990000">);</font>

              <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
              <font color="#FF0000">{</font>
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-3.*f  "</font><font color="#990000">,</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>precision<font color="#990000">,</font>i<font color="#990000">);</font>
              <font color="#FF0000">}</font>

             <b><font color="#0000FF">if</font></b><font color="#990000">(</font> i <font color="#990000">&lt;=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney <font color="#990000">)</font>
              <font color="#FF0000">{</font>
                <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
              <font color="#FF0000">}</font>                                
             <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCalls <font color="#990000">)</font>
             <font color="#FF0000">{</font>
               <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>call<font color="#990000">);</font>
             <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
             <font color="#FF0000">{</font>
               <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
               <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font><font color="#FF0000">" "</font><font color="#990000">);</font>
             <font color="#FF0000">}</font>
             <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
                            
             <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"  "</font><font color="#990000">);</font>

             optiondata <font color="#990000">=</font> <b><font color="#000000">option_put</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>

             <b><font color="#0000FF">if</font></b><font color="#990000">(</font> i <font color="#990000">&gt;=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney <font color="#990000">)</font>
             <font color="#FF0000">{</font>
                 <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
             <font color="#FF0000">}</font>

             <b><font color="#0000FF">if</font></b><font color="#990000">(</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportPuts<font color="#990000">)</font>
             <font color="#FF0000">{</font>
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>put<font color="#990000">);</font>
             <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
             <font color="#FF0000">{</font>
               <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
               <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font><font color="#FF0000">" "</font><font color="#990000">);</font>
             <font color="#FF0000">}</font>

             <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
                            
             <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"  %4d       %s%2d %02.0f  "</font><font color="#990000">,(*</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">-</font>properties<font color="#990000">-&gt;</font>day_offset_counter<font color="#990000">),</font>mon<font color="#990000">[*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">],*</font>properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">,(</font><font color="#009900">double</font><font color="#990000">)</font> <font color="#990000">*</font>properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">);</font>

             <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>produceCallDelta <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
             <font color="#FF0000">{</font>
               optiondata <font color="#990000">=</font> <b><font color="#000000">option_call_delta</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>
               
               <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>calldelta<font color="#990000">);</font>
             <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
             <font color="#FF0000">{</font>
               <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"        "</font><font color="#990000">);</font>
             <font color="#FF0000">}</font>

             <i><font color="#9A1900">/* print the tickers */</font></i>
             <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportStrikes <font color="#990000">)</font>
             <font color="#FF0000">{</font>
               <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCalls <font color="#990000">)</font>
                 <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"   %s%c"</font><font color="#990000">,</font>option_calls<font color="#990000">[*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">],(</font><font color="#009900">char</font><font color="#990000">)</font> <b><font color="#000000">strike_price_codes</font></b><font color="#990000">(</font>i<font color="#990000">));</font>

               <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportPuts <font color="#990000">)</font>
                 <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"  %s%c"</font><font color="#990000">,</font>option_puts<font color="#990000">[*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">],(</font><font color="#009900">char</font><font color="#990000">)</font> <b><font color="#000000">strike_price_codes</font></b><font color="#990000">(</font>i<font color="#990000">));</font>
             <font color="#FF0000">}</font>

             <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>
                            
             counter<font color="#990000">++;</font>
                            
           <font color="#FF0000">}</font>
        <font color="#FF0000">}</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> counter <font color="#990000">&gt;</font> cellrows <font color="#990000">)</font>
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

        properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">++;</font>
      <font color="#FF0000">}</font>

    <font color="#FF0000">}</font>
    <i><font color="#9A1900">/*********************************************************/</font></i>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> CALENDAR_OPTIONS5 <font color="#990000">||</font> properties<font color="#990000">-&gt;</font>demotype <font color="#990000">==</font> CALENDAR_OPTIONS5 <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>isnan <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

      <i><font color="#9A1900">/* clear the screen where the matrix other properties-&gt;formats leave</font></i>
<i><font color="#9A1900">         stuff behind */</font></i>
      <font color="#009900">int</font> row<font color="#990000">;</font>
      <b><font color="#0000FF">for</font></b><font color="#990000">(</font> row <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>start<font color="#990000">;</font> row <font color="#990000">&lt;=</font> endingbarrier<font color="#990000">;</font> <font color="#990000">++</font>row <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>row<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>  <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <font color="#FF0000">}</font>

      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"stock  %-6s</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>strike<font color="#990000">);</font> 
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"-----  ------</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>

      <font color="#009900">int</font> counter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      <font color="#009900">int</font> column <font color="#990000">=</font> <font color="#993399">15</font><font color="#990000">;</font>
                
      ibdacross <font color="#990000">=</font> <font color="#993399">8</font><font color="#990000">;</font>
      <font color="#009900">int</font> flag2 <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>precision <font color="#990000">&gt;=</font> <font color="#993399">8</font> <font color="#990000">)</font>
       <font color="#FF0000">{</font>
         <i><font color="#9A1900">/* default width on a normal screen is 80 */</font></i>
         ibdacross <font color="#990000">=</font> <font color="#990000">(</font><font color="#009900">int</font><font color="#990000">)</font> <font color="#990000">((</font><font color="#009900">double</font><font color="#990000">)</font>width<font color="#990000">/</font><font color="#993399">80</font><font color="#990000">)*(</font><font color="#993399">6</font> <font color="#990000">-</font> <font color="#990000">(</font><font color="#993399">2</font><font color="#990000">*</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">/</font><font color="#993399">8</font><font color="#990000">));</font>
                    
       <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
       <font color="#FF0000">{</font>
         <i><font color="#9A1900">/* default width on a normal screen is 80 */</font></i>
         ibdacross <font color="#990000">=</font> <font color="#990000">(</font><font color="#009900">int</font><font color="#990000">)</font> <font color="#990000">(((</font><font color="#009900">double</font><font color="#990000">)</font>width<font color="#990000">/</font><font color="#993399">80</font><font color="#990000">)*(</font>ibdacross <font color="#990000">+</font> <font color="#993399">4</font> <font color="#990000">-</font> <font color="#990000">((</font><font color="#009900">double</font><font color="#990000">)</font><font color="#993399">8</font><font color="#990000">/</font><font color="#993399">8</font><font color="#990000">*</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">)));</font>
                        
         <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>precision <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">||</font> properties<font color="#990000">-&gt;</font>precision <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
           ibdacross<font color="#990000">++;</font>
       <font color="#FF0000">}</font>

      <b><font color="#0000FF">while</font></b><font color="#990000">(</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">!=-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">!=-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">!=-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font>column<font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">" %s%2d %02.0f"</font><font color="#990000">,</font>mon<font color="#990000">[*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">],*</font>properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">,(</font><font color="#009900">double</font><font color="#990000">)*</font>properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                    
        properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">++;</font> properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">++;</font> properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">++;</font>

        column <font color="#990000">=</font> column <font color="#990000">+</font> <font color="#993399">8</font> <font color="#990000">+</font> properties<font color="#990000">-&gt;</font>precision <font color="#990000">-</font> <font color="#993399">4</font><font color="#990000">;</font>
        
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">++</font>counter <font color="#990000">==</font> ibdacross <font color="#990000">)</font>
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>

      column <font color="#990000">=</font> <font color="#993399">15</font><font color="#990000">;</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">15</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <b><font color="#0000FF">while</font></b><font color="#990000">(</font> counter <font color="#990000">!=</font> <font color="#993399">0</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font>column<font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">" --------"</font><font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

        column <font color="#990000">=</font> column <font color="#990000">+</font> <font color="#993399">4</font> <font color="#990000">+</font> properties<font color="#990000">-&gt;</font>precision<font color="#990000">;</font>
        counter<font color="#990000">--;</font>
      <font color="#FF0000">}</font>
                
      <i><font color="#9A1900">/* reset pointers */</font></i>
      properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_expiration_month<font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_days_to_expiration<font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_expiration_year<font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_time_to_expiration<font color="#990000">;</font>
      
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

      <font color="#009900">int</font> rowcounter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      column <font color="#990000">=</font> <font color="#993399">15</font><font color="#990000">;</font>

      <font color="#009900">double</font> epsilon <font color="#990000">=</font> <font color="#990000">(</font><font color="#009900">double</font><font color="#990000">)</font> <font color="#993399">1</font> <font color="#990000">/</font> <b><font color="#000000">pow</font></b><font color="#990000">(</font><font color="#993399">10.0</font><font color="#990000">,(</font><font color="#009900">double</font><font color="#990000">)</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>precision<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">);</font>

      <i><font color="#9A1900">/* calc the call matrix */</font></i>
      <font color="#009900">double</font> i<font color="#990000">;</font>
      <b><font color="#0000FF">for</font></b><font color="#990000">(</font>i<font color="#990000">=(</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">+(</font><font color="#009900">int</font><font color="#990000">)</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">-</font><font color="#993399">15</font><font color="#990000">);</font>i<font color="#990000">&lt;(</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">+(</font><font color="#009900">int</font><font color="#990000">)</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">+</font><font color="#993399">200</font><font color="#990000">);</font>i<font color="#990000">+=</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>incrementor<font color="#990000">)</font>
      <font color="#FF0000">{</font>
        flag2 <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
        counter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
                    
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(((</font><font color="#009900">int</font><font color="#990000">)</font>i<font color="#990000">%</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">0</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(</font><b><font color="#000000">modf</font></b><font color="#990000">(</font>i<font color="#990000">,&amp;</font>properties<font color="#990000">-&gt;</font>discard<font color="#990000">)!=</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>retdiscard<font color="#990000">))</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font> <font color="#993399">2.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font> <font color="#993399">7.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">12.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">17.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">22.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">27.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font>
            <font color="#990000">)</font>                        
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> i <font color="#990000">&lt;=</font> <font color="#993399">0</font> <font color="#990000">||</font> <b><font color="#000000">fabs</font></b><font color="#990000">(</font>i<font color="#990000">-</font><font color="#993399">0.0</font><font color="#990000">)</font> <font color="#990000">&lt;</font> epsilon <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">!=</font><font color="#993399">5</font><font color="#990000">)</font>
            <font color="#FF0000">{</font>
              properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>xcontrol<font color="#990000">;</font>
            <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
            <font color="#FF0000">{</font>
              properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> <font color="#993399">2.5</font><font color="#990000">;</font>
            <font color="#FF0000">}</font>

            <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
          <font color="#FF0000">}</font>
                       
          <b><font color="#0000FF">while</font></b><font color="#990000">(</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>adjusttime <font color="#990000">=</font> <b><font color="#000000">adjust_to_current_time_and_expr</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>expiration_time<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>day_offset<font color="#990000">);</font>                                
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> flag2 <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              flag2 <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>

              <b><font color="#0000FF">if</font></b><font color="#990000">(</font><b><font color="#000000">modf</font></b><font color="#990000">(</font>i<font color="#990000">,&amp;</font>properties<font color="#990000">-&gt;</font>discard<font color="#990000">)!=.</font><font color="#993399">5</font><font color="#990000">)</font>
              <font color="#FF0000">{</font>
                <b><font color="#000000">move</font></b><font color="#990000">(</font>rowcounter<font color="#990000">+</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%3.3f %.*f c  "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">,</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>precision<font color="#990000">,</font>i<font color="#990000">);</font>
                                    
              <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
              <font color="#FF0000">{</font>
                <b><font color="#000000">move</font></b><font color="#990000">(</font>rowcounter<font color="#990000">+</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%3.3f %.1f c  "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">,</font>i<font color="#990000">);</font>

              <font color="#FF0000">}</font>
                                
              <b><font color="#000000">move</font></b><font color="#990000">(</font>rowcounter<font color="#990000">+</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">,</font>column<font color="#990000">);</font>
            <font color="#FF0000">}</font>

            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>modeltype <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>strike <font color="#990000">=</font> i<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>adjusttime<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>steps <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">;</font>

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCalls<font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#0000FF">struct</font></b> <font color="#008080">_data</font> optiondata<font color="#990000">;</font>

              optiondata <font color="#990000">=</font> <b><font color="#000000">option_call</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>

              <b><font color="#0000FF">if</font></b><font color="#990000">(</font> optiondata<font color="#990000">.</font>call <font color="#990000">&gt;=</font> <font color="#993399">100</font> <font color="#990000">)</font>
              <font color="#FF0000">{</font>
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">" "</font><font color="#990000">);</font>
                                
                <b><font color="#0000FF">if</font></b><font color="#990000">(</font> i <font color="#990000">&lt;=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney <font color="#990000">)</font>
                <font color="#FF0000">{</font>
                  <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
                <font color="#FF0000">}</font>
                                
                <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>precision <font color="#990000">!=</font> <font color="#993399">0</font> <font color="#990000">)</font>
                <font color="#FF0000">{</font>
                  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%3.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">1</font><font color="#990000">,</font>optiondata<font color="#990000">.</font>call<font color="#990000">);</font>
                <font color="#FF0000">}</font>
                <b><font color="#0000FF">else</font></b>
                <font color="#FF0000">{</font>
                  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%3.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>call<font color="#990000">);</font>
                <font color="#FF0000">}</font>
                <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
              
              <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
              <font color="#FF0000">{</font>                                
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">" "</font><font color="#990000">);</font>

                <b><font color="#0000FF">if</font></b><font color="#990000">(</font>i<font color="#990000">&lt;=</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney<font color="#990000">)</font>
                <font color="#FF0000">{</font>
                  <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
                <font color="#FF0000">}</font>
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%3.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>call<font color="#990000">);</font>
                <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
              <font color="#FF0000">}</font>
            <font color="#FF0000">}</font>

            properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">++;</font>

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">++</font>counter <font color="#990000">==</font> ibdacross <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
            <font color="#FF0000">}</font>
                            
            column <font color="#990000">=</font> column <font color="#990000">+</font> <font color="#993399">4</font> <font color="#990000">+</font> properties<font color="#990000">-&gt;</font>precision<font color="#990000">;</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font>rowcounter<font color="#990000">+</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">,</font>column<font color="#990000">);</font>
                            
          <font color="#FF0000">}</font> <i><font color="#9A1900">/* while */</font></i>

          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                        
          rowcounter<font color="#990000">++;</font>

          column <font color="#990000">=</font> <font color="#993399">15</font><font color="#990000">;</font>
                        
        <font color="#FF0000">}</font> <i><font color="#9A1900">/* if.. */</font></i>

        properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_time_to_expiration<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_days_to_expiration<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_expiration_month<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_expiration_year<font color="#990000">;</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> rowcounter <font color="#990000">&gt;=</font> <font color="#990000">(</font>cellrows<font color="#990000">/</font><font color="#993399">2</font><font color="#990000">)</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>
      <font color="#FF0000">}</font>
      
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>
      column <font color="#990000">=</font> <font color="#993399">15</font><font color="#990000">;</font>
                
      <i><font color="#9A1900">/* now calc the put matrix */</font></i>
      <b><font color="#0000FF">for</font></b><font color="#990000">(</font>i<font color="#990000">=(</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">+(</font><font color="#009900">int</font><font color="#990000">)</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">-</font><font color="#993399">15</font><font color="#990000">);</font>i<font color="#990000">&lt;(</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">+(</font><font color="#009900">int</font><font color="#990000">)</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">+</font><font color="#993399">200</font><font color="#990000">);</font>i<font color="#990000">+=</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>incrementor<font color="#990000">)</font>
      <font color="#FF0000">{</font>
        flag2 <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
        counter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
                    
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(((</font><font color="#009900">int</font><font color="#990000">)</font>i<font color="#990000">%</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">0</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(</font><b><font color="#000000">modf</font></b><font color="#990000">(</font>i<font color="#990000">,&amp;</font>properties<font color="#990000">-&gt;</font>discard<font color="#990000">)!=</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>retdiscard<font color="#990000">))</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font> <font color="#993399">2.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font> <font color="#993399">7.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">12.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">17.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">22.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">27.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font>
            <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> i <font color="#990000">&lt;=</font> <font color="#993399">0</font> <font color="#990000">||</font> <b><font color="#000000">fabs</font></b><font color="#990000">(</font>i<font color="#990000">-</font><font color="#993399">0.0</font><font color="#990000">)</font> <font color="#990000">&lt;</font> epsilon <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1 <font color="#990000">!=</font> <font color="#993399">5</font> <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>xcontrol<font color="#990000">;</font>
            <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
            <font color="#FF0000">{</font>
              properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> <font color="#993399">2.5</font><font color="#990000">;</font>
            <font color="#FF0000">}</font>

            <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
          <font color="#FF0000">}</font>
                       
          <b><font color="#0000FF">while</font></b><font color="#990000">(</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>adjusttime <font color="#990000">=</font> <b><font color="#000000">adjust_to_current_time_and_expr</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>expiration_time<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>day_offset<font color="#990000">);</font>                                
                            
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> flag2 <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              flag2 <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>

              <b><font color="#0000FF">if</font></b><font color="#990000">(</font><b><font color="#000000">modf</font></b><font color="#990000">(</font>i<font color="#990000">,&amp;</font>properties<font color="#990000">-&gt;</font>discard<font color="#990000">)!=.</font><font color="#993399">5</font><font color="#990000">)</font>
              <font color="#FF0000">{</font>
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%3.3f %.*f p"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">,</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>precision<font color="#990000">,</font>i<font color="#990000">);</font>
                                    
              <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
              <font color="#FF0000">{</font>
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%3.3f %.1f p"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">,</font>i<font color="#990000">);</font>
              <font color="#FF0000">}</font>
              <b><font color="#000000">move</font></b><font color="#990000">(</font>rowcounter<font color="#990000">+</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">,</font>column<font color="#990000">);</font>

            <font color="#FF0000">}</font>

            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>modeltype <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>strike <font color="#990000">=</font> i<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>adjusttime<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>steps <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">;</font>

            <b><font color="#0000FF">struct</font></b> <font color="#008080">_data</font> optiondata<font color="#990000">;</font>

            optiondata <font color="#990000">=</font> <b><font color="#000000">option_put</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> optiondata<font color="#990000">.</font>put <font color="#990000">&gt;=</font> <font color="#993399">100</font> <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">" "</font><font color="#990000">);</font>

              <b><font color="#0000FF">if</font></b><font color="#990000">(</font> i <font color="#990000">&gt;=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney <font color="#990000">)</font>
              <font color="#FF0000">{</font>
                <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
              <font color="#FF0000">}</font>
              <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>precision <font color="#990000">!=</font> <font color="#993399">0</font> <font color="#990000">)</font>
              <font color="#FF0000">{</font>
                <b><font color="#0000FF">if</font></b><font color="#990000">(</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportPuts<font color="#990000">)</font>
                <font color="#FF0000">{</font>
                  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%3.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">1</font><font color="#990000">,</font>optiondata<font color="#990000">.</font>put<font color="#990000">);</font>
                <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
                <font color="#FF0000">{</font>
                  <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
                  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font><font color="#FF0000">" "</font><font color="#990000">);</font>
                <font color="#FF0000">}</font>

              <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
              <font color="#FF0000">{</font>
                <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportPuts <font color="#990000">)</font>
                <font color="#FF0000">{</font>
                  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%3.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>put<font color="#990000">);</font>
                <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
                <font color="#FF0000">{</font>
                  <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
                  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font><font color="#FF0000">" "</font><font color="#990000">);</font>
                <font color="#FF0000">}</font>

              <font color="#FF0000">}</font>
              <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>

            <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
            <font color="#FF0000">{</font>
              <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">" "</font><font color="#990000">);</font>
              
              <b><font color="#0000FF">if</font></b><font color="#990000">(</font> i <font color="#990000">&gt;=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney <font color="#990000">)</font>
              <font color="#FF0000">{</font>
                <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
              <font color="#FF0000">}</font>
              <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportPuts <font color="#990000">)</font>
              <font color="#FF0000">{</font>
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%3.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>put<font color="#990000">);</font>

              <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
              <font color="#FF0000">{</font>
                <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font><font color="#FF0000">" "</font><font color="#990000">);</font>
              <font color="#FF0000">}</font>

              <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
            <font color="#FF0000">}</font>
                           
            properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">++;</font>
                            
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">++</font>counter <font color="#990000">==</font> ibdacross <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
            <font color="#FF0000">}</font>

            column <font color="#990000">=</font> column <font color="#990000">+</font> <font color="#993399">4</font> <font color="#990000">+</font> properties<font color="#990000">-&gt;</font>precision<font color="#990000">;</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font>rowcounter<font color="#990000">+</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">,</font>column<font color="#990000">);</font>
                            
          <font color="#FF0000">}</font> <i><font color="#9A1900">/* while */</font></i>

          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

          rowcounter<font color="#990000">++;</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>
          column <font color="#990000">=</font> <font color="#993399">15</font><font color="#990000">;</font>

        <font color="#FF0000">}</font> <i><font color="#9A1900">/* if(...) */</font></i>

        properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_time_to_expiration<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_days_to_expiration<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_expiration_month<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_expiration_year<font color="#990000">;</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> rowcounter <font color="#990000">&gt;</font> cellrows <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>
                        
      <font color="#FF0000">}</font> <i><font color="#9A1900">/* for.. */</font></i>

      <b><font color="#000000">move</font></b><font color="#990000">(</font>endingbarrier<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
    <font color="#FF0000">}</font>
    
    <i><font color="#9A1900">/*********************************************************/</font></i>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> CALENDAR_CUSTOM <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>isnan <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

      <i><font color="#9A1900">/* clear the screen where the matrix other formats leave</font></i>
<i><font color="#9A1900">         stuff behind */</font></i>
      <font color="#009900">int</font> row<font color="#990000">;</font>
      <b><font color="#0000FF">for</font></b><font color="#990000">(</font> row <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">;</font> row <font color="#990000">&lt;=</font> endingbarrier<font color="#990000">;</font> <font color="#990000">++</font>row <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>row<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>  <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <font color="#FF0000">}</font>

      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"stock  %-6s %-*s"</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>strike<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>call<font color="#990000">);</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font><font color="#993399">23</font><font color="#990000">+</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>put<font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"  days to exp. exp. date call delta  tickers"</font><font color="#990000">);</font>
      
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"-----  ------ %-*s "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"----"</font><font color="#990000">);</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">23</font><font color="#990000">+</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%-*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">"---"</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"  -----------  --------- ----------  -------"</font><font color="#990000">);</font>                
      
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
      <font color="#009900">int</font> counter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

      <b><font color="#0000FF">while</font></b><font color="#990000">(</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        
        properties<font color="#990000">-&gt;</font>adjusttime <font color="#990000">=</font> <b><font color="#000000">adjust_to_current_time_and_expr</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>expiration_time<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>day_offset<font color="#990000">);</font>                                

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> counter <font color="#990000">&gt;</font> cellrows <font color="#990000">)</font>
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>

        <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">+</font>counter<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>modeltype <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>strike <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>customstrike<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>adjusttime<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>steps <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">;</font>
                    
        <b><font color="#0000FF">struct</font></b> <font color="#008080">_data</font> optiondata<font color="#990000">;</font>

        optiondata <font color="#990000">=</font> <b><font color="#000000">option_call</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>
        optiondata <font color="#990000">=</font> <b><font color="#000000">option_put</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>
        
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%.3f %.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>customstrike<font color="#990000">);</font>

        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">" "</font><font color="#990000">);</font>
                    
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>customstrike <font color="#990000">&lt;=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
        <font color="#FF0000">}</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCalls <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>call<font color="#990000">);</font>

        <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
        <font color="#FF0000">{</font>
          <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font><font color="#FF0000">" "</font><font color="#990000">);</font>
        <font color="#FF0000">}</font>
        <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
                    
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"  "</font><font color="#990000">);</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>customstrike <font color="#990000">&gt;=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
        <font color="#FF0000">}</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportPuts <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>put<font color="#990000">);</font>
        <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
        <font color="#FF0000">{</font>
          <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%*s"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font><font color="#FF0000">" "</font><font color="#990000">);</font>
        <font color="#FF0000">}</font>

        <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
                    
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"  %4d       %s%2d %02.0f  "</font><font color="#990000">,(*</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">-</font>properties<font color="#990000">-&gt;</font>day_offset_counter<font color="#990000">),</font>mon<font color="#990000">[*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">],*</font>properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">,(</font><font color="#009900">double</font><font color="#990000">)</font> <font color="#990000">*</font>properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">);</font>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>produceCallDelta <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
        <font color="#FF0000">{</font>                           
          optiondata <font color="#990000">=</font> <b><font color="#000000">option_call_delta</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>

          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>calldelta<font color="#990000">);</font>

        <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
        <font color="#FF0000">{</font>
          <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"        "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>calldelta<font color="#990000">);</font>
        <font color="#FF0000">}</font>

        <i><font color="#9A1900">/* print the tickers */</font></i>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportStrikes <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCalls <font color="#990000">)</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"   %s%c"</font><font color="#990000">,</font>option_calls<font color="#990000">[*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">],(</font><font color="#009900">char</font><font color="#990000">)</font> <b><font color="#000000">strike_price_codes</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>customstrike<font color="#990000">));</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportPuts <font color="#990000">)</font>
            <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"  %s%c"</font><font color="#990000">,</font>option_puts<font color="#990000">[*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">],(</font><font color="#009900">char</font><font color="#990000">)</font> <b><font color="#000000">strike_price_codes</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>customstrike<font color="#990000">));</font>
        <font color="#FF0000">}</font>

        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>
                    
        counter<font color="#990000">++;</font>

        properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">++;</font>
      <font color="#FF0000">}</font>
    <font color="#FF0000">}</font>
            
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> DECIMAL_FUTURE<font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(!</font><b><font color="#000000">DoWeHaveFutures</font></b><font color="#990000">(</font>properties<font color="#990000">))</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">clear</font></b><font color="#990000">();</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Futures decimal dated screen # 1 not implemented.</font><font color="#CC33CC">\n</font><font color="#FF0000">Futures model not defined.</font><font color="#CC33CC">\n\n\n</font><font color="#FF0000">"</font><font color="#990000">);</font>

        <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Press TAB to continue"</font><font color="#990000">);</font>
        <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
        <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

        <b><font color="#0000FF">return</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
      <i><font color="#9A1900">/* clear the screen where the matrix other formats leave</font></i>
<i><font color="#9A1900">         stuff behind */</font></i>
      <font color="#009900">int</font> row<font color="#990000">;</font>
      <b><font color="#0000FF">for</font></b><font color="#990000">(</font> row <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>start<font color="#990000">;</font> row <font color="#990000">&lt;=</font> endingbarrier<font color="#990000">;</font> <font color="#990000">++</font>row <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>row<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>  <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <font color="#FF0000">}</font>

      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

      properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>modeltype <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">;</font>
      
      <b><font color="#0000FF">struct</font></b> <font color="#008080">_data</font> optiondata<font color="#990000">;</font>

      optiondata <font color="#990000">=</font> <b><font color="#000000">future</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>

      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Spot Price           = %.*f</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Futures Price        = %.*f (%s)</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>future<font color="#990000">,(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>future<font color="#990000">&gt;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">?</font><font color="#FF0000">"Cotango"</font><font color="#990000">:</font><font color="#FF0000">"Backwardation"</font><font color="#990000">));</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Interest rate        = %.2f%%</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate<font color="#990000">*</font><font color="#993399">100</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Basis                = %.*f</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">-</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>future<font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Days to expr         = %.*f</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,(</font><font color="#993399">365</font><font color="#990000">*(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]-</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>te<font color="#990000">)));</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Time to expr         = %.*f</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]-</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>te<font color="#990000">);</font>

      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Expiration date      = %s</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font><b><font color="#000000">decimal_date_to_real_date</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]-</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>te<font color="#990000">));</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Ticker               = %s%02d"</font><font color="#990000">,</font>future_codes<font color="#990000">[</font><b><font color="#000000">decimal_date_to_int_month</font></b><font color="#990000">(</font><b><font color="#000000">adjust_to_current_time</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]-</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>te<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">))],</font><b><font color="#000000">decimal_date_to_int_year</font></b><font color="#990000">(</font><b><font color="#000000">adjust_to_current_time</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]-</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>te<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">)));</font>

      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"</font><font color="#CC33CC">\n\n\n\t\t</font><font color="#FF0000">"</font><font color="#990000">);</font>
      <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Press 2"</font><font color="#990000">);</font>
      <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">" to switch to date by calendar"</font><font color="#990000">);</font>

      <b><font color="#000000">move</font></b><font color="#990000">(</font>endingbarrier<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"------------------------------------------------------------------------------</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>endingbarrier<font color="#990000">,</font><font color="#993399">82</font><font color="#990000">/</font><font color="#993399">2</font><font color="#990000">-</font><b><font color="#000000">strlen</font></b><font color="#990000">(</font><font color="#FF0000">"Futures"</font><font color="#990000">)/</font><font color="#993399">2</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Futures"</font><font color="#990000">);</font>

    <font color="#FF0000">}</font>

    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format<font color="#990000">==</font>CALENDAR_FUTURE <font color="#990000">||</font> 
        properties<font color="#990000">-&gt;</font>demotype<font color="#990000">==</font>CALENDAR_FUTURE <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(!</font><b><font color="#000000">DoWeHaveFutures</font></b><font color="#990000">(</font>properties<font color="#990000">))</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">clear</font></b><font color="#990000">();</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Futures calendar dated screen # 2 not implemented.</font><font color="#CC33CC">\n</font><font color="#FF0000">Futures model not defined.</font><font color="#CC33CC">\n\n\n</font><font color="#FF0000">"</font><font color="#990000">);</font>
        <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Press TAB to continue"</font><font color="#990000">);</font>
        <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>

        <b><font color="#000000">refresh</font></b><font color="#990000">();</font>

        <b><font color="#0000FF">return</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>

      <i><font color="#9A1900">/* clear the screen where the matrix other formats leave</font></i>
<i><font color="#9A1900">         stuff behind */</font></i>
      <font color="#009900">int</font> row<font color="#990000">;</font>
      <b><font color="#0000FF">for</font></b><font color="#990000">(</font> row <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>start<font color="#990000">;</font> row <font color="#990000">&lt;=</font> endingbarrier<font color="#990000">;</font> <font color="#990000">++</font>row <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>row<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>  <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <font color="#FF0000">}</font>
                
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
      <font color="#009900">int</font> counter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      <font color="#009900">int</font> counter2 <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">;</font>

      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"  Expiration Days to Price               Expiration Days to Price</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"  ---------- ------- -----               ---------- ------- -----</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"  Spot           0   %.*f</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">);</font> 

      <b><font color="#0000FF">while</font></b><font color="#990000">(</font> <font color="#990000">(*</font>future_properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>future_properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>future_properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>future_properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font>counter<font color="#990000">&gt;</font>cellrows<font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font>counter<font color="#990000">&gt;(</font>cellrows<font color="#990000">*</font><font color="#993399">2</font><font color="#990000">))</font>
          <font color="#FF0000">{</font>
            <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
          <font color="#FF0000">}</font>
          <b><font color="#000000">move</font></b><font color="#990000">(</font>counter2<font color="#990000">++,</font><font color="#993399">39</font><font color="#990000">);</font>
        <font color="#FF0000">}</font>

        future_properties<font color="#990000">-&gt;</font>adjusttime <font color="#990000">=</font> <b><font color="#000000">adjust_to_current_time_and_expr</font></b><font color="#990000">(</font>future_properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">,</font>future_properties<font color="#990000">-&gt;</font>expiration_time<font color="#990000">,</font>future_properties<font color="#990000">-&gt;</font>day_offset<font color="#990000">);</font>                                
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>modeltype <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> future_properties<font color="#990000">-&gt;</font>adjusttime<font color="#990000">;</font>
        <b><font color="#0000FF">struct</font></b> <font color="#008080">_data</font> optiondata<font color="#990000">;</font>
        optiondata <font color="#990000">=</font> <b><font color="#000000">future</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>

        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s %s%2d %02.0f    %4d   %.*f</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>future_codes<font color="#990000">[*</font>future_properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">],</font>mon<font color="#990000">[*</font>future_properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">],*</font>future_properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">,(</font><font color="#009900">double</font><font color="#990000">)*</font>future_properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">,(*</font>future_properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">-</font>future_properties<font color="#990000">-&gt;</font>day_offset_counter<font color="#990000">),</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>future<font color="#990000">);</font>

        future_properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">++;</font>  future_properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">++;</font>  future_properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">++;</font>  future_properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">++;</font>

        counter<font color="#990000">++;</font>
      <font color="#FF0000">}</font>
      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>demotype <font color="#990000">!=</font> CALENDAR_FUTURE <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">21</font><font color="#990000">,</font><font color="#993399">39</font><font color="#990000">);</font>
        <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Press 1"</font><font color="#990000">);</font>
        <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">" to switch to decimal dating"</font><font color="#990000">);</font>
      <font color="#FF0000">}</font>

      <b><font color="#000000">move</font></b><font color="#990000">(</font>endingbarrier<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"------------------------------------------------------------------------------</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>endingbarrier<font color="#990000">,</font><font color="#993399">82</font><font color="#990000">/</font><font color="#993399">2</font><font color="#990000">-</font><b><font color="#000000">strlen</font></b><font color="#990000">(</font><font color="#FF0000">"Futures"</font><font color="#990000">)/</font><font color="#993399">2</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Futures"</font><font color="#990000">);</font>

    <font color="#FF0000">}</font>

    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> CALENDAR_OPTIONS6 <font color="#990000">||</font> properties<font color="#990000">-&gt;</font>demotype <font color="#990000">==</font> CALENDAR_OPTIONS6 <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>isnan <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

      <font color="#009900">int</font> columnbreak <font color="#990000">=</font> <font color="#993399">3</font><font color="#990000">;</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>precision <font color="#990000">&gt;=</font> <font color="#993399">8</font> <font color="#990000">)</font>
        columnbreak <font color="#990000">=</font> <font color="#993399">2</font><font color="#990000">;</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>precision <font color="#990000">&gt;=</font> <font color="#993399">12</font> <font color="#990000">)</font>
        columnbreak <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>precision <font color="#990000">&lt;=</font> <font color="#993399">4</font> <font color="#990000">)</font>
        columnbreak <font color="#990000">=</font> <font color="#993399">4</font><font color="#990000">;</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>precision <font color="#990000">&lt;=</font> <font color="#993399">2</font> <font color="#990000">)</font>
        columnbreak <font color="#990000">=</font> <font color="#993399">5</font><font color="#990000">;</font>

      <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>precision <font color="#990000">&lt;=</font> <font color="#993399">1</font> <font color="#990000">)</font>
        columnbreak <font color="#990000">=</font> <font color="#993399">6</font><font color="#990000">;</font>

      <i><font color="#9A1900">/* clear the screen where the matrix other properties-&gt;formats leave</font></i>
<i><font color="#9A1900">         stuff behind */</font></i>
      <font color="#009900">int</font> row<font color="#990000">;</font>
      <b><font color="#0000FF">for</font></b><font color="#990000">(</font> row <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>start<font color="#990000">;</font> row <font color="#990000">&lt;=</font> endingbarrier<font color="#990000">;</font> <font color="#990000">++</font>row <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>row<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>  <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <font color="#FF0000">}</font>

      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font> <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"stock  %-6s</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>strike<font color="#990000">);</font> 
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"-----  ------</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">);</font>

      <font color="#009900">int</font> counter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      <font color="#009900">int</font> column <font color="#990000">=</font> <font color="#993399">14</font><font color="#990000">;</font>
      <font color="#009900">int</font> flag2 <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

      <b><font color="#0000FF">while</font></b><font color="#990000">(</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">!=-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">!=-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">!=-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font>column<font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">" %s%2d %02.0f"</font><font color="#990000">,</font>mon<font color="#990000">[*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">],*</font>properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">,(</font><font color="#009900">double</font><font color="#990000">)*</font>properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                    
        properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">++;</font> properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">++;</font> properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">++;</font>

        column <font color="#990000">=</font> column <font color="#990000">+</font> <font color="#993399">8</font> <font color="#990000">+</font> properties<font color="#990000">-&gt;</font>precision <font color="#990000">-</font> <font color="#993399">4</font><font color="#990000">;</font>
        
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">++</font>counter <font color="#990000">==</font> columnbreak <font color="#990000">)</font>
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>

      column <font color="#990000">=</font> <font color="#993399">14</font><font color="#990000">;</font>

      <b><font color="#0000FF">while</font></b><font color="#990000">(</font> counter <font color="#990000">!=</font> <font color="#993399">0</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">,</font>column<font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">" --------"</font><font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

        column <font color="#990000">=</font> column <font color="#990000">+</font> <font color="#993399">4</font> <font color="#990000">+</font> properties<font color="#990000">-&gt;</font>precision<font color="#990000">;</font>
        counter<font color="#990000">--;</font>
      <font color="#FF0000">}</font>
                
      <i><font color="#9A1900">/* reset pointers */</font></i>
      properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_expiration_month<font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_days_to_expiration<font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_expiration_year<font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_time_to_expiration<font color="#990000">;</font>
      
      <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
      <i><font color="#9A1900">//printw("                          Calls                           Puts");</font></i>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"                          %-5s                           %-4s"</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>call<font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>put<font color="#990000">);</font>

      <font color="#009900">int</font> rowcounter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      column <font color="#990000">=</font> <font color="#993399">14</font><font color="#990000">;</font>

      <font color="#009900">double</font> epsilon <font color="#990000">=</font> <font color="#990000">(</font><font color="#009900">double</font><font color="#990000">)</font> <font color="#993399">1</font> <font color="#990000">/</font> <b><font color="#000000">pow</font></b><font color="#990000">(</font><font color="#993399">10.0</font><font color="#990000">,(</font><font color="#009900">double</font><font color="#990000">)</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>precision<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">);</font>

      <font color="#009900">double</font> i<font color="#990000">;</font>
      <b><font color="#0000FF">for</font></b><font color="#990000">(</font>i<font color="#990000">=(</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">+(</font><font color="#009900">int</font><font color="#990000">)</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">-</font><font color="#993399">15</font><font color="#990000">);</font>i<font color="#990000">&lt;(</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">+(</font><font color="#009900">int</font><font color="#990000">)</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">+</font><font color="#993399">200</font><font color="#990000">);</font>i<font color="#990000">+=</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>incrementor<font color="#990000">)</font>
      <font color="#FF0000">{</font>
        flag2 <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
        counter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
                    
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(((</font><font color="#009900">int</font><font color="#990000">)</font>i<font color="#990000">%</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">0</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(</font><b><font color="#000000">modf</font></b><font color="#990000">(</font>i<font color="#990000">,&amp;</font>properties<font color="#990000">-&gt;</font>discard<font color="#990000">)!=</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>retdiscard<font color="#990000">))</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font> <font color="#993399">2.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font> <font color="#993399">7.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">12.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">17.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">22.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">27.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font>
            <font color="#990000">)</font>                        
        <font color="#FF0000">{</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> i <font color="#990000">&lt;=</font> <font color="#993399">0</font> <font color="#990000">||</font> <b><font color="#000000">fabs</font></b><font color="#990000">(</font>i<font color="#990000">-</font><font color="#993399">0.0</font><font color="#990000">)</font> <font color="#990000">&lt;</font> epsilon <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">!=</font><font color="#993399">5</font><font color="#990000">)</font>
            <font color="#FF0000">{</font>
              properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>xcontrol<font color="#990000">;</font>
            <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
            <font color="#FF0000">{</font>
              properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> <font color="#993399">2.5</font><font color="#990000">;</font>
            <font color="#FF0000">}</font>

            <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
          <font color="#FF0000">}</font>

          <i><font color="#9A1900">/* calc the call matrix */</font></i>
          <b><font color="#0000FF">while</font></b><font color="#990000">(</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            properties<font color="#990000">-&gt;</font>adjusttime <font color="#990000">=</font> <b><font color="#000000">adjust_to_current_time_and_expr</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>expiration_time<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>day_offset<font color="#990000">);</font>                                

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> flag2 <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              flag2 <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>

              <b><font color="#0000FF">if</font></b><font color="#990000">(</font><b><font color="#000000">modf</font></b><font color="#990000">(</font>i<font color="#990000">,&amp;</font>properties<font color="#990000">-&gt;</font>discard<font color="#990000">)!=.</font><font color="#993399">5</font><font color="#990000">)</font>
              <font color="#FF0000">{</font>
                <b><font color="#000000">move</font></b><font color="#990000">(</font>rowcounter<font color="#990000">+</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%3.3f %.*f   "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">,</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>precision<font color="#990000">,</font>i<font color="#990000">);</font>
                                    
              <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
              <font color="#FF0000">{</font>
                <b><font color="#000000">move</font></b><font color="#990000">(</font>rowcounter<font color="#990000">+</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%3.3f %.1f   "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">,</font>i<font color="#990000">);</font>

              <font color="#FF0000">}</font>
                                
              <b><font color="#000000">move</font></b><font color="#990000">(</font>rowcounter<font color="#990000">+</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font>column<font color="#990000">);</font>
            <font color="#FF0000">}</font>

            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>modeltype <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>strike <font color="#990000">=</font> i<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>adjusttime<font color="#990000">;</font>
            properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>steps <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">;</font>

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCalls <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#0000FF">struct</font></b> <font color="#008080">_data</font> optiondata<font color="#990000">;</font>

              optiondata <font color="#990000">=</font> <b><font color="#000000">option_call</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>

              <b><font color="#0000FF">if</font></b><font color="#990000">(</font> optiondata<font color="#990000">.</font>call <font color="#990000">&gt;=</font> <font color="#993399">100</font> <font color="#990000">)</font>
              <font color="#FF0000">{</font>
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">" "</font><font color="#990000">);</font>
                                
                <b><font color="#0000FF">if</font></b><font color="#990000">(</font>i<font color="#990000">&lt;=</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney<font color="#990000">)</font>
                <font color="#FF0000">{</font>
                  <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
                <font color="#FF0000">}</font>
                                
                <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>precision <font color="#990000">!=</font> <font color="#993399">0</font> <font color="#990000">)</font>
                <font color="#FF0000">{</font>
                  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%3.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">1</font><font color="#990000">,</font>optiondata<font color="#990000">.</font>call<font color="#990000">);</font>
                <font color="#FF0000">}</font>
                <b><font color="#0000FF">else</font></b>
                <font color="#FF0000">{</font>
                  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%3.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>call<font color="#990000">);</font>
                <font color="#FF0000">}</font>
                <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
              
              <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
              <font color="#FF0000">{</font>                                
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">" "</font><font color="#990000">);</font>

                <b><font color="#0000FF">if</font></b><font color="#990000">(</font> i <font color="#990000">&lt;=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney <font color="#990000">)</font>
                <font color="#FF0000">{</font>
                  <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
                <font color="#FF0000">}</font>

                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%3.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>call<font color="#990000">);</font>
                <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
              <font color="#FF0000">}</font>
            <font color="#FF0000">}</font>

            properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">++;</font>

            <i><font color="#9A1900">// columnbreak for call</font></i>
            <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">++</font>counter <font color="#990000">==</font> columnbreak <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
            <font color="#FF0000">}</font>
                            
            column <font color="#990000">=</font> column <font color="#990000">+</font> <font color="#993399">4</font> <font color="#990000">+</font> properties<font color="#990000">-&gt;</font>precision<font color="#990000">;</font>
            <b><font color="#000000">move</font></b><font color="#990000">(</font>rowcounter<font color="#990000">+</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font>column<font color="#990000">);</font>
                            
          <font color="#FF0000">}</font> <i><font color="#9A1900">/* while */</font></i>

          <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                        
          rowcounter<font color="#990000">++;</font>

          column <font color="#990000">=</font> <font color="#993399">14</font><font color="#990000">;</font>
                        
        <font color="#FF0000">}</font> <i><font color="#9A1900">/* if.. */</font></i>

        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> rowcounter <font color="#990000">&gt;=</font> cellrows <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>

        properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_time_to_expiration<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_days_to_expiration<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_expiration_month<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_expiration_year<font color="#990000">;</font>

      <font color="#FF0000">}</font>
      <i><font color="#9A1900">/***********************************************************************/</font></i>

      rowcounter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
      column <font color="#990000">=</font> <font color="#993399">47</font><font color="#990000">;</font>
      counter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

      epsilon <font color="#990000">=</font> <font color="#990000">(</font><font color="#009900">double</font><font color="#990000">)</font> <font color="#993399">1</font> <font color="#990000">/</font> <b><font color="#000000">pow</font></b><font color="#990000">(</font><font color="#993399">10.0</font><font color="#990000">,(</font><font color="#009900">double</font><font color="#990000">)</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>precision<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">);</font>

      <i><font color="#9A1900">/* reset pointers */</font></i>
      properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_expiration_month<font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_days_to_expiration<font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_expiration_year<font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_time_to_expiration<font color="#990000">;</font>

      <i><font color="#9A1900">/* calc the put matrix */</font></i>
      <b><font color="#0000FF">while</font></b><font color="#990000">(</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">!=-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">!=-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">!=-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font>column<font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s%2d %02.0f"</font><font color="#990000">,</font>mon<font color="#990000">[*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">],*</font>properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">,(</font><font color="#009900">double</font><font color="#990000">)*</font>properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">);</font>
        <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                    
        properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">++;</font>

        column <font color="#990000">=</font> column <font color="#990000">+</font> <font color="#993399">8</font> <font color="#990000">+</font> properties<font color="#990000">-&gt;</font>precision <font color="#990000">-</font> <font color="#993399">4</font><font color="#990000">;</font>
        
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">++</font>counter <font color="#990000">==</font> columnbreak <font color="#990000">)</font>
        <font color="#FF0000">{</font>
          <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
        <font color="#FF0000">}</font>
      <font color="#FF0000">}</font>
      <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

      column <font color="#990000">=</font> <font color="#993399">46</font><font color="#990000">;</font>
      <b><font color="#0000FF">while</font></b><font color="#990000">(</font> counter <font color="#990000">!=</font> <font color="#993399">0</font> <font color="#990000">)</font>
      <font color="#FF0000">{</font>
        <b><font color="#000000">move</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">,</font>column<font color="#990000">);</font>
        <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">" --------"</font><font color="#990000">);</font>

        column <font color="#990000">=</font> column <font color="#990000">+</font> <font color="#993399">4</font> <font color="#990000">+</font> properties<font color="#990000">-&gt;</font>precision<font color="#990000">;</font>
        counter<font color="#990000">--;</font>
      <font color="#FF0000">}</font>
      <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                
      <i><font color="#9A1900">/* reset pointers */</font></i>
      properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_expiration_month<font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_days_to_expiration<font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_expiration_year<font color="#990000">;</font>
      properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_time_to_expiration<font color="#990000">;</font>

      column <font color="#990000">=</font> <font color="#993399">46</font><font color="#990000">;</font>

      <i><font color="#9A1900">/* calc the put matrix */</font></i>
      <b><font color="#0000FF">for</font></b><font color="#990000">(</font>i<font color="#990000">=(</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">+(</font><font color="#009900">int</font><font color="#990000">)</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">-</font><font color="#993399">15</font><font color="#990000">);</font>i<font color="#990000">&lt;(</font>properties<font color="#990000">-&gt;</font>strike_offset<font color="#990000">+(</font><font color="#009900">int</font><font color="#990000">)</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">+</font><font color="#993399">200</font><font color="#990000">);</font>i<font color="#990000">+=</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>incrementor<font color="#990000">)</font>
      <font color="#FF0000">{</font>
        flag2 <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
        counter <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
                    
        <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">(((</font><font color="#009900">int</font><font color="#990000">)</font>i<font color="#990000">%</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">0</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(</font><b><font color="#000000">modf</font></b><font color="#990000">(</font>i<font color="#990000">,&amp;</font>properties<font color="#990000">-&gt;</font>discard<font color="#990000">)!=</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>retdiscard<font color="#990000">))</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font> <font color="#993399">2.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font> <font color="#993399">7.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">12.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">17.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">22.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font> <font color="#990000">||</font>
            <font color="#990000">((</font>i<font color="#990000">==</font><font color="#993399">27.5</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">==</font><font color="#993399">5</font><font color="#990000">)</font>
            <font color="#990000">)</font>                        
        <font color="#FF0000">{</font>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> i <font color="#990000">&lt;=</font> <font color="#993399">0</font> <font color="#990000">||</font> <b><font color="#000000">fabs</font></b><font color="#990000">(</font>i<font color="#990000">-</font><font color="#993399">0.0</font><font color="#990000">)</font> <font color="#990000">&lt;</font> epsilon <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>

            <b><font color="#0000FF">if</font></b><font color="#990000">(</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>strikes5or1<font color="#990000">!=</font><font color="#993399">5</font><font color="#990000">)</font>
            <font color="#FF0000">{</font>
              properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>xcontrol<font color="#990000">;</font>
            <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
            <font color="#FF0000">{</font>
              properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>strike_offset <font color="#990000">+</font> <font color="#993399">2.5</font><font color="#990000">;</font>
            <font color="#FF0000">}</font>

            <b><font color="#0000FF">continue</font></b><font color="#990000">;</font>
          <font color="#FF0000">}</font>
          <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportPuts <font color="#990000">)</font>
          <font color="#FF0000">{</font>
            <b><font color="#0000FF">while</font></b><font color="#990000">(</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">(*</font>properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">!=</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font> <font color="#990000">)</font>
            <font color="#FF0000">{</font>
              properties<font color="#990000">-&gt;</font>adjusttime <font color="#990000">=</font> <b><font color="#000000">adjust_to_current_time_and_expr</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>expiration_time<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>day_offset<font color="#990000">);</font>                                

              <b><font color="#0000FF">if</font></b><font color="#990000">(</font> flag2 <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
              <font color="#FF0000">{</font>
                flag2 <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>

                <b><font color="#000000">move</font></b><font color="#990000">(</font>rowcounter<font color="#990000">+</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font>column<font color="#990000">);</font>
              <font color="#FF0000">}</font>

              properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>modeltype <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">;</font>
              properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>strike <font color="#990000">=</font> i<font color="#990000">;</font>
              properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> properties<font color="#990000">-&gt;</font>adjusttime<font color="#990000">;</font>
              properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>steps <font color="#990000">=</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">;</font>

              <b><font color="#0000FF">struct</font></b> <font color="#008080">_data</font> optiondata<font color="#990000">;</font>

              optiondata <font color="#990000">=</font> <b><font color="#000000">option_put</font></b><font color="#990000">(&amp;</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">);</font>

              <b><font color="#0000FF">if</font></b><font color="#990000">(</font> optiondata<font color="#990000">.</font>put <font color="#990000">&gt;=</font> <font color="#993399">100</font> <font color="#990000">)</font>
              <font color="#FF0000">{</font>
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">" "</font><font color="#990000">);</font>
                                
                <b><font color="#0000FF">if</font></b><font color="#990000">(</font> i <font color="#990000">&gt;=</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney <font color="#990000">)</font>
                <font color="#FF0000">{</font>
                  <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
                <font color="#FF0000">}</font>
                                
                <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>precision <font color="#990000">!=</font> <font color="#993399">0</font> <font color="#990000">)</font>
                <font color="#FF0000">{</font>
                  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%3.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">1</font><font color="#990000">,</font>optiondata<font color="#990000">.</font>put<font color="#990000">);</font>
                <font color="#FF0000">}</font>
                <b><font color="#0000FF">else</font></b>
                <font color="#FF0000">{</font>
                  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%3.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>put<font color="#990000">);</font>
                <font color="#FF0000">}</font>
                <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
              
              <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
              <font color="#FF0000">{</font>                                
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">" "</font><font color="#990000">);</font>

                <b><font color="#0000FF">if</font></b><font color="#990000">(</font>i<font color="#990000">&gt;=</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price <font color="#990000">&amp;&amp;</font> properties<font color="#990000">-&gt;</font>highlightInTheMoney<font color="#990000">)</font>
                <font color="#FF0000">{</font>
                  <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
                <font color="#FF0000">}</font>
                <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%3.*f"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">,</font>optiondata<font color="#990000">.</font>put<font color="#990000">);</font>
                <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
              <font color="#FF0000">}</font>

              properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">++;</font>  properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">++;</font>

              <i><font color="#9A1900">// columnbreak for put</font></i>
              <b><font color="#0000FF">if</font></b><font color="#990000">(</font> <font color="#990000">++</font>counter <font color="#990000">==</font> columnbreak <font color="#990000">)</font>
              <font color="#FF0000">{</font>
                <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
              <font color="#FF0000">}</font>
                            
              column <font color="#990000">=</font> column <font color="#990000">+</font> <font color="#993399">4</font> <font color="#990000">+</font> properties<font color="#990000">-&gt;</font>precision<font color="#990000">;</font>
              <b><font color="#000000">move</font></b><font color="#990000">(</font>rowcounter<font color="#990000">+</font>properties<font color="#990000">-&gt;</font>start<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font>column<font color="#990000">);</font>
                            
            <font color="#FF0000">}</font> <i><font color="#9A1900">/* while */</font></i>

            <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
                        
            rowcounter<font color="#990000">++;</font>

            column <font color="#990000">=</font> <font color="#993399">46</font><font color="#990000">;</font>
                        
          <font color="#FF0000">}</font> <i><font color="#9A1900">/* if.. */</font></i>

          <b><font color="#0000FF">if</font></b><font color="#990000">(</font>rowcounter<font color="#990000">&gt;=</font>cellrows<font color="#990000">)</font>
          <font color="#FF0000">{</font>
              <b><font color="#0000FF">break</font></b><font color="#990000">;</font>
          <font color="#FF0000">}</font>
        <font color="#FF0000">}</font>

        properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_time_to_expiration<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_days_to_expiration<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_expiration_month<font color="#990000">;</font>
        properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_expiration_year<font color="#990000">;</font>

      <font color="#FF0000">}</font>

      <i><font color="#9A1900">/***********************************************************************/</font></i>

    <font color="#FF0000">}</font>
    <i><font color="#9A1900">/*********************************************************/</font></i>

    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>isnan <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <i><font color="#9A1900">// "nan" not a number detected, instructions should be given to the user to</font></i>
      <i><font color="#9A1900">// adjust t2 forward to get rid of nans or give model divided...</font></i>
      <i><font color="#9A1900">// probably have a "[ ] do not show again" popup with these instructions</font></i>
      <i><font color="#9A1900">// in the gtk version of optionmatrix</font></i>
    <font color="#FF0000">}</font>

    properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_time_to_expiration<font color="#990000">;</font>
    properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_days_to_expiration<font color="#990000">;</font>
    properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_expiration_month<font color="#990000">;</font>
    properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">=</font>properties<font color="#990000">-&gt;</font>start_expiration_year<font color="#990000">;</font>
    
    future_properties<font color="#990000">-&gt;</font>time_to_expiration<font color="#990000">=</font>future_properties<font color="#990000">-&gt;</font>start_time_to_expiration<font color="#990000">;</font>
    future_properties<font color="#990000">-&gt;</font>days_to_expiration<font color="#990000">=</font>future_properties<font color="#990000">-&gt;</font>start_days_to_expiration<font color="#990000">;</font>
    future_properties<font color="#990000">-&gt;</font>expiration_month<font color="#990000">=</font>future_properties<font color="#990000">-&gt;</font>start_expiration_month<font color="#990000">;</font>
    future_properties<font color="#990000">-&gt;</font>expiration_year<font color="#990000">=</font>future_properties<font color="#990000">-&gt;</font>start_expiration_year<font color="#990000">;</font>

    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> DEMO_OPTIONS <font color="#990000">||</font>
        properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> DEMO_FUTURES<font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>endingbarrier<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">82</font><font color="#990000">/</font><font color="#993399">2</font><font color="#990000">-</font><b><font color="#000000">strlen</font></b><font color="#990000">(</font><font color="#FF0000">"PRESS 'q' TO QUIT DEMO"</font><font color="#990000">)/</font><font color="#993399">2</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"PRESS 'q' TO QUIT DEMO"</font><font color="#990000">);</font>
      <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_STANDOUT<font color="#990000">);</font>

      <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

      <b><font color="#0000FF">return</font></b><font color="#990000">;</font>
    <font color="#FF0000">}</font>

    <i><font color="#9A1900">/* ending barrier for options */</font></i>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> OPTION_CLASS <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <i><font color="#9A1900">/* ending barrier for options */</font></i>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>endingbarrier<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"h-help Type TAB or +-123456789ABCDEFGIJKLMNOPRSTUVWXYZ@ for effects q-quit"</font><font color="#990000">);</font>
      <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
            
    <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> FUTURES_CLASS <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <i><font color="#9A1900">/* ending barrier for futures */</font></i>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>endingbarrier<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"h-help Type TAB or +-123456789ACDFLMRSTW@ for effects q-quit"</font><font color="#990000">);</font>
      <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
    <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
    <font color="#FF0000">{</font>
      <b><font color="#000000">move</font></b><font color="#990000">(</font>endingbarrier<font color="#990000">+</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"h-help New asset class implemented? Ending banner not set"</font><font color="#990000">);</font>
      <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
    <font color="#FF0000">}</font>
<font color="#FF0000">}</font>

<i><font color="#9A1900">// remove a set but un-used compiler warning...</font></i>
<b><font color="#0000FF">inline</font></b> <font color="#009900">void</font> <b><font color="#000000">noop</font></b><font color="#990000">(</font><font color="#009900">int</font> x<font color="#990000">)</font>
<font color="#FF0000">{</font>
    <b><font color="#0000FF">return</font></b><font color="#990000">;</font>
<font color="#FF0000">}</font>

<font color="#009900">void</font> <b><font color="#000000">parameter_display</font></b><font color="#990000">(</font><b><font color="#0000FF">struct</font></b> <font color="#008080">_properties</font> <font color="#990000">*</font>properties<font color="#990000">,</font><b><font color="#0000FF">struct</font></b> <font color="#008080">_properties</font> <font color="#990000">*</font>future_properties<font color="#990000">)</font>
<font color="#FF0000">{</font>
  <i><font color="#9A1900">/**********************************************************************/</font></i>

  <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">0</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

  <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportPrice <font color="#990000">)</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"S=%.*f "</font><font color="#990000">,(</font><font color="#993399">2</font><font color="#990000">&gt;</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">?</font><font color="#993399">2</font><font color="#990000">:</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">),</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>price<font color="#990000">);</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>format <font color="#990000">==</font> CALENDAR_CUSTOM <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportStrikes <font color="#990000">)</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"X=%.*f "</font><font color="#990000">,(</font><font color="#993399">2</font><font color="#990000">&gt;</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">?</font><font color="#993399">2</font><font color="#990000">:</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">),</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>strike<font color="#990000">);</font>
  <font color="#FF0000">}</font>
  
  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportRate <font color="#990000">)</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"R=%.*f "</font><font color="#990000">,(</font><font color="#993399">4</font><font color="#990000">&gt;</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">2</font><font color="#990000">?</font><font color="#993399">4</font><font color="#990000">:</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">2</font><font color="#990000">),</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>rate<font color="#990000">);</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportVolatility <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"V=%.*f "</font><font color="#990000">,(</font><font color="#993399">3</font><font color="#990000">&gt;</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">3</font><font color="#990000">?</font><font color="#993399">3</font><font color="#990000">:</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">3</font><font color="#990000">),</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>volatility<font color="#990000">);</font>
  <font color="#FF0000">}</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportDividend <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"D=%.*f "</font><font color="#990000">,(</font><font color="#993399">3</font><font color="#990000">&gt;</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">3</font><font color="#990000">?</font><font color="#993399">3</font><font color="#990000">:</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">3</font><font color="#990000">),</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>dividend<font color="#990000">);</font>
  <font color="#FF0000">}</font>

  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"F=%d "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">);</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">!=</font> FUTURES_CLASS <font color="#990000">&amp;&amp;</font>
      properties<font color="#990000">-&gt;</font>format <font color="#990000">!=</font> CALENDAR_CUSTOM <font color="#990000">&amp;&amp;</font>
      properties<font color="#990000">-&gt;</font>format <font color="#990000">!=</font> DECIMAL_GREEKS<font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"K=%s "</font><font color="#990000">,</font>strike_control<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>strikestoogle<font color="#990000">].</font>des<font color="#990000">);</font>
  <font color="#FF0000">}</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">==</font> CALENDAR <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"W=%d "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>skipmonth<font color="#990000">);</font>
  <font color="#FF0000">}</font>
        
  <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>

  <i><font color="#9A1900">/* curses stuff */</font></i>
  <font color="#009900">int</font> height<font color="#990000">,</font>width<font color="#990000">;</font>
   
  <i><font color="#9A1900">/* curses, get screen size */</font></i>
  <b><font color="#000000">getmaxyx</font></b><font color="#990000">(</font>stdscr<font color="#990000">,</font> height<font color="#990000">,</font> width<font color="#990000">);</font>

  <b><font color="#000000">noop</font></b><font color="#990000">(</font>height<font color="#990000">);</font>

  <font color="#008080">time_t</font> mytime<font color="#990000">;</font>
  <b><font color="#0000FF">struct</font></b> <font color="#008080">tm</font> <font color="#990000">*</font>my_tm<font color="#990000">;</font>
    
  <b><font color="#000000">time</font></b><font color="#990000">(&amp;</font>mytime<font color="#990000">);</font>
  my_tm <font color="#990000">=</font> <b><font color="#000000">localtime</font></b><font color="#990000">(&amp;</font>mytime<font color="#990000">);</font>

  <font color="#009900">char</font> tstring<font color="#990000">[</font><font color="#993399">200</font><font color="#990000">]</font> <font color="#990000">=</font> <font color="#FF0000">{</font> <font color="#993399">0</font> <font color="#FF0000">}</font><font color="#990000">;</font>
  <b><font color="#000000">strftime</font></b><font color="#990000">(</font>tstring<font color="#990000">,</font><b><font color="#0000FF">sizeof</font></b><font color="#990000">(</font>tstring<font color="#990000">),</font><font color="#FF0000">"%a %b %d %Y %H:%M:%S"</font><font color="#990000">,</font>my_tm<font color="#990000">);</font>
  <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">0</font><font color="#990000">,</font>width<font color="#990000">-</font><b><font color="#000000">strlen</font></b><font color="#990000">(</font>tstring<font color="#990000">));</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>tstring<font color="#990000">);</font>
    
  <b><font color="#000000">move</font></b><font color="#990000">(</font><font color="#993399">1</font><font color="#990000">,</font><font color="#993399">0</font><font color="#990000">);</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>decimalorcalendar <font color="#990000">==</font> DECIMALS <font color="#990000">&amp;&amp;</font>
      option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>perpetual <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"T=%.*f %.*f days Expiration %s</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">3</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]-</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>te<font color="#990000">,((</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">&lt;=</font><font color="#993399">2</font><font color="#990000">)?</font><font color="#993399">2</font><font color="#990000">:</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">1</font><font color="#990000">),(</font><font color="#993399">365</font><font color="#990000">*(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]-</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>te<font color="#990000">)),</font><b><font color="#000000">decimal_date_to_real_date</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]-</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>te<font color="#990000">));</font>
    <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
        
  <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
  <font color="#FF0000">{</font>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> FUTURES_CLASS <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Expirations %d%s %s+%d %02d:%02d:%02d</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>future_properties<font color="#990000">-&gt;</font>occurence_in_month<font color="#990000">,</font>order<font color="#990000">[</font>future_properties<font color="#990000">-&gt;</font>occurence_in_month<font color="#990000">-</font><font color="#993399">1</font><font color="#990000">],</font>weekdays<font color="#990000">[</font>future_properties<font color="#990000">-&gt;</font>occurence_day<font color="#990000">-</font><font color="#993399">1</font><font color="#990000">],</font>future_properties<font color="#990000">-&gt;</font>occurence_plus_offset<font color="#990000">,</font>future_properties<font color="#990000">-&gt;</font>expiration_hour<font color="#990000">,</font>future_properties<font color="#990000">-&gt;</font>expiration_minute<font color="#990000">,</font>future_properties<font color="#990000">-&gt;</font>expiration_second<font color="#990000">);</font>

    <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>assetClass <font color="#990000">==</font> OPTION_CLASS <font color="#990000">&amp;&amp;</font>
               option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>perpetual <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Expirations %d%s %s+%d %02d:%02d:%02d OCycle:%s</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>occurence_in_month<font color="#990000">,</font>order<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>occurence_in_month<font color="#990000">-</font><font color="#993399">1</font><font color="#990000">],</font>weekdays<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>occurence_day<font color="#990000">-</font><font color="#993399">1</font><font color="#990000">],</font>properties<font color="#990000">-&gt;</font>occurence_plus_offset<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>expiration_hour<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>expiration_minute<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>expiration_second<font color="#990000">,</font>optionscycle<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>optionscycle<font color="#990000">]);</font>
    <font color="#FF0000">}</font>
  <font color="#FF0000">}</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportTime2 <font color="#990000">&amp;&amp;</font>
     option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>perpetual <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"E%s=%.*f %.*f days %s</font><font color="#CC33CC">\n</font><font color="#FF0000">"</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportTime2des<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">+</font><font color="#993399">2</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]-</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>te2<font color="#990000">,((</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">&lt;=</font><font color="#993399">2</font><font color="#990000">)?</font><font color="#993399">2</font><font color="#990000">:</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">1</font><font color="#990000">),(</font><font color="#993399">365</font><font color="#990000">*(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]-</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>te2<font color="#990000">)),</font><b><font color="#000000">decimal_date_to_real_date</font></b><font color="#990000">(</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>t<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]-</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>te2<font color="#990000">));</font>
    <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
    
  <font color="#FF0000">}</font>

  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"M="</font><font color="#990000">);</font>
  <b><font color="#000000">attron</font></b><font color="#990000">(</font>A_BOLD<font color="#990000">);</font>
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"%s "</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>des<font color="#990000">);</font>
  <b><font color="#000000">attroff</font></b><font color="#990000">(</font>A_BOLD<font color="#990000">);</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>bUsePound<font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>bUseStateNames <font color="#990000">==</font> <font color="#993399">0</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"#%s=%d "</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>UsePounddes<font color="#990000">,</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UsePound<font color="#990000">);</font>
    <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
    <font color="#FF0000">{</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"#%s=%s "</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>UsePounddes<font color="#990000">,&amp;(</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>StateNames<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UsePound<font color="#990000">-</font><font color="#993399">1</font><font color="#990000">]));</font>

    <font color="#FF0000">}</font>
  <font color="#FF0000">}</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>iUseZ <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Z%s=%.*f "</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>UseZdes<font color="#990000">,(</font><font color="#993399">2</font><font color="#990000">&gt;</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">?</font><font color="#993399">2</font><font color="#990000">:</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">),</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseZ<font color="#990000">);</font>
  <font color="#FF0000">}</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>iUseB <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"B%s=%.*f "</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>UseBdes<font color="#990000">,(</font><font color="#993399">2</font><font color="#990000">&gt;</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">?</font><font color="#993399">2</font><font color="#990000">:</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">),</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseB<font color="#990000">);</font>
  <font color="#FF0000">}</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>iUseJ <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"J%s=%.*f "</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>UseJdes<font color="#990000">,(</font><font color="#993399">2</font><font color="#990000">&gt;</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">?</font><font color="#993399">2</font><font color="#990000">:</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">),</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseJ<font color="#990000">);</font>
  <font color="#FF0000">}</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>iUseP <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"P%s=%.*f "</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>UsePdes<font color="#990000">,(</font><font color="#993399">2</font><font color="#990000">&gt;</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">?</font><font color="#993399">2</font><font color="#990000">:</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">4</font><font color="#990000">),</font>properties<font color="#990000">-&gt;</font>data<font color="#990000">.</font>UseP<font color="#990000">);</font>
  <font color="#FF0000">}</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCND <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"I=%s "</font><font color="#990000">,</font>integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>des<font color="#990000">);</font>
        
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>resolution <font color="#990000">)</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"GSteps=%d "</font><font color="#990000">,</font>integration_method<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>integration_type<font color="#990000">].</font>resolution<font color="#990000">);</font>

    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>distribution_mean <font color="#990000">!=</font> <font color="#993399">0</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"U=%.*f "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">3</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>distribution_mean<font color="#990000">);</font>
    <font color="#FF0000">}</font>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>distribution_variance <font color="#990000">!=</font> <font color="#993399">1</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"Y=%.*f "</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>precision<font color="#990000">-</font><font color="#993399">3</font><font color="#990000">,</font>properties<font color="#990000">-&gt;</font>distribution_variance<font color="#990000">);</font>
    <font color="#FF0000">}</font>
     
  <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b>
  <font color="#FF0000">{</font>
    <b><font color="#0000FF">if</font></b><font color="#990000">(</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportSteps <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
    <font color="#FF0000">{</font>
      <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"GSteps=%d "</font><font color="#990000">,</font>option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>steps<font color="#990000">);</font>
    <font color="#FF0000">}</font>
  <font color="#FF0000">}</font>

  <b><font color="#0000FF">if</font></b><font color="#990000">(</font> properties<font color="#990000">-&gt;</font>distribution_type <font color="#990000">!=</font> <font color="#993399">0</font> <font color="#990000">&amp;&amp;</font> option_algorithms<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>modeltype<font color="#990000">].</font>supportCND <font color="#990000">==</font> <font color="#993399">1</font> <font color="#990000">)</font>
  <font color="#FF0000">{</font>
    <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"N=%s "</font><font color="#990000">,</font>distribution_list<font color="#990000">[</font>properties<font color="#990000">-&gt;</font>distribution_type<font color="#990000">].</font>des<font color="#990000">);</font>
  <font color="#FF0000">}</font>
    
  <b><font color="#000000">printw</font></b><font color="#990000">(</font><font color="#FF0000">"H=Help A=AdvProperties "</font><font color="#990000">);</font> 

  <i><font color="#9A1900">//printw("DORC = %d",properties-&gt;decimalorcalendar);</font></i>
  <i><font color="#9A1900">//printw("Format=%d",properties-&gt;format);</font></i>
  <i><font color="#9A1900">//printw("assetClass = %d",option_algorithms[properties-&gt;modeltype].assetClass);</font></i>
  <i><font color="#9A1900">//printw("modeltype = %d",properties-&gt;modeltype);</font></i>

  <b><font color="#000000">clrtoeol</font></b><font color="#990000">();</font>
    
  <b><font color="#000000">refresh</font></b><font color="#990000">();</font>
<font color="#FF0000">}</font>
</tt></pre>
