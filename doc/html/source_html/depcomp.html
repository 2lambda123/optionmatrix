<!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><i><font color="#9A1900">#! /bin/sh</font></i>
<i><font color="#9A1900"># depcomp - compile a program generating dependencies as side-effects</font></i>

<font color="#009900">scriptversion</font><font color="#990000">=</font><font color="#993399">2009</font>-<font color="#993399">04</font>-<font color="#993399">28.21</font><font color="#990000">;</font> <i><font color="#9A1900"># UTC</font></i>

<i><font color="#9A1900"># Copyright (C) 1999, 2000, 2003, 2004, 2005, 2006, 2007, 2009 Free</font></i>
<i><font color="#9A1900"># Software Foundation, Inc.</font></i>

<i><font color="#9A1900"># This program is free software; you can redistribute it and/or modify</font></i>
<i><font color="#9A1900"># it under the terms of the GNU General Public License as published by</font></i>
<i><font color="#9A1900"># the Free Software Foundation; either version 2, or (at your option)</font></i>
<i><font color="#9A1900"># any later version.</font></i>

<i><font color="#9A1900"># This program is distributed in the hope that it will be useful,</font></i>
<i><font color="#9A1900"># but WITHOUT ANY WARRANTY; without even the implied warranty of</font></i>
<i><font color="#9A1900"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</font></i>
<i><font color="#9A1900"># GNU General Public License for more details.</font></i>

<i><font color="#9A1900"># You should have received a copy of the GNU General Public License</font></i>
<i><font color="#9A1900"># along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</font></i>

<i><font color="#9A1900"># As a special exception to the GNU General Public License, if you</font></i>
<i><font color="#9A1900"># distribute this file as part of a program that contains a</font></i>
<i><font color="#9A1900"># configuration script generated by Autoconf, you may include it under</font></i>
<i><font color="#9A1900"># the same distribution terms that you use for the rest of that program.</font></i>

<i><font color="#9A1900"># Originally written by Alexandre Oliva &lt;oliva@dcc.unicamp.br&gt;.</font></i>

<b><font color="#0000FF">case</font></b> <font color="#009900">$1</font> <b><font color="#0000FF">in</font></b>
  <font color="#FF0000">''</font><font color="#990000">)</font>
     echo <font color="#FF0000">"$0: No command.  Try </font><font color="#CC33CC">\`</font><font color="#FF0000">$0 --help' for more information."</font> <font color="#993399">1</font><font color="#990000">&gt;&amp;</font><font color="#993399">2</font>
     <b><font color="#0000FF">exit</font></b> <font color="#993399">1</font><font color="#990000">;</font>
     <font color="#990000">;;</font>
  -h <font color="#990000">|</font> --h<font color="#990000">*)</font>
    cat <font color="#990000">&lt;&lt;\</font>EOF
Usage<font color="#990000">:</font> depcomp <font color="#990000">[</font>--help<font color="#990000">]</font> <font color="#990000">[</font>--version<font color="#990000">]</font> PROGRAM <font color="#990000">[</font>ARGS<font color="#990000">]</font>

Run PROGRAMS ARGS to compile a file<font color="#990000">,</font> generating dependencies
as side-effects<font color="#990000">.</font>

Environment variables<font color="#990000">:</font>
  depmode     Dependency tracking mode<font color="#990000">.</font>
  <b><font color="#0000FF">source</font></b>      Source file <b><font color="#0000FF">read</font></b> by `PROGRAMS ARGS<font color="#FF0000">'.</font>
<font color="#FF0000">  object      Object file output by `PROGRAMS ARGS'</font><font color="#990000">.</font>
  DEPDIR      directory where to store dependencies<font color="#990000">.</font>
  depfile     Dependency file to output<font color="#990000">.</font>
  tmpdepfile  Temporary file to use when outputing dependencies<font color="#990000">.</font>
  libtool     Whether libtool is used <font color="#990000">(</font>yes/no<font color="#990000">).</font>

Report bugs to <font color="#990000">&lt;</font>bug-automake@gnu<font color="#990000">.</font>org<font color="#990000">&gt;.</font>
EOF
    <b><font color="#0000FF">exit</font></b> <font color="#009900">$?</font>
    <font color="#990000">;;</font>
  -v <font color="#990000">|</font> --v<font color="#990000">*)</font>
    echo <font color="#FF0000">"depcomp $scriptversion"</font>
    <b><font color="#0000FF">exit</font></b> <font color="#009900">$?</font>
    <font color="#990000">;;</font>
<b><font color="#0000FF">esac</font></b>

<b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> -z <font color="#FF0000">"$depmode"</font> <font color="#990000">||</font> <b><font color="#0000FF">test</font></b> -z <font color="#FF0000">"$source"</font> <font color="#990000">||</font> <b><font color="#0000FF">test</font></b> -z <font color="#FF0000">"$object"</font><font color="#990000">;</font> <b><font color="#0000FF">then</font></b>
  echo <font color="#FF0000">"depcomp: Variables source, object and depmode must be set"</font> <font color="#993399">1</font><font color="#990000">&gt;&amp;</font><font color="#993399">2</font>
  <b><font color="#0000FF">exit</font></b> <font color="#993399">1</font>
<b><font color="#0000FF">fi</font></b>

<i><font color="#9A1900"># Dependencies for sub/bar.o or sub/bar.obj go into sub/.deps/bar.Po.</font></i>
<font color="#009900">depfile</font><font color="#990000">=</font><font color="#009900">${</font>depfile-`echo <font color="#FF0000">"$object"</font> <font color="#990000">|</font>
  sed <font color="#FF0000">'s|[^</font><font color="#CC33CC">\\</font><font color="#FF0000">/]*$|'</font><font color="#009900">${DEPDIR-.deps}'/&amp;|;s|\.\([^.]*\)$|.P\1|;s|Pobj$|Po|'`}</font>
<font color="#009900">tmpdepfile</font><font color="#990000">=</font><font color="#009900">${</font>tmpdepfile-`echo <font color="#FF0000">"$depfile"</font> <font color="#990000">|</font> sed <font color="#FF0000">'s/</font><font color="#CC33CC">\.\(</font><font color="#FF0000">[^.]*</font><font color="#CC33CC">\)</font><font color="#FF0000">$/.T</font><font color="#CC33CC">\1</font><font color="#FF0000">/'</font>`}

rm -f <font color="#FF0000">"$tmpdepfile"</font>

<i><font color="#9A1900"># Some modes work just like other modes, but use different flags.  We</font></i>
<i><font color="#9A1900"># parameterize here, but still list the modes in the big case below,</font></i>
<i><font color="#9A1900"># to make depend.m4 easier to write.  Note that we *cannot* use a case</font></i>
<i><font color="#9A1900"># here, because this file can only contain one case statement.</font></i>
<b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#FF0000">"$depmode"</font> <font color="#990000">=</font> hp<font color="#990000">;</font> <b><font color="#0000FF">then</font></b>
  <i><font color="#9A1900"># HP compiler uses -M and no extra arg.</font></i>
  <font color="#009900">gccflag</font><font color="#990000">=</font>-M
  <font color="#009900">depmode</font><font color="#990000">=</font>gcc
<b><font color="#0000FF">fi</font></b>

<b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#FF0000">"$depmode"</font> <font color="#990000">=</font> dashXmstdout<font color="#990000">;</font> <b><font color="#0000FF">then</font></b>
   <i><font color="#9A1900"># This is just like dashmstdout with a different argument.</font></i>
   <font color="#009900">dashmflag</font><font color="#990000">=</font>-xM
   <font color="#009900">depmode</font><font color="#990000">=</font>dashmstdout
<b><font color="#0000FF">fi</font></b>

<font color="#009900">cygpath_u</font><font color="#990000">=</font><font color="#FF0000">"cygpath -u -f -"</font>
<b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#FF0000">"$depmode"</font> <font color="#990000">=</font> msvcmsys<font color="#990000">;</font> <b><font color="#0000FF">then</font></b>
   <i><font color="#9A1900"># This is just like msvisualcpp but w/o cygpath translation.</font></i>
   <i><font color="#9A1900"># Just convert the backslash-escaped backslashes to single forward</font></i>
   <i><font color="#9A1900"># slashes to satisfy depend.m4</font></i>
   <font color="#009900">cygpath_u</font><font color="#990000">=</font><font color="#FF0000">"sed s,</font><font color="#CC33CC">\\\\\\\\</font><font color="#FF0000">,/,g"</font>
   <font color="#009900">depmode</font><font color="#990000">=</font>msvisualcpp
<b><font color="#0000FF">fi</font></b>

<b><font color="#0000FF">case</font></b> <font color="#FF0000">"$depmode"</font> <b><font color="#0000FF">in</font></b>
gcc3<font color="#990000">)</font>
<i><font color="#9A1900">## gcc 3 implements dependency tracking that does exactly what</font></i>
<i><font color="#9A1900">## we want.  Yay!  Note: for some reason libtool 1.4 doesn't like</font></i>
<i><font color="#9A1900">## it if -MD -MP comes after the -MF stuff.  Hmm.</font></i>
<i><font color="#9A1900">## Unfortunately, FreeBSD c89 acceptance of flags depends upon</font></i>
<i><font color="#9A1900">## the command line argument order; so add the flags where they</font></i>
<i><font color="#9A1900">## appear in depend2.am.  Note that the slowdown incurred here</font></i>
<i><font color="#9A1900">## affects only configure: in makefiles, %FASTDEP% shortcuts this.</font></i>
  <b><font color="#0000FF">for</font></b> arg
  <b><font color="#0000FF">do</font></b>
    <b><font color="#0000FF">case</font></b> <font color="#009900">$arg</font> <b><font color="#0000FF">in</font></b>
    -c<font color="#990000">)</font> <b><font color="#0000FF">set</font></b> fnord <font color="#FF0000">"$@"</font> -MT <font color="#FF0000">"$object"</font> -MD -MP -MF <font color="#FF0000">"$tmpdepfile"</font> <font color="#FF0000">"$arg"</font> <font color="#990000">;;</font>
    <font color="#990000">*)</font>  <b><font color="#0000FF">set</font></b> fnord <font color="#FF0000">"$@"</font> <font color="#FF0000">"$arg"</font> <font color="#990000">;;</font>
    <b><font color="#0000FF">esac</font></b>
    <b><font color="#0000FF">shift</font></b> <i><font color="#9A1900"># fnord</font></i>
    <b><font color="#0000FF">shift</font></b> <i><font color="#9A1900"># $arg</font></i>
  <b><font color="#0000FF">done</font></b>
  <font color="#FF0000">"$@"</font>
  <font color="#009900">stat</font><font color="#990000">=</font><font color="#009900">$?</font>
  <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#009900">$stat</font> -eq <font color="#993399">0</font><font color="#990000">;</font> <b><font color="#0000FF">then</font></b> <font color="#990000">:</font>
  <b><font color="#0000FF">else</font></b>
    rm -f <font color="#FF0000">"$tmpdepfile"</font>
    <b><font color="#0000FF">exit</font></b> <font color="#009900">$stat</font>
  <b><font color="#0000FF">fi</font></b>
  mv <font color="#FF0000">"$tmpdepfile"</font> <font color="#FF0000">"$depfile"</font>
  <font color="#990000">;;</font>

gcc<font color="#990000">)</font>
<i><font color="#9A1900">## There are various ways to get dependency output from gcc.  Here's</font></i>
<i><font color="#9A1900">## why we pick this rather obscure method:</font></i>
<i><font color="#9A1900">## - Don't want to use -MD because we'd like the dependencies to end</font></i>
<i><font color="#9A1900">##   up in a subdir.  Having to rename by hand is ugly.</font></i>
<i><font color="#9A1900">##   (We might end up doing this anyway to support other compilers.)</font></i>
<i><font color="#9A1900">## - The DEPENDENCIES_OUTPUT environment variable makes gcc act like</font></i>
<i><font color="#9A1900">##   -MM, not -M (despite what the docs say).</font></i>
<i><font color="#9A1900">## - Using -M directly means running the compiler twice (even worse</font></i>
<i><font color="#9A1900">##   than renaming).</font></i>
  <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> -z <font color="#FF0000">"$gccflag"</font><font color="#990000">;</font> <b><font color="#0000FF">then</font></b>
    <font color="#009900">gccflag</font><font color="#990000">=</font>-MD<font color="#990000">,</font>
  <b><font color="#0000FF">fi</font></b>
  <font color="#FF0000">"$@"</font> -Wp<font color="#990000">,</font><font color="#FF0000">"$gccflag$tmpdepfile"</font>
  <font color="#009900">stat</font><font color="#990000">=</font><font color="#009900">$?</font>
  <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#009900">$stat</font> -eq <font color="#993399">0</font><font color="#990000">;</font> <b><font color="#0000FF">then</font></b> <font color="#990000">:</font>
  <b><font color="#0000FF">else</font></b>
    rm -f <font color="#FF0000">"$tmpdepfile"</font>
    <b><font color="#0000FF">exit</font></b> <font color="#009900">$stat</font>
  <b><font color="#0000FF">fi</font></b>
  rm -f <font color="#FF0000">"$depfile"</font>
  echo <font color="#FF0000">"$object : </font><font color="#CC33CC">\\</font><font color="#FF0000">"</font> <font color="#990000">&gt;</font> <font color="#FF0000">"$depfile"</font>
  <font color="#009900">alpha</font><font color="#990000">=</font>ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz
<i><font color="#9A1900">## The second -e expression handles DOS-style file names with drive letters.</font></i>
  sed -e <font color="#FF0000">'s/^[^:]*: / /'</font> <font color="#990000">\</font>
      -e <font color="#FF0000">'s/^['</font><font color="#009900">$alpha</font><font color="#FF0000">']:</font><font color="#CC33CC">\/</font><font color="#FF0000">[^:]*: / /'</font> <font color="#990000">&lt;</font> <font color="#FF0000">"$tmpdepfile"</font> <font color="#990000">&gt;&gt;</font> <font color="#FF0000">"$depfile"</font>
<i><font color="#9A1900">## This next piece of magic avoids the `deleted header file' problem.</font></i>
<i><font color="#9A1900">## The problem is that when a header file which appears in a .P file</font></i>
<i><font color="#9A1900">## is deleted, the dependency causes make to die (because there is</font></i>
<i><font color="#9A1900">## typically no way to rebuild the header).  We avoid this by adding</font></i>
<i><font color="#9A1900">## dummy dependencies for each header file.  Too bad gcc doesn't do</font></i>
<i><font color="#9A1900">## this for us directly.</font></i>
  tr <font color="#FF0000">' '</font> <font color="#FF0000">'</font>
<font color="#FF0000">'</font> <font color="#990000">&lt;</font> <font color="#FF0000">"$tmpdepfile"</font> <font color="#990000">|</font>
<i><font color="#9A1900">## Some versions of gcc put a space before the `:'.  On the theory</font></i>
<i><font color="#9A1900">## that the space means something, we add a space to the output as</font></i>
<i><font color="#9A1900">## well.</font></i>
<i><font color="#9A1900">## Some versions of the HPUX 10.20 sed can't process this invocation</font></i>
<i><font color="#9A1900">## correctly.  Breaking it into two sed invocations is a workaround.</font></i>
    sed -e <font color="#FF0000">'s/^</font><font color="#CC33CC">\\</font><font color="#FF0000">$//'</font> -e <font color="#FF0000">'/^$/d'</font> -e <font color="#FF0000">'/:$/d'</font> <font color="#990000">|</font> sed -e <font color="#FF0000">'s/$/ :/'</font> <font color="#990000">&gt;&gt;</font> <font color="#FF0000">"$depfile"</font>
  rm -f <font color="#FF0000">"$tmpdepfile"</font>
  <font color="#990000">;;</font>

hp<font color="#990000">)</font>
  <i><font color="#9A1900"># This case exists only to let depend.m4 do its work.  It works by</font></i>
  <i><font color="#9A1900"># looking at the text of this script.  This case will never be run,</font></i>
  <i><font color="#9A1900"># since it is checked for above.</font></i>
  <b><font color="#0000FF">exit</font></b> <font color="#993399">1</font>
  <font color="#990000">;;</font>

sgi<font color="#990000">)</font>
  <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#FF0000">"$libtool"</font> <font color="#990000">=</font> yes<font color="#990000">;</font> <b><font color="#0000FF">then</font></b>
    <font color="#FF0000">"$@"</font> <font color="#FF0000">"-Wp,-MDupdate,$tmpdepfile"</font>
  <b><font color="#0000FF">else</font></b>
    <font color="#FF0000">"$@"</font> -MDupdate <font color="#FF0000">"$tmpdepfile"</font>
  <b><font color="#0000FF">fi</font></b>
  <font color="#009900">stat</font><font color="#990000">=</font><font color="#009900">$?</font>
  <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#009900">$stat</font> -eq <font color="#993399">0</font><font color="#990000">;</font> <b><font color="#0000FF">then</font></b> <font color="#990000">:</font>
  <b><font color="#0000FF">else</font></b>
    rm -f <font color="#FF0000">"$tmpdepfile"</font>
    <b><font color="#0000FF">exit</font></b> <font color="#009900">$stat</font>
  <b><font color="#0000FF">fi</font></b>
  rm -f <font color="#FF0000">"$depfile"</font>

  <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> -f <font color="#FF0000">"$tmpdepfile"</font><font color="#990000">;</font> <b><font color="#0000FF">then</font></b>  <i><font color="#9A1900"># yes, the sourcefile depend on other files</font></i>
    echo <font color="#FF0000">"$object : </font><font color="#CC33CC">\\</font><font color="#FF0000">"</font> <font color="#990000">&gt;</font> <font color="#FF0000">"$depfile"</font>

    <i><font color="#9A1900"># Clip off the initial element (the dependent).  Don't try to be</font></i>
    <i><font color="#9A1900"># clever and replace this with sed code, as IRIX sed won't handle</font></i>
    <i><font color="#9A1900"># lines with more than a fixed number of characters (4096 in</font></i>
    <i><font color="#9A1900"># IRIX 6.2 sed, 8192 in IRIX 6.5).  We also remove comment lines;</font></i>
    <i><font color="#9A1900"># the IRIX cc adds comments like `#:fec' to the end of the</font></i>
    <i><font color="#9A1900"># dependency line.</font></i>
    tr <font color="#FF0000">' '</font> <font color="#FF0000">'</font>
<font color="#FF0000">'</font> <font color="#990000">&lt;</font> <font color="#FF0000">"$tmpdepfile"</font> <font color="#990000">\</font>
    <font color="#990000">|</font> sed -e <font color="#FF0000">'s/^.*</font><font color="#CC33CC">\.</font><font color="#FF0000">o://'</font> -e <font color="#FF0000">'s/#.*$//'</font> -e <font color="#FF0000">'/^$/ d'</font> <font color="#990000">|</font> <font color="#990000">\</font>
    tr <font color="#FF0000">'</font>
<font color="#FF0000">'</font> <font color="#FF0000">' '</font> <font color="#990000">&gt;&gt;</font> <font color="#FF0000">"$depfile"</font>
    echo <font color="#990000">&gt;&gt;</font> <font color="#FF0000">"$depfile"</font>

    <i><font color="#9A1900"># The second pass generates a dummy entry for each header file.</font></i>
    tr <font color="#FF0000">' '</font> <font color="#FF0000">'</font>
<font color="#FF0000">'</font> <font color="#990000">&lt;</font> <font color="#FF0000">"$tmpdepfile"</font> <font color="#990000">\</font>
   <font color="#990000">|</font> sed -e <font color="#FF0000">'s/^.*</font><font color="#CC33CC">\.</font><font color="#FF0000">o://'</font> -e <font color="#FF0000">'s/#.*$//'</font> -e <font color="#FF0000">'/^$/ d'</font> -e <font color="#FF0000">'s/$/:/'</font> <font color="#990000">\</font>
   <font color="#990000">&gt;&gt;</font> <font color="#FF0000">"$depfile"</font>
  <b><font color="#0000FF">else</font></b>
    <i><font color="#9A1900"># The sourcefile does not contain any dependencies, so just</font></i>
    <i><font color="#9A1900"># store a dummy comment line, to avoid errors with the Makefile</font></i>
    <i><font color="#9A1900"># "include basename.Plo" scheme.</font></i>
    echo <font color="#FF0000">"#dummy"</font> <font color="#990000">&gt;</font> <font color="#FF0000">"$depfile"</font>
  <b><font color="#0000FF">fi</font></b>
  rm -f <font color="#FF0000">"$tmpdepfile"</font>
  <font color="#990000">;;</font>

aix<font color="#990000">)</font>
  <i><font color="#9A1900"># The C for AIX Compiler uses -M and outputs the dependencies</font></i>
  <i><font color="#9A1900"># in a .u file.  In older versions, this file always lives in the</font></i>
  <i><font color="#9A1900"># current directory.  Also, the AIX compiler puts `$object:' at the</font></i>
  <i><font color="#9A1900"># start of each line; $object doesn't have directory information.</font></i>
  <i><font color="#9A1900"># Version 6 uses the directory in both cases.</font></i>
  <font color="#009900">dir</font><font color="#990000">=</font>`echo <font color="#FF0000">"$object"</font> <font color="#990000">|</font> sed -e <font color="#FF0000">'s|/[^/]*$|/|'</font>`
  <b><font color="#0000FF">test</font></b> <font color="#FF0000">"x$dir"</font> <font color="#990000">=</font> <font color="#FF0000">"x$object"</font> <font color="#990000">&amp;&amp;</font> <font color="#009900">dir</font><font color="#990000">=</font>
  <font color="#009900">base</font><font color="#990000">=</font>`echo <font color="#FF0000">"$object"</font> <font color="#990000">|</font> sed -e <font color="#FF0000">'s|^.*/||'</font> -e <font color="#FF0000">'s/</font><font color="#CC33CC">\.</font><font color="#FF0000">o$//'</font> -e <font color="#FF0000">'s/</font><font color="#CC33CC">\.</font><font color="#FF0000">lo$//'</font>`
  <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#FF0000">"$libtool"</font> <font color="#990000">=</font> yes<font color="#990000">;</font> <b><font color="#0000FF">then</font></b>
    <font color="#009900">tmpdepfile1</font><font color="#990000">=</font><font color="#009900">$dir$base</font><font color="#990000">.</font>u
    <font color="#009900">tmpdepfile2</font><font color="#990000">=</font><font color="#009900">$base</font><font color="#990000">.</font>u
    <font color="#009900">tmpdepfile3</font><font color="#990000">=</font><font color="#009900">$dir</font><font color="#990000">.</font>libs<font color="#990000">/</font><font color="#009900">$base</font><font color="#990000">.</font>u
    <font color="#FF0000">"$@"</font> -Wc<font color="#990000">,</font>-M
  <b><font color="#0000FF">else</font></b>
    <font color="#009900">tmpdepfile1</font><font color="#990000">=</font><font color="#009900">$dir$base</font><font color="#990000">.</font>u
    <font color="#009900">tmpdepfile2</font><font color="#990000">=</font><font color="#009900">$dir$base</font><font color="#990000">.</font>u
    <font color="#009900">tmpdepfile3</font><font color="#990000">=</font><font color="#009900">$dir$base</font><font color="#990000">.</font>u
    <font color="#FF0000">"$@"</font> -M
  <b><font color="#0000FF">fi</font></b>
  <font color="#009900">stat</font><font color="#990000">=</font><font color="#009900">$?</font>

  <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#009900">$stat</font> -eq <font color="#993399">0</font><font color="#990000">;</font> <b><font color="#0000FF">then</font></b> <font color="#990000">:</font>
  <b><font color="#0000FF">else</font></b>
    rm -f <font color="#FF0000">"$tmpdepfile1"</font> <font color="#FF0000">"$tmpdepfile2"</font> <font color="#FF0000">"$tmpdepfile3"</font>
    <b><font color="#0000FF">exit</font></b> <font color="#009900">$stat</font>
  <b><font color="#0000FF">fi</font></b>

  <b><font color="#0000FF">for</font></b> tmpdepfile <b><font color="#0000FF">in</font></b> <font color="#FF0000">"$tmpdepfile1"</font> <font color="#FF0000">"$tmpdepfile2"</font> <font color="#FF0000">"$tmpdepfile3"</font>
  <b><font color="#0000FF">do</font></b>
    <b><font color="#0000FF">test</font></b> -f <font color="#FF0000">"$tmpdepfile"</font> <font color="#990000">&amp;&amp;</font> <b><font color="#0000FF">break</font></b>
  <b><font color="#0000FF">done</font></b>
  <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> -f <font color="#FF0000">"$tmpdepfile"</font><font color="#990000">;</font> <b><font color="#0000FF">then</font></b>
    <i><font color="#9A1900"># Each line is of the form `foo.o: dependent.h'.</font></i>
    <i><font color="#9A1900"># Do two passes, one to just change these to</font></i>
    <i><font color="#9A1900"># `$object: dependent.h' and one to simply `dependent.h:'.</font></i>
    sed -e <font color="#FF0000">"s,^.*</font><font color="#CC33CC">\.</font><font color="#FF0000">[a-z]*:,$object:,"</font> <font color="#990000">&lt;</font> <font color="#FF0000">"$tmpdepfile"</font> <font color="#990000">&gt;</font> <font color="#FF0000">"$depfile"</font>
    <i><font color="#9A1900"># That's a tab and a space in the [].</font></i>
    sed -e <font color="#FF0000">'s,^.*</font><font color="#CC33CC">\.</font><font color="#FF0000">[a-z]*:[	 ]*,,'</font> -e <font color="#FF0000">'s,$,:,'</font> <font color="#990000">&lt;</font> <font color="#FF0000">"$tmpdepfile"</font> <font color="#990000">&gt;&gt;</font> <font color="#FF0000">"$depfile"</font>
  <b><font color="#0000FF">else</font></b>
    <i><font color="#9A1900"># The sourcefile does not contain any dependencies, so just</font></i>
    <i><font color="#9A1900"># store a dummy comment line, to avoid errors with the Makefile</font></i>
    <i><font color="#9A1900"># "include basename.Plo" scheme.</font></i>
    echo <font color="#FF0000">"#dummy"</font> <font color="#990000">&gt;</font> <font color="#FF0000">"$depfile"</font>
  <b><font color="#0000FF">fi</font></b>
  rm -f <font color="#FF0000">"$tmpdepfile"</font>
  <font color="#990000">;;</font>

icc<font color="#990000">)</font>
  <i><font color="#9A1900"># Intel's C compiler understands `-MD -MF file'.  However on</font></i>
  <i><font color="#9A1900">#    icc -MD -MF foo.d -c -o sub/foo.o sub/foo.c</font></i>
  <i><font color="#9A1900"># ICC 7.0 will fill foo.d with something like</font></i>
  <i><font color="#9A1900">#    foo.o: sub/foo.c</font></i>
  <i><font color="#9A1900">#    foo.o: sub/foo.h</font></i>
  <i><font color="#9A1900"># which is wrong.  We want:</font></i>
  <i><font color="#9A1900">#    sub/foo.o: sub/foo.c</font></i>
  <i><font color="#9A1900">#    sub/foo.o: sub/foo.h</font></i>
  <i><font color="#9A1900">#    sub/foo.c:</font></i>
  <i><font color="#9A1900">#    sub/foo.h:</font></i>
  <i><font color="#9A1900"># ICC 7.1 will output</font></i>
  <i><font color="#9A1900">#    foo.o: sub/foo.c sub/foo.h</font></i>
  <i><font color="#9A1900"># and will wrap long lines using \ :</font></i>
  <i><font color="#9A1900">#    foo.o: sub/foo.c ... \</font></i>
  <i><font color="#9A1900">#     sub/foo.h ... \</font></i>
  <i><font color="#9A1900">#     ...</font></i>

  <font color="#FF0000">"$@"</font> -MD -MF <font color="#FF0000">"$tmpdepfile"</font>
  <font color="#009900">stat</font><font color="#990000">=</font><font color="#009900">$?</font>
  <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#009900">$stat</font> -eq <font color="#993399">0</font><font color="#990000">;</font> <b><font color="#0000FF">then</font></b> <font color="#990000">:</font>
  <b><font color="#0000FF">else</font></b>
    rm -f <font color="#FF0000">"$tmpdepfile"</font>
    <b><font color="#0000FF">exit</font></b> <font color="#009900">$stat</font>
  <b><font color="#0000FF">fi</font></b>
  rm -f <font color="#FF0000">"$depfile"</font>
  <i><font color="#9A1900"># Each line is of the form `foo.o: dependent.h',</font></i>
  <i><font color="#9A1900"># or `foo.o: dep1.h dep2.h \', or ` dep3.h dep4.h \'.</font></i>
  <i><font color="#9A1900"># Do two passes, one to just change these to</font></i>
  <i><font color="#9A1900"># `$object: dependent.h' and one to simply `dependent.h:'.</font></i>
  sed <font color="#FF0000">"s,^[^:]*:,$object :,"</font> <font color="#990000">&lt;</font> <font color="#FF0000">"$tmpdepfile"</font> <font color="#990000">&gt;</font> <font color="#FF0000">"$depfile"</font>
  <i><font color="#9A1900"># Some versions of the HPUX 10.20 sed can't process this invocation</font></i>
  <i><font color="#9A1900"># correctly.  Breaking it into two sed invocations is a workaround.</font></i>
  sed <font color="#FF0000">'s,^[^:]*: </font><font color="#CC33CC">\(</font><font color="#FF0000">.*</font><font color="#CC33CC">\)</font><font color="#FF0000">$,</font><font color="#CC33CC">\1</font><font color="#FF0000">,;s/^</font><font color="#CC33CC">\\</font><font color="#FF0000">$//;/^$/d;/:$/d'</font> <font color="#990000">&lt;</font> <font color="#FF0000">"$tmpdepfile"</font> <font color="#990000">|</font>
    sed -e <font color="#FF0000">'s/$/ :/'</font> <font color="#990000">&gt;&gt;</font> <font color="#FF0000">"$depfile"</font>
  rm -f <font color="#FF0000">"$tmpdepfile"</font>
  <font color="#990000">;;</font>

hp2<font color="#990000">)</font>
  <i><font color="#9A1900"># The "hp" stanza above does not work with aCC (C++) and HP's ia64</font></i>
  <i><font color="#9A1900"># compilers, which have integrated preprocessors.  The correct option</font></i>
  <i><font color="#9A1900"># to use with these is +Maked; it writes dependencies to a file named</font></i>
  <i><font color="#9A1900"># 'foo.d', which lands next to the object file, wherever that</font></i>
  <i><font color="#9A1900"># happens to be.</font></i>
  <i><font color="#9A1900"># Much of this is similar to the tru64 case; see comments there.</font></i>
  <font color="#009900">dir</font><font color="#990000">=</font>`echo <font color="#FF0000">"$object"</font> <font color="#990000">|</font> sed -e <font color="#FF0000">'s|/[^/]*$|/|'</font>`
  <b><font color="#0000FF">test</font></b> <font color="#FF0000">"x$dir"</font> <font color="#990000">=</font> <font color="#FF0000">"x$object"</font> <font color="#990000">&amp;&amp;</font> <font color="#009900">dir</font><font color="#990000">=</font>
  <font color="#009900">base</font><font color="#990000">=</font>`echo <font color="#FF0000">"$object"</font> <font color="#990000">|</font> sed -e <font color="#FF0000">'s|^.*/||'</font> -e <font color="#FF0000">'s/</font><font color="#CC33CC">\.</font><font color="#FF0000">o$//'</font> -e <font color="#FF0000">'s/</font><font color="#CC33CC">\.</font><font color="#FF0000">lo$//'</font>`
  <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#FF0000">"$libtool"</font> <font color="#990000">=</font> yes<font color="#990000">;</font> <b><font color="#0000FF">then</font></b>
    <font color="#009900">tmpdepfile1</font><font color="#990000">=</font><font color="#009900">$dir$base</font><font color="#990000">.</font>d
    <font color="#009900">tmpdepfile2</font><font color="#990000">=</font><font color="#009900">$dir</font><font color="#990000">.</font>libs<font color="#990000">/</font><font color="#009900">$base</font><font color="#990000">.</font>d
    <font color="#FF0000">"$@"</font> -Wc<font color="#990000">,+</font>Maked
  <b><font color="#0000FF">else</font></b>
    <font color="#009900">tmpdepfile1</font><font color="#990000">=</font><font color="#009900">$dir$base</font><font color="#990000">.</font>d
    <font color="#009900">tmpdepfile2</font><font color="#990000">=</font><font color="#009900">$dir$base</font><font color="#990000">.</font>d
    <font color="#FF0000">"$@"</font> <font color="#990000">+</font>Maked
  <b><font color="#0000FF">fi</font></b>
  <font color="#009900">stat</font><font color="#990000">=</font><font color="#009900">$?</font>
  <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#009900">$stat</font> -eq <font color="#993399">0</font><font color="#990000">;</font> <b><font color="#0000FF">then</font></b> <font color="#990000">:</font>
  <b><font color="#0000FF">else</font></b>
     rm -f <font color="#FF0000">"$tmpdepfile1"</font> <font color="#FF0000">"$tmpdepfile2"</font>
     <b><font color="#0000FF">exit</font></b> <font color="#009900">$stat</font>
  <b><font color="#0000FF">fi</font></b>

  <b><font color="#0000FF">for</font></b> tmpdepfile <b><font color="#0000FF">in</font></b> <font color="#FF0000">"$tmpdepfile1"</font> <font color="#FF0000">"$tmpdepfile2"</font>
  <b><font color="#0000FF">do</font></b>
    <b><font color="#0000FF">test</font></b> -f <font color="#FF0000">"$tmpdepfile"</font> <font color="#990000">&amp;&amp;</font> <b><font color="#0000FF">break</font></b>
  <b><font color="#0000FF">done</font></b>
  <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> -f <font color="#FF0000">"$tmpdepfile"</font><font color="#990000">;</font> <b><font color="#0000FF">then</font></b>
    sed -e <font color="#FF0000">"s,^.*</font><font color="#CC33CC">\.</font><font color="#FF0000">[a-z]*:,$object:,"</font> <font color="#FF0000">"$tmpdepfile"</font> <font color="#990000">&gt;</font> <font color="#FF0000">"$depfile"</font>
    <i><font color="#9A1900"># Add `dependent.h:' lines.</font></i>
    sed -ne <font color="#FF0000">'2,${</font>
<font color="#FF0000">	       s/^ *//</font>
<font color="#FF0000">	       s/ </font><font color="#CC33CC">\\</font><font color="#FF0000">*$//</font>
<font color="#FF0000">	       s/$/:/</font>
<font color="#FF0000">	       p</font>
<font color="#FF0000">	     }'</font> <font color="#FF0000">"$tmpdepfile"</font> <font color="#990000">&gt;&gt;</font> <font color="#FF0000">"$depfile"</font>
  <b><font color="#0000FF">else</font></b>
    echo <font color="#FF0000">"#dummy"</font> <font color="#990000">&gt;</font> <font color="#FF0000">"$depfile"</font>
  <b><font color="#0000FF">fi</font></b>
  rm -f <font color="#FF0000">"$tmpdepfile"</font> <font color="#FF0000">"$tmpdepfile2"</font>
  <font color="#990000">;;</font>

tru64<font color="#990000">)</font>
   <i><font color="#9A1900"># The Tru64 compiler uses -MD to generate dependencies as a side</font></i>
   <i><font color="#9A1900"># effect.  `cc -MD -o foo.o ...' puts the dependencies into `foo.o.d'.</font></i>
   <i><font color="#9A1900"># At least on Alpha/Redhat 6.1, Compaq CCC V6.2-504 seems to put</font></i>
   <i><font color="#9A1900"># dependencies in `foo.d' instead, so we check for that too.</font></i>
   <i><font color="#9A1900"># Subdirectories are respected.</font></i>
   <font color="#009900">dir</font><font color="#990000">=</font>`echo <font color="#FF0000">"$object"</font> <font color="#990000">|</font> sed -e <font color="#FF0000">'s|/[^/]*$|/|'</font>`
   <b><font color="#0000FF">test</font></b> <font color="#FF0000">"x$dir"</font> <font color="#990000">=</font> <font color="#FF0000">"x$object"</font> <font color="#990000">&amp;&amp;</font> <font color="#009900">dir</font><font color="#990000">=</font>
   <font color="#009900">base</font><font color="#990000">=</font>`echo <font color="#FF0000">"$object"</font> <font color="#990000">|</font> sed -e <font color="#FF0000">'s|^.*/||'</font> -e <font color="#FF0000">'s/</font><font color="#CC33CC">\.</font><font color="#FF0000">o$//'</font> -e <font color="#FF0000">'s/</font><font color="#CC33CC">\.</font><font color="#FF0000">lo$//'</font>`

   <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#FF0000">"$libtool"</font> <font color="#990000">=</font> yes<font color="#990000">;</font> <b><font color="#0000FF">then</font></b>
      <i><font color="#9A1900"># With Tru64 cc, shared objects can also be used to make a</font></i>
      <i><font color="#9A1900"># static library.  This mechanism is used in libtool 1.4 series to</font></i>
      <i><font color="#9A1900"># handle both shared and static libraries in a single compilation.</font></i>
      <i><font color="#9A1900"># With libtool 1.4, dependencies were output in $dir.libs/$base.lo.d.</font></i>
      <i><font color="#9A1900">#</font></i>
      <i><font color="#9A1900"># With libtool 1.5 this exception was removed, and libtool now</font></i>
      <i><font color="#9A1900"># generates 2 separate objects for the 2 libraries.  These two</font></i>
      <i><font color="#9A1900"># compilations output dependencies in $dir.libs/$base.o.d and</font></i>
      <i><font color="#9A1900"># in $dir$base.o.d.  We have to check for both files, because</font></i>
      <i><font color="#9A1900"># one of the two compilations can be disabled.  We should prefer</font></i>
      <i><font color="#9A1900"># $dir$base.o.d over $dir.libs/$base.o.d because the latter is</font></i>
      <i><font color="#9A1900"># automatically cleaned when .libs/ is deleted, while ignoring</font></i>
      <i><font color="#9A1900"># the former would cause a distcleancheck panic.</font></i>
      <font color="#009900">tmpdepfile1</font><font color="#990000">=</font><font color="#009900">$dir</font><font color="#990000">.</font>libs<font color="#990000">/</font><font color="#009900">$base</font><font color="#990000">.</font>lo<font color="#990000">.</font>d   <i><font color="#9A1900"># libtool 1.4</font></i>
      <font color="#009900">tmpdepfile2</font><font color="#990000">=</font><font color="#009900">$dir$base</font><font color="#990000">.</font>o<font color="#990000">.</font>d          <i><font color="#9A1900"># libtool 1.5</font></i>
      <font color="#009900">tmpdepfile3</font><font color="#990000">=</font><font color="#009900">$dir</font><font color="#990000">.</font>libs<font color="#990000">/</font><font color="#009900">$base</font><font color="#990000">.</font>o<font color="#990000">.</font>d    <i><font color="#9A1900"># libtool 1.5</font></i>
      <font color="#009900">tmpdepfile4</font><font color="#990000">=</font><font color="#009900">$dir</font><font color="#990000">.</font>libs<font color="#990000">/</font><font color="#009900">$base</font><font color="#990000">.</font>d      <i><font color="#9A1900"># Compaq CCC V6.2-504</font></i>
      <font color="#FF0000">"$@"</font> -Wc<font color="#990000">,</font>-MD
   <b><font color="#0000FF">else</font></b>
      <font color="#009900">tmpdepfile1</font><font color="#990000">=</font><font color="#009900">$dir$base</font><font color="#990000">.</font>o<font color="#990000">.</font>d
      <font color="#009900">tmpdepfile2</font><font color="#990000">=</font><font color="#009900">$dir$base</font><font color="#990000">.</font>d
      <font color="#009900">tmpdepfile3</font><font color="#990000">=</font><font color="#009900">$dir$base</font><font color="#990000">.</font>d
      <font color="#009900">tmpdepfile4</font><font color="#990000">=</font><font color="#009900">$dir$base</font><font color="#990000">.</font>d
      <font color="#FF0000">"$@"</font> -MD
   <b><font color="#0000FF">fi</font></b>

   <font color="#009900">stat</font><font color="#990000">=</font><font color="#009900">$?</font>
   <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#009900">$stat</font> -eq <font color="#993399">0</font><font color="#990000">;</font> <b><font color="#0000FF">then</font></b> <font color="#990000">:</font>
   <b><font color="#0000FF">else</font></b>
      rm -f <font color="#FF0000">"$tmpdepfile1"</font> <font color="#FF0000">"$tmpdepfile2"</font> <font color="#FF0000">"$tmpdepfile3"</font> <font color="#FF0000">"$tmpdepfile4"</font>
      <b><font color="#0000FF">exit</font></b> <font color="#009900">$stat</font>
   <b><font color="#0000FF">fi</font></b>

   <b><font color="#0000FF">for</font></b> tmpdepfile <b><font color="#0000FF">in</font></b> <font color="#FF0000">"$tmpdepfile1"</font> <font color="#FF0000">"$tmpdepfile2"</font> <font color="#FF0000">"$tmpdepfile3"</font> <font color="#FF0000">"$tmpdepfile4"</font>
   <b><font color="#0000FF">do</font></b>
     <b><font color="#0000FF">test</font></b> -f <font color="#FF0000">"$tmpdepfile"</font> <font color="#990000">&amp;&amp;</font> <b><font color="#0000FF">break</font></b>
   <b><font color="#0000FF">done</font></b>
   <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> -f <font color="#FF0000">"$tmpdepfile"</font><font color="#990000">;</font> <b><font color="#0000FF">then</font></b>
      sed -e <font color="#FF0000">"s,^.*</font><font color="#CC33CC">\.</font><font color="#FF0000">[a-z]*:,$object:,"</font> <font color="#990000">&lt;</font> <font color="#FF0000">"$tmpdepfile"</font> <font color="#990000">&gt;</font> <font color="#FF0000">"$depfile"</font>
      <i><font color="#9A1900"># That's a tab and a space in the [].</font></i>
      sed -e <font color="#FF0000">'s,^.*</font><font color="#CC33CC">\.</font><font color="#FF0000">[a-z]*:[	 ]*,,'</font> -e <font color="#FF0000">'s,$,:,'</font> <font color="#990000">&lt;</font> <font color="#FF0000">"$tmpdepfile"</font> <font color="#990000">&gt;&gt;</font> <font color="#FF0000">"$depfile"</font>
   <b><font color="#0000FF">else</font></b>
      echo <font color="#FF0000">"#dummy"</font> <font color="#990000">&gt;</font> <font color="#FF0000">"$depfile"</font>
   <b><font color="#0000FF">fi</font></b>
   rm -f <font color="#FF0000">"$tmpdepfile"</font>
   <font color="#990000">;;</font>

<i><font color="#9A1900">#nosideeffect)</font></i>
  <i><font color="#9A1900"># This comment above is used by automake to tell side-effect</font></i>
  <i><font color="#9A1900"># dependency tracking mechanisms from slower ones.</font></i>

dashmstdout<font color="#990000">)</font>
  <i><font color="#9A1900"># Important note: in order to support this mode, a compiler *must*</font></i>
  <i><font color="#9A1900"># always write the preprocessed file to stdout, regardless of -o.</font></i>
  <font color="#FF0000">"$@"</font> <font color="#990000">||</font> <b><font color="#0000FF">exit</font></b> <font color="#009900">$?</font>

  <i><font color="#9A1900"># Remove the call to Libtool.</font></i>
  <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#FF0000">"$libtool"</font> <font color="#990000">=</font> yes<font color="#990000">;</font> <b><font color="#0000FF">then</font></b>
    <b><font color="#0000FF">while</font></b> <b><font color="#0000FF">test</font></b> <font color="#FF0000">"X$1"</font> <font color="#990000">!=</font> <font color="#FF0000">'X--mode=compile'</font><font color="#990000">;</font> <b><font color="#0000FF">do</font></b>
      <b><font color="#0000FF">shift</font></b>
    <b><font color="#0000FF">done</font></b>
    <b><font color="#0000FF">shift</font></b>
  <b><font color="#0000FF">fi</font></b>

  <i><font color="#9A1900"># Remove `-o $object'.</font></i>
  <font color="#009900">IFS</font><font color="#990000">=</font><font color="#FF0000">" "</font>
  <b><font color="#0000FF">for</font></b> arg
  <b><font color="#0000FF">do</font></b>
    <b><font color="#0000FF">case</font></b> <font color="#009900">$arg</font> <b><font color="#0000FF">in</font></b>
    -o<font color="#990000">)</font>
      <b><font color="#0000FF">shift</font></b>
      <font color="#990000">;;</font>
    <font color="#009900">$object</font><font color="#990000">)</font>
      <b><font color="#0000FF">shift</font></b>
      <font color="#990000">;;</font>
    <font color="#990000">*)</font>
      <b><font color="#0000FF">set</font></b> fnord <font color="#FF0000">"$@"</font> <font color="#FF0000">"$arg"</font>
      <b><font color="#0000FF">shift</font></b> <i><font color="#9A1900"># fnord</font></i>
      <b><font color="#0000FF">shift</font></b> <i><font color="#9A1900"># $arg</font></i>
      <font color="#990000">;;</font>
    <b><font color="#0000FF">esac</font></b>
  <b><font color="#0000FF">done</font></b>

  <b><font color="#0000FF">test</font></b> -z <font color="#FF0000">"$dashmflag"</font> <font color="#990000">&amp;&amp;</font> <font color="#009900">dashmflag</font><font color="#990000">=</font>-M
  <i><font color="#9A1900"># Require at least two characters before searching for `:'</font></i>
  <i><font color="#9A1900"># in the target name.  This is to cope with DOS-style filenames:</font></i>
  <i><font color="#9A1900"># a dependency such as `c:/foo/bar' could be seen as target `c' otherwise.</font></i>
  <font color="#FF0000">"$@"</font> <font color="#009900">$dashmflag</font> <font color="#990000">|</font>
    sed <font color="#FF0000">'s:^[  ]*[^: ][^:][^:]*</font><font color="#CC33CC">\:</font><font color="#FF0000">[    ]*:'"$object"'</font><font color="#CC33CC">\:</font><font color="#FF0000"> :'</font> <font color="#990000">&gt;</font> <font color="#FF0000">"$tmpdepfile"</font>
  rm -f <font color="#FF0000">"$depfile"</font>
  cat <font color="#990000">&lt;</font> <font color="#FF0000">"$tmpdepfile"</font> <font color="#990000">&gt;</font> <font color="#FF0000">"$depfile"</font>
  tr <font color="#FF0000">' '</font> <font color="#FF0000">'</font>
<font color="#FF0000">'</font> <font color="#990000">&lt;</font> <font color="#FF0000">"$tmpdepfile"</font> <font color="#990000">|</font> <font color="#990000">\</font>
<i><font color="#9A1900">## Some versions of the HPUX 10.20 sed can't process this invocation</font></i>
<i><font color="#9A1900">## correctly.  Breaking it into two sed invocations is a workaround.</font></i>
    sed -e <font color="#FF0000">'s/^</font><font color="#CC33CC">\\</font><font color="#FF0000">$//'</font> -e <font color="#FF0000">'/^$/d'</font> -e <font color="#FF0000">'/:$/d'</font> <font color="#990000">|</font> sed -e <font color="#FF0000">'s/$/ :/'</font> <font color="#990000">&gt;&gt;</font> <font color="#FF0000">"$depfile"</font>
  rm -f <font color="#FF0000">"$tmpdepfile"</font>
  <font color="#990000">;;</font>

dashXmstdout<font color="#990000">)</font>
  <i><font color="#9A1900"># This case only exists to satisfy depend.m4.  It is never actually</font></i>
  <i><font color="#9A1900"># run, as this mode is specially recognized in the preamble.</font></i>
  <b><font color="#0000FF">exit</font></b> <font color="#993399">1</font>
  <font color="#990000">;;</font>

makedepend<font color="#990000">)</font>
  <font color="#FF0000">"$@"</font> <font color="#990000">||</font> <b><font color="#0000FF">exit</font></b> <font color="#009900">$?</font>
  <i><font color="#9A1900"># Remove any Libtool call</font></i>
  <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#FF0000">"$libtool"</font> <font color="#990000">=</font> yes<font color="#990000">;</font> <b><font color="#0000FF">then</font></b>
    <b><font color="#0000FF">while</font></b> <b><font color="#0000FF">test</font></b> <font color="#FF0000">"X$1"</font> <font color="#990000">!=</font> <font color="#FF0000">'X--mode=compile'</font><font color="#990000">;</font> <b><font color="#0000FF">do</font></b>
      <b><font color="#0000FF">shift</font></b>
    <b><font color="#0000FF">done</font></b>
    <b><font color="#0000FF">shift</font></b>
  <b><font color="#0000FF">fi</font></b>
  <i><font color="#9A1900"># X makedepend</font></i>
  <b><font color="#0000FF">shift</font></b>
  <font color="#009900">cleared</font><font color="#990000">=</font>no <font color="#009900">eat</font><font color="#990000">=</font>no
  <b><font color="#0000FF">for</font></b> arg
  <b><font color="#0000FF">do</font></b>
    <b><font color="#0000FF">case</font></b> <font color="#009900">$cleared</font> <b><font color="#0000FF">in</font></b>
    no<font color="#990000">)</font>
      <b><font color="#0000FF">set</font></b> <font color="#FF0000">""</font><font color="#990000">;</font> <b><font color="#0000FF">shift</font></b>
      <font color="#009900">cleared</font><font color="#990000">=</font>yes <font color="#990000">;;</font>
    <b><font color="#0000FF">esac</font></b>
    <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#009900">$eat</font> <font color="#990000">=</font> yes<font color="#990000">;</font> <b><font color="#0000FF">then</font></b>
      <font color="#009900">eat</font><font color="#990000">=</font>no
      <b><font color="#0000FF">continue</font></b>
    <b><font color="#0000FF">fi</font></b>
    <b><font color="#0000FF">case</font></b> <font color="#FF0000">"$arg"</font> <b><font color="#0000FF">in</font></b>
    -D<font color="#990000">*|</font>-I<font color="#990000">*)</font>
      <b><font color="#0000FF">set</font></b> fnord <font color="#FF0000">"$@"</font> <font color="#FF0000">"$arg"</font><font color="#990000">;</font> <b><font color="#0000FF">shift</font></b> <font color="#990000">;;</font>
    <i><font color="#9A1900"># Strip any option that makedepend may not understand.  Remove</font></i>
    <i><font color="#9A1900"># the object too, otherwise makedepend will parse it as a source file.</font></i>
    -arch<font color="#990000">)</font>
      <font color="#009900">eat</font><font color="#990000">=</font>yes <font color="#990000">;;</font>
    -<font color="#990000">*|</font><font color="#009900">$object</font><font color="#990000">)</font>
      <font color="#990000">;;</font>
    <font color="#990000">*)</font>
      <b><font color="#0000FF">set</font></b> fnord <font color="#FF0000">"$@"</font> <font color="#FF0000">"$arg"</font><font color="#990000">;</font> <b><font color="#0000FF">shift</font></b> <font color="#990000">;;</font>
    <b><font color="#0000FF">esac</font></b>
  <b><font color="#0000FF">done</font></b>
  <font color="#009900">obj_suffix</font><font color="#990000">=</font>`echo <font color="#FF0000">"$object"</font> <font color="#990000">|</font> sed <font color="#FF0000">'s/^.*</font><font color="#CC33CC">\.</font><font color="#FF0000">/./'</font>`
  touch <font color="#FF0000">"$tmpdepfile"</font>
  <font color="#009900">${MAKEDEPEND-makedepend}</font> -o<font color="#FF0000">"$obj_suffix"</font> -f<font color="#FF0000">"$tmpdepfile"</font> <font color="#FF0000">"$@"</font>
  rm -f <font color="#FF0000">"$depfile"</font>
  cat <font color="#990000">&lt;</font> <font color="#FF0000">"$tmpdepfile"</font> <font color="#990000">&gt;</font> <font color="#FF0000">"$depfile"</font>
  sed <font color="#FF0000">'1,2d'</font> <font color="#FF0000">"$tmpdepfile"</font> <font color="#990000">|</font> tr <font color="#FF0000">' '</font> <font color="#FF0000">'</font>
<font color="#FF0000">'</font> <font color="#990000">|</font> <font color="#990000">\</font>
<i><font color="#9A1900">## Some versions of the HPUX 10.20 sed can't process this invocation</font></i>
<i><font color="#9A1900">## correctly.  Breaking it into two sed invocations is a workaround.</font></i>
    sed -e <font color="#FF0000">'s/^</font><font color="#CC33CC">\\</font><font color="#FF0000">$//'</font> -e <font color="#FF0000">'/^$/d'</font> -e <font color="#FF0000">'/:$/d'</font> <font color="#990000">|</font> sed -e <font color="#FF0000">'s/$/ :/'</font> <font color="#990000">&gt;&gt;</font> <font color="#FF0000">"$depfile"</font>
  rm -f <font color="#FF0000">"$tmpdepfile"</font> <font color="#FF0000">"$tmpdepfile"</font><font color="#990000">.</font>bak
  <font color="#990000">;;</font>

cpp<font color="#990000">)</font>
  <i><font color="#9A1900"># Important note: in order to support this mode, a compiler *must*</font></i>
  <i><font color="#9A1900"># always write the preprocessed file to stdout.</font></i>
  <font color="#FF0000">"$@"</font> <font color="#990000">||</font> <b><font color="#0000FF">exit</font></b> <font color="#009900">$?</font>

  <i><font color="#9A1900"># Remove the call to Libtool.</font></i>
  <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#FF0000">"$libtool"</font> <font color="#990000">=</font> yes<font color="#990000">;</font> <b><font color="#0000FF">then</font></b>
    <b><font color="#0000FF">while</font></b> <b><font color="#0000FF">test</font></b> <font color="#FF0000">"X$1"</font> <font color="#990000">!=</font> <font color="#FF0000">'X--mode=compile'</font><font color="#990000">;</font> <b><font color="#0000FF">do</font></b>
      <b><font color="#0000FF">shift</font></b>
    <b><font color="#0000FF">done</font></b>
    <b><font color="#0000FF">shift</font></b>
  <b><font color="#0000FF">fi</font></b>

  <i><font color="#9A1900"># Remove `-o $object'.</font></i>
  <font color="#009900">IFS</font><font color="#990000">=</font><font color="#FF0000">" "</font>
  <b><font color="#0000FF">for</font></b> arg
  <b><font color="#0000FF">do</font></b>
    <b><font color="#0000FF">case</font></b> <font color="#009900">$arg</font> <b><font color="#0000FF">in</font></b>
    -o<font color="#990000">)</font>
      <b><font color="#0000FF">shift</font></b>
      <font color="#990000">;;</font>
    <font color="#009900">$object</font><font color="#990000">)</font>
      <b><font color="#0000FF">shift</font></b>
      <font color="#990000">;;</font>
    <font color="#990000">*)</font>
      <b><font color="#0000FF">set</font></b> fnord <font color="#FF0000">"$@"</font> <font color="#FF0000">"$arg"</font>
      <b><font color="#0000FF">shift</font></b> <i><font color="#9A1900"># fnord</font></i>
      <b><font color="#0000FF">shift</font></b> <i><font color="#9A1900"># $arg</font></i>
      <font color="#990000">;;</font>
    <b><font color="#0000FF">esac</font></b>
  <b><font color="#0000FF">done</font></b>

  <font color="#FF0000">"$@"</font> -E <font color="#990000">|</font>
    sed -n -e <font color="#FF0000">'/^# [0-9][0-9]* "</font><font color="#CC33CC">\(</font><font color="#FF0000">[^"]*</font><font color="#CC33CC">\)</font><font color="#FF0000">".*/ s:: </font><font color="#CC33CC">\1</font><font color="#FF0000"> </font><font color="#CC33CC">\\</font><font color="#FF0000">:p'</font> <font color="#990000">\</font>
       -e <font color="#FF0000">'/^#line [0-9][0-9]* "</font><font color="#CC33CC">\(</font><font color="#FF0000">[^"]*</font><font color="#CC33CC">\)</font><font color="#FF0000">".*/ s:: </font><font color="#CC33CC">\1</font><font color="#FF0000"> </font><font color="#CC33CC">\\</font><font color="#FF0000">:p'</font> <font color="#990000">|</font>
    sed <font color="#FF0000">'$ s: </font><font color="#CC33CC">\\</font><font color="#FF0000">$::'</font> <font color="#990000">&gt;</font> <font color="#FF0000">"$tmpdepfile"</font>
  rm -f <font color="#FF0000">"$depfile"</font>
  echo <font color="#FF0000">"$object : </font><font color="#CC33CC">\\</font><font color="#FF0000">"</font> <font color="#990000">&gt;</font> <font color="#FF0000">"$depfile"</font>
  cat <font color="#990000">&lt;</font> <font color="#FF0000">"$tmpdepfile"</font> <font color="#990000">&gt;&gt;</font> <font color="#FF0000">"$depfile"</font>
  sed <font color="#990000">&lt;</font> <font color="#FF0000">"$tmpdepfile"</font> <font color="#FF0000">'/^$/d;s/^ //;s/ </font><font color="#CC33CC">\\</font><font color="#FF0000">$//;s/$/ :/'</font> <font color="#990000">&gt;&gt;</font> <font color="#FF0000">"$depfile"</font>
  rm -f <font color="#FF0000">"$tmpdepfile"</font>
  <font color="#990000">;;</font>

msvisualcpp<font color="#990000">)</font>
  <i><font color="#9A1900"># Important note: in order to support this mode, a compiler *must*</font></i>
  <i><font color="#9A1900"># always write the preprocessed file to stdout.</font></i>
  <font color="#FF0000">"$@"</font> <font color="#990000">||</font> <b><font color="#0000FF">exit</font></b> <font color="#009900">$?</font>

  <i><font color="#9A1900"># Remove the call to Libtool.</font></i>
  <b><font color="#0000FF">if</font></b> <b><font color="#0000FF">test</font></b> <font color="#FF0000">"$libtool"</font> <font color="#990000">=</font> yes<font color="#990000">;</font> <b><font color="#0000FF">then</font></b>
    <b><font color="#0000FF">while</font></b> <b><font color="#0000FF">test</font></b> <font color="#FF0000">"X$1"</font> <font color="#990000">!=</font> <font color="#FF0000">'X--mode=compile'</font><font color="#990000">;</font> <b><font color="#0000FF">do</font></b>
      <b><font color="#0000FF">shift</font></b>
    <b><font color="#0000FF">done</font></b>
    <b><font color="#0000FF">shift</font></b>
  <b><font color="#0000FF">fi</font></b>

  <font color="#009900">IFS</font><font color="#990000">=</font><font color="#FF0000">" "</font>
  <b><font color="#0000FF">for</font></b> arg
  <b><font color="#0000FF">do</font></b>
    <b><font color="#0000FF">case</font></b> <font color="#FF0000">"$arg"</font> <b><font color="#0000FF">in</font></b>
    -o<font color="#990000">)</font>
      <b><font color="#0000FF">shift</font></b>
      <font color="#990000">;;</font>
    <font color="#009900">$object</font><font color="#990000">)</font>
      <b><font color="#0000FF">shift</font></b>
      <font color="#990000">;;</font>
    <font color="#FF0000">"-Gm"</font><font color="#990000">|</font><font color="#FF0000">"/Gm"</font><font color="#990000">|</font><font color="#FF0000">"-Gi"</font><font color="#990000">|</font><font color="#FF0000">"/Gi"</font><font color="#990000">|</font><font color="#FF0000">"-ZI"</font><font color="#990000">|</font><font color="#FF0000">"/ZI"</font><font color="#990000">)</font>
	<b><font color="#0000FF">set</font></b> fnord <font color="#FF0000">"$@"</font>
	<b><font color="#0000FF">shift</font></b>
	<b><font color="#0000FF">shift</font></b>
	<font color="#990000">;;</font>
    <font color="#990000">*)</font>
	<b><font color="#0000FF">set</font></b> fnord <font color="#FF0000">"$@"</font> <font color="#FF0000">"$arg"</font>
	<b><font color="#0000FF">shift</font></b>
	<b><font color="#0000FF">shift</font></b>
	<font color="#990000">;;</font>
    <b><font color="#0000FF">esac</font></b>
  <b><font color="#0000FF">done</font></b>
  <font color="#FF0000">"$@"</font> -E <font color="#993399">2</font><font color="#990000">&gt;</font>/dev/null <font color="#990000">|</font>
  sed -n <font color="#FF0000">'/^#line [0-9][0-9]* "</font><font color="#CC33CC">\(</font><font color="#FF0000">[^"]*</font><font color="#CC33CC">\)</font><font color="#FF0000">"/ s::</font><font color="#CC33CC">\1</font><font color="#FF0000">:p'</font> <font color="#990000">|</font> <font color="#009900">$cygpath_u</font> <font color="#990000">|</font> sort -u <font color="#990000">&gt;</font> <font color="#FF0000">"$tmpdepfile"</font>
  rm -f <font color="#FF0000">"$depfile"</font>
  echo <font color="#FF0000">"$object : </font><font color="#CC33CC">\\</font><font color="#FF0000">"</font> <font color="#990000">&gt;</font> <font color="#FF0000">"$depfile"</font>
  sed <font color="#990000">&lt;</font> <font color="#FF0000">"$tmpdepfile"</font> -n -e <font color="#FF0000">'s% %</font><font color="#CC33CC">\\</font><font color="#FF0000"> %g'</font> -e <font color="#FF0000">'/^</font><font color="#CC33CC">\(</font><font color="#FF0000">.*</font><font color="#CC33CC">\)</font><font color="#FF0000">$/ s::	</font><font color="#CC33CC">\1</font><font color="#FF0000"> </font><font color="#CC33CC">\\</font><font color="#FF0000">:p'</font> <font color="#990000">&gt;&gt;</font> <font color="#FF0000">"$depfile"</font>
  echo <font color="#FF0000">"	"</font> <font color="#990000">&gt;&gt;</font> <font color="#FF0000">"$depfile"</font>
  sed <font color="#990000">&lt;</font> <font color="#FF0000">"$tmpdepfile"</font> -n -e <font color="#FF0000">'s% %</font><font color="#CC33CC">\\</font><font color="#FF0000"> %g'</font> -e <font color="#FF0000">'/^</font><font color="#CC33CC">\(</font><font color="#FF0000">.*</font><font color="#CC33CC">\)</font><font color="#FF0000">$/ s::</font><font color="#CC33CC">\1\:</font><font color="#FF0000">:p'</font> <font color="#990000">&gt;&gt;</font> <font color="#FF0000">"$depfile"</font>
  rm -f <font color="#FF0000">"$tmpdepfile"</font>
  <font color="#990000">;;</font>

msvcmsys<font color="#990000">)</font>
  <i><font color="#9A1900"># This case exists only to let depend.m4 do its work.  It works by</font></i>
  <i><font color="#9A1900"># looking at the text of this script.  This case will never be run,</font></i>
  <i><font color="#9A1900"># since it is checked for above.</font></i>
  <b><font color="#0000FF">exit</font></b> <font color="#993399">1</font>
  <font color="#990000">;;</font>

none<font color="#990000">)</font>
  <b><font color="#0000FF">exec</font></b> <font color="#FF0000">"$@"</font>
  <font color="#990000">;;</font>

<font color="#990000">*)</font>
  echo <font color="#FF0000">"Unknown depmode $depmode"</font> <font color="#993399">1</font><font color="#990000">&gt;&amp;</font><font color="#993399">2</font>
  <b><font color="#0000FF">exit</font></b> <font color="#993399">1</font>
  <font color="#990000">;;</font>
<b><font color="#0000FF">esac</font></b>

<b><font color="#0000FF">exit</font></b> <font color="#993399">0</font>

<i><font color="#9A1900"># Local Variables:</font></i>
<i><font color="#9A1900"># mode: shell-script</font></i>
<i><font color="#9A1900"># sh-indentation: 2</font></i>
<i><font color="#9A1900"># eval: (add-hook 'write-file-hooks 'time-stamp)</font></i>
<i><font color="#9A1900"># time-stamp-start: "scriptversion="</font></i>
<i><font color="#9A1900"># time-stamp-format: "%:y-%02m-%02d.%02H"</font></i>
<i><font color="#9A1900"># time-stamp-time-zone: "UTC"</font></i>
<i><font color="#9A1900"># time-stamp-end: "; # UTC"</font></i>
<i><font color="#9A1900"># End:</font></i>
</tt></pre>
